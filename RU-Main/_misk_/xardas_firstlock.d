var int XarKnowHLH; 

func void xardas_firstlock()
{
	Wld_InsertNpc(Ghost,"NW_CASTLEMINE_GHOST_01");
	Wld_InsertNpc(Ghost,"NW_TROLLAREA_TROLLROCKCAVE_02");
	Wld_InsertNpc(Ghost,"NW_FARM2_TAVERNCAVE1_02");
	Wld_InsertNpc(Ghost,"NW_RITUALFOREST_CAVE_05");
	Wld_InsertNpc(Troll_Rug,"NW_BROTHERTROLL");
	Wld_InsertNpc(Troll_Trag,"NW_BROTHERTROLL");
	Wld_InsertNpc(Troll_Brog,"NW_BROTHERTROLL");
	Wld_InsertNpc(Firewaran_Uniq,"FP_ROAM_NW_TROLLAREA_RUINS_29");
	Wld_InsertNpc(gobbo_mage_gr4,"NW_FARM1_CITYWALL_FOREST_15");
	Wld_InsertNpc(gobbo_mage_gr5,"NW_FARM1_CITYWALL_FOREST_16");
	Wld_InsertNpc(BDT_1000_Bandit_L,"NW_FARM1_BANDITS_CAVE_06");
	Wld_InsertNpc(Keiler,"FP_ROAM_XARDAS_SECRET_23");
	Wld_InsertNpc(Waran,"FP_ROAM_XARDAS_SECRET_08");
	Wld_InsertNpc(Waran,"FP_ROAM_XARDAS_SECRET_15");
	Wld_InsertNpc(Waran,"FP_ROAM_XARDAS_SECRET_04");
	Wld_InsertNpc(gobbo_green1,"NW_XARDAS_TOWER_WATERFALL_CAVE_ENTRANCE_05");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_04");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_06");
	Wld_InsertNpc(YGiant_Rat,"NW_XARDAS_TOWER_SECRET_CAVE_01");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_01");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_01");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_04");
	Wld_InsertNpc(Gobbo_Green,"NW_XARDAS_TOWER_SECRET_CAVE_04");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_FELDREUBER4");
	Wld_InsertNpc(Giant_Bug,"FP_ROAM_MONSTERMILL_11");
	Wld_InsertNpc(Giant_Bug,"NW_BIGMILL_FIELD_MONSTER_01");
	Wld_InsertNpc(Giant_Bug,"NW_BIGMILL_FIELD_MONSTER_02");
	Wld_InsertNpc(Wolf,"NW_TAVERNE_TROLLAREA_MONSTER_04_01");
	Wld_InsertNpc(Gobbo_Green,"NW_TAVERNE_TROLLAREA_MONSTER_05_01");
	Wld_InsertNpc(Warg,"NW_FARM4_WOOD_MONSTER_01");
	Wld_InsertNpc(Warg,"NW_FARM4_WOOD_MONSTER_01");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_MONSTER_02");
	Wld_InsertNpc(Wolf,"NW_FARM4_WOOD_MONSTER_03");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_MONSTER_06");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_MONSTER_07");
	Wld_InsertNpc(Skeleton,"FP_ROAM_CASTLEMINE2_02");
	Wld_InsertNpc(Skeleton,"FP_ROAM_CASTLEMINE2_03");
	Wld_InsertNpc(Skeleton,"FP_ROAM_CASTLEMINE2_06");
	Wld_InsertNpc(Zombie02,"FP_ROAM_CASTLEMINE2_10");
	Wld_InsertNpc(Zombie04,"FP_ROAM_CASTLEMINE2_12");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_NW_BIGFARMFORESTCAVE_03");
	Wld_InsertNpc(Gobbo_Green,"FP_ROAM_BIGFARM_LAKE_CAVE_10");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_BIGFARM_LAKE_CAVE_11");
	Wld_InsertNpc(Gobbo_Green,"FP_ROAM_NW_BIGFARMFORESTCAVE_07");
	Wld_InsertNpc(gobbo_mage,"FP_ROAM_NW_BIGFARMFORESTCAVE_08");
	Wld_InsertNpc(Gobbo_Green,"FP_ROAM_BIGFARM_LAKE_CAVE_05");
	Wld_InsertNpc(Wolf,"NW_SAGITTA_MOREMONSTER_01");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_NEARPEASANT7");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_NEARPEASANT2_14");
	Wld_InsertNpc(Bloodfly,"NW_FARM4_WOOD_NEARPEASANT2_8");
	Wld_InsertNpc(Scavenger,"NW_FARM4_WOOD_NEARPEASANT2_7");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_NEARPEASANT2_12");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_FARM4_WOOD_MONSTER_MORE_02");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_MONSTER_N_3");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_MONSTER_N_2");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_CRYPT_MONSTER08");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_CRYPT_MONSTER02");
	Wld_InsertNpc(Lesser_Skeleton,"NW_CRYPT_MONSTER04");
	Wld_InsertNpc(Lesser_Skeleton,"NW_CRYPT_MONSTER06");
	Wld_InsertNpc(Keiler,"NW_FARM4_WOOD_NAVIGATION_09");
	Wld_InsertNpc(Wolf,"NW_CASTLEMINE_TROLL_05");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_ALLEE_08_N_2");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_ALLEE_08_N_5");
	Wld_InsertNpc(Scavenger,"NW_FARM3_BIGWOOD_02");
	Wld_InsertNpc(Lurker,"NW_FARM3_PATH_11_SMALLRIVER_02");
	Wld_InsertNpc(Scavenger,"NW_FARM3_PATH_11_SMALLRIVER_10");
	Wld_InsertNpc(Lurker,"NW_FARM3_PATH_11_SMALLRIVER_17");
	Wld_InsertNpc(Lurker,"NW_FARM3_PATH_11_SMALLRIVERMID_03");
	Wld_InsertNpc(Keiler,"NW_FARM3_PATH_12_MONSTER_01");
	Wld_InsertNpc(Lurker,"NW_FARM3_MOUNTAINLAKE_MONSTER_01");
	Wld_InsertNpc(Keiler,"NW_BIGFARM_LAKE_03_MOVEMENT");
	Wld_InsertNpc(Giant_Bug,"NW_BIGFARM_LAKE_03_MOVEMENT3");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_BIGFARM_LAKE_03_MOVEMENT5");
	Wld_InsertNpc(Wolf,"NW_TAVERNE_TROLLAREA_MONSTER_02_01");
	Wld_InsertNpc(BDT_1065_Bandit_L,"NW_CASTLEMINE_HUT_01");
	Wld_InsertNpc(BDT_1066_Bandit_L,"NW_CASTLEMINE_HUT_01");
	Wld_InsertNpc(BDT_1067_Bandit_L,"NW_CASTLEMINE_HUT_01");
	Wld_InsertNpc(BDT_10313_Addon_RangerBandit_L,"NW_FARM4_WOOD_RANGERBANDITS_04");
	Wld_InsertNpc(BDT_10310_Addon_RangerBandit_M,"NW_BIGMILL_FARM3_RANGERBANDITS_04");
	Wld_InsertNpc(Warg,"NW_PASS_06");
	Wld_InsertNpc(orcdog,"NW_PASS_11");
	Wld_InsertNpc(Snapper,"NW_PASS_SECRET_16");
	Wld_InsertNpc(Gobbo_Green,"NW_PASS_GRAT_05");
	Wld_InsertNpc(skeleton_warrior,"FP_ROAM_MEDIUMFOREST_KAP3_05");
	Wld_InsertNpc(Zombie02,"FP_ROAM_MEDIUMFOREST_KAP3_02");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_09");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_11");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_28");
	Wld_InsertNpc(Warg,"FP_ROAM_MEDIUMFOREST_KAP3_29");
	Wld_InsertNpc(Giant_Bug,"FP_ROAM_CITYFOREST_KAP3_28");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_CITYFOREST_KAP3_06");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_10");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_11");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_12");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_14");
	Wld_InsertNpc(Warg,"FP_ROAM_CITYFOREST_KAP3_15");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_FARM2_TO_TAVERN_09_MONSTER2");
	Wld_InsertNpc(Giant_Bug,"NW_FARM2_TO_TAVERN_09_MONSTER3");
	Wld_InsertNpc(Keiler,"NW_FOREST_PATH_79");
	Wld_InsertNpc(Keiler,"NW_FOREST_PATH_80_1");
	Wld_InsertNpc(Waran,"NW_FOREST_PATH_82");
	Wld_InsertNpc(Waran,"NW_FOREST_PATH_82_M");
	Wld_InsertNpc(Wolf,"NW_FOREST_PATH_66_M");
	Wld_InsertNpc(Gobbo_Skeleton,"NW_FOREST_PATH_62_M");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_80_1_MOVEMENT8_M");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_80_1_MOVEMENTF");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_31_NAVIGATION3");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_31_NAVIGATION10");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT6");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT15");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT15");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_NAVIGATION16");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_NAVIGATION16");
	Wld_InsertNpc(Snapper,"NW_FOREST_PATH_80_1_MOVEMENT8_M3");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_04_16_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_04_16_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_04_16_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_FOREST_PATH_04_4");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_31_NAVIGATION_M");
	Wld_InsertNpc(orcwarrior2,"NW_FOREST_PATH_31_NAVIGATION19");
	Wld_InsertNpc(orcdog,"NW_FOREST_PATH_18_MONSTER");
	Wld_InsertNpc(orcdog,"NW_FOREST_PATH_72_MONSTER23");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_66_MONSTER");
	Wld_InsertNpc(Warg,"NW_FOREST_PATH_66_MONSTER");
	Wld_InsertNpc(Keiler,"NW_FOREST_PATH_04_14_MONSTER");
	Wld_InsertNpc(Molerat,"NW_CITY_SMFOREST_03_M");
	Wld_InsertNpc(Minecrawler,"NW_MAGECAVE_27");
	Wld_InsertNpc(gobbo_mage,"NW_TROLLAREA_PATH_56");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_NW_TROLLAREA_RUINS_CAVE_03");
	Wld_InsertNpc(Gobbo_Black,"FP_ROAM_NW_TROLLAREA_RUINS_CAVE_05");
	Wld_InsertNpc(Giant_Rat,"NW_TROLLAREA_PORTALTEMPEL_08");
	Wld_InsertNpc(Giant_Rat,"NW_TROLLAREA_PORTALTEMPEL_06");
	Wld_InsertNpc(Wolf,"NW_TROLLAREA_PATH_66_MONSTER");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_07");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PATH_71_MONSTER2");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PATH_15_MONSTER");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_RITUALPATH_04");
	Wld_InsertNpc(Skeleton,"NW_TROLLAREA_TROLLROCKCAVE_03");
	Wld_InsertNpc(Skeleton_Lord,"NW_TROLLAREA_TROLLROCKCAVE_07");
	Wld_InsertNpc(Gobbo_Black,"NW_TROLLAREA_TROLLLAKECAVE_08");
	Wld_InsertNpc(Gobbo_Green,"NW_TROLLAREA_TROLLLAKECAVE_08");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_06");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_04");
	Wld_InsertNpc(Scavenger,"NW_TROLLAREA_PLANE_11");
	Wld_InsertNpc(Lurker,"NW_TROLLAREA_PATH_72");
	Wld_InsertNpc(Waran,"NW_TROLLAREA_PATH_22_MONSTER");
	Wld_InsertNpc(Wolf,"NW_SHRINE_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_PATH_TO_MONASTER_AREA_01");
	Wld_InsertNpc(Gobbo_Green,"NW_BIGFARM_LAKE_MONSTER_05_01");
	Wld_InsertNpc(Giant_Bug,"NW_FARM4_WOOD_MONSTER_N_1_MONSTER");
	Wld_InsertNpc(Giant_Bug,"NW_TAVERNE_TROLLAREA_MONSTER_05_01M1");
	Wld_InsertNpc(Snapper,"NW_TROLLAREA_RUINS_36");
	Wld_InsertNpc(Zombie01,"NW_FARM4_WOOD_MONSTER_MORE_02");
	Wld_InsertNpc(skeleton_warrior,"NW_FARM4_WOOD_MONSTER_MORE_01");
	Wld_InsertNpc(Snapper,"NW_FARM4_WOOD_MONSTER_05");
	Wld_InsertNpc(Snapper,"NW_CASTLEMINE_TROLL_02");
	Wld_InsertNpc(Snapper,"NW_FARM3_PATH_11_SMALLRIVER_10");
	Wld_InsertNpc(Snapper,"NW_FARM3_BIGWOOD_03_C");
	Wld_InsertNpc(xardas_skeleton_guard_03,"NW_XARDAS_TOWER_IN1_19");
	Wld_InsertNpc(xardas_skeleton_guard_03,"NW_XARDAS_TOWER_IN1_22");
	Wld_InsertNpc(xardas_skeleton_guard_03,"NW_XARDAS_TOWER_IN1_23");
	Wld_InsertNpc(skeleton_dark,"NW_CITY_SMFOREST_BANDIT_04");
	Wld_InsertNpc(skeleton_dark,"NW_CRYPT_IN_03");
	Wld_InsertNpc(skeleton_dark,"NW_CRYPT_IN_01");
	Wld_InsertNpc(XARDAS_SKELETON_GUARD_05,"NW_XARDAS_TOWER_IN1_01");
	Wld_InsertNpc(skeleton_dark,"NW_TROLLAREA_TROLLROCKCAVE_08");
	Wld_InsertNpc(skeleton_dark,"NW_TROLLAREA_TROLLROCKCAVE_07");
	Wld_InsertNpc(Shadowbeast,"NW_FOREST_VINOSKELLEREL_01");
	Wld_InsertNpc(zombie_mod,"NW_CRYPT_IN_03");
	Wld_InsertNpc(zombie_mod,"NW_CRYPT_IN_03");
	Wld_InsertNpc(skeleton_dark,"NW_CRYPT_IN_03");
	Wld_InsertNpc(SkeletonMage,"NW_CRYPT_IN_03");
	Wld_InsertNpc(Giant_Rat,"NW_CITY_KANAL_01");
	Wld_InsertNpc(Shadowbeast,"NW_FOREST_PATH_62_ORNA");
	Wld_InsertNpc(SkeletonMage,"NW_FOREST_VINOSKELLEREL_01");
	Wld_InsertNpc(WoodGolem,"NW_TROLLAREA_RITUALPATH_01");
	Wld_InsertNpc(Skeleton,"NW_TROLLAREA_RUINS_28");
	Wld_InsertNpc(Shadowbeast,"FP_MAGICGOLEM");
	Wld_InsertNpc(bloodfly1,"FP_MAGICGOLEM");
	Wld_InsertNpc(bloodfly1,"FP_MAGICGOLEM");
	Wld_InsertNpc(bloodfly1,"FP_MAGICGOLEM");
	Wld_InsertNpc(Skeleton,"NW_FARM_WOOD_MPNSTER_MIRE_01");
	Wld_InsertNpc(zombie_mod,"NW_FARM_WOOD_MPNSTER_MIRE_01");
	Wld_InsertNpc(Skeleton,"NW_FARM_WOOD_MPNSTER_MIRE_01");
	Wld_InsertNpc(SkeletonMage,"NW_CRYPT_MONSTER08");
	Wld_InsertNpc(Skeleton,"NW_BIGMILL_MALAKSVERSTECK_02");
	Wld_InsertNpc(Skeleton,"NW_FARM2_TO_TAVERNCAVE1_02");
	Wld_InsertNpc(Skeleton,"NW_FARM2_TO_TAVERNCAVE1_03");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_TOWER_VALLEY_06_C");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_TOWER_VALLEY_06_B");
	Wld_InsertNpc(bloodfly1,"NW_FARM1_CONNECT_XARDAS");
	Wld_InsertNpc(Scavenger,"NW_FARM1_PATH_SPAWN_03");
	Wld_InsertNpc(SkeletonMage,"FP_ROAM_RITUALFOREST_CAVE_02");
	Wld_InsertNpc(Skeleton,"FP_ROAM_RITUALFOREST_CAVE_01");
	Wld_InsertNpc(Skeleton,"FP_ROAM_RITUALFOREST_CAVE_06");
	Wld_InsertNpc(Snapper,"FP_CAMPFIRE_NW_ATC_ORC_48");
	Wld_InsertNpc(Snapper,"FP_CAMPFIRE_NW_ATC_ORC_48");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_TROLLAREA_RUINS_32");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_TROLLAREA_RUINS_32");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_TROLLAREA_BRIDGE_05_04");
	Wld_InsertNpc(Shadowbeast,"FP_ROAM_NW_TROLLAREA_RIVERSIDECAVE_07_02");
	Wld_InsertNpc(Warg,"FP_ROAM_NW_TROLLAREA_RIVERSIDECAVE_01_02");
	Wld_InsertNpc(SkeletonMage,"EVT_CRYPT_ROOM_FINAL_SPAWN_04");
	Wld_InsertNpc(scavenger_old,"FP_ROAM_NW_TROLLAREA_PLANE_11_01");
	Wld_InsertNpc(scavenger_old,"FP_ROAM_NW_TROLLAREA_PLANE_11_01");
	Wld_InsertNpc(SkeletonMage,"EVT_CRYPT_ROOM_FINAL_SPAWN_03");
	Wld_InsertNpc(SkeletonMage,"EVT_CRYPT_ROOM_FINAL_SPAWN_05");
	Wld_InsertNpc(Troll,"FP_ROAM_CASTLEMILL_TROLL_05");
	Wld_InsertNpc(zombie_mod,"FP_GREATPEASANT_STPLATE_05");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_FARMS_PATH_11_SMALLRIVER_23");
	Wld_InsertNpc(FireWaran,"FP_ROAM_NW_FARMS_PATH_11_SMALLRIVER_23");
	Wld_InsertNpc(Warg,"FP_ROAM_PASS_WOLF_12");
	Wld_InsertNpc(Snapper,"FP_STAND_NW_ATC_DJG_04");
	Wld_InsertNpc(Warg,"FP_START_NW_ABANDONEMINE_OW");
};

instance DIA_Xardas_FirstEXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_FirstEXIT_Condition;
	information = DIA_Xardas_FirstEXIT_Info;
	permanent = FALSE;
	description = "Я немедленно отправляюсь в путь!";
};

func int DIA_Xardas_FirstEXIT_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_TODO) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_FirstEXIT_Info()
{
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_15_00");	//Я немедленно отправляюсь в путь!
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_14_01");	//Хорошо! И еще одно. Постарайся не сообщать всем подряд, что моя башня теперь за пределами Долины Рудников. В первую очередь, будь осторожен с магами Огня!
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_14_02");	//С тех пор, как я отошел от них, Круг Огня считает меня мертвым - и это очень хорошо.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_14_03");	//И помни, что цели, которые перед тобой сейчас стоят, потребуют от тебя огромных усилий!
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_14_04");	//Конечно, силы твои и возможности стали значительно меньше, нежели когда ты шел на бой со Спящим.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_14_05");	//Поэтому я не совсем уверен - справишься ли ты?
	Mob_CreateItems("NW_CHEST_49",ItMw_Rapier,1);
	REALPROTMAGIC = 0;
	REALPROTFIRE = 0;
	Wld_InsertNpc(dmt_1212_dagot,"NW_XARDAS_TOWER_IN1_28");
	Info_ClearChoices(DIA_Xardas_FirstEXIT);
	Info_AddChoice(DIA_Xardas_FirstEXIT,"К чему все эти разговоры? (Cложность: легендарная)",DIA_Xardas_FirstEXIT_Legend);
	Info_AddChoice(DIA_Xardas_FirstEXIT,"Конечно же, я справлюсь. (Cложность: тяжелая)",DIA_Xardas_FirstEXIT_CantStopMe);
	Info_AddChoice(DIA_Xardas_FirstEXIT,"У меня тоже есть небольшие сомнения на этот счет. (Сложность: обычная)",DIA_Xardas_FirstEXIT_DontKnow);
	Info_AddChoice(DIA_Xardas_FirstEXIT,"Да, дело будет не из легких. Мне понадобится помощь! (Сложность: легкая)",DIA_Xardas_FirstEXIT_NeedHelp);
};

func void DIA_Xardas_FirstEXIT_Legend()
{
	Snd_Play("DRAGON_WRATH_01");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_Legend_01_01");	//К чему все эти разговоры?
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_Legend_01_02");	//Ты не хуже меня знаешь о том, что только я смогу справиться с нависшей над нами угрозой.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_Legend_01_03");	//Иначе навряд ли стал бы тратить столько времени и сил, пытаясь вытащить меня из Храма Спящего.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_Legend_01_04");	//Поэтому лучше оставь все свои сомнения для кого-нибудь другого и позволь мне уже наконец-то заняться делом!
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_Legend_01_05");	//(обреченно) Сумасшедший! Так спешишь покончить с собой?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_Legend_01_06");	//Но ты ведь даже и представить себе не можешь, что тебя ждет после того, когда ты покинешь пределы моей башни.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_Legend_01_07");	//Меня это не пугает.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_Legend_01_08");	//И это очень плохо! Поскольку человек, лишившийся страха, уже заранее обречен на погибель. 
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_Legend_01_09");	//Он не знает меры и не представляет истинной угрозы, исходящей от врагов.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_Legend_01_10");	//Хватит читать мне нотации! Я сделал свой выбор и ты наврядли сможешь переубедить меня в обратном.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_Legend_01_11");	//Хорошо! Да будет так...
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_09");	//И еще кое-что, прежде чем ты уйдешь.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_10");	//Здесь находится тот, кто хотел бы поговорить с тобой.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_CantStopMe_01_11");	//Правда? И кто это?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_12");	//Это ты узнаешь у него самого, если будешь внимательно слушать.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_LastWordsMe_01_01");	//И помни - неважно, кем ты был раньше! Твой новый путь начинается здесь и сейчас. И ты сам решаешь свою судьбу...
	GivePack = TRUE;
	AI_StopProcessInfos(self);
	XP_PER_VICTORY = 10;
	NoHPForLevel = TRUE;
	SURPRISE = 0;
	SBMODE = 1;
	SLEEPDIS = 9;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = TRUE;
	CanChangeItem = TRUE;
	Hero_Hunger = TRUE;
	Hero_Thirst = TRUE;
	Hero_Fatigue = TRUE;
	StatusDayNow = Wld_GetDay();
	AI_StopProcessInfos(self);
	B_Kapitelwechsel(1,NEWWORLD_ZEN);
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	RealMode[2] = TRUE;

	if(CheckRealMode[1] == FALSE)
	{
		CheckRealMode[1] = TRUE;
	};

	Wld_InsertNpc(Oster,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Oster,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Oster,"NW_XARDAS_VALLEY_04");
	xardas_firstlock();
};

func void DIA_Xardas_FirstEXIT_CantStopMe()
{
	Snd_Play("DEM_AMBIENT");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_CantStopMe_01_01");	//Конечно же, я справлюсь. Никто и ничто не остановит меня!
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_CantStopMe_01_02");	//Чем дольше ты меня задерживаешь своими разговорами, тем меньше у нас остается времени на отражение угрозы со стороны драконов.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_03");	//Твоя самоуверенность радует и пугает меня одновременно!
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_04");	//Я надеюсь, что ты верно оцениваешь свои силы. Ведь твоя смерть обречет на погибель и всех жителей этого острова.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_CantStopMe_01_05");	//Не волнуйся! Иначе бы я так не говорил.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_09");	//И еще кое-что, прежде чем ты уйдешь.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_10");	//Здесь находится тот, кто хотел бы поговорить с тобой.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_CantStopMe_01_11");	//Правда? И кто это?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_CantStopMe_01_12");	//Это ты узнаешь у него самого, если будешь внимательно слушать.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_LastWordsMe_01_01");	//И помни - неважно, кем ты был раньше! Твой новый путь начинается здесь и сейчас. И ты сам решаешь свою судьбу...
	GivePack = TRUE;
	AI_StopProcessInfos(self);
	Mob_CreateItems("XAR_CHEST",ItFo_Apple,3);
	Mob_CreateItems("XAR_CHEST",ItMi_Gold,20);
	XP_PER_VICTORY = 15;
	NoHPForLevel = TRUE;
	SURPRISE = 0;
	SBMODE = 1;
	SLEEPDIS = 9;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = TRUE;
	CanChangeItem = TRUE;
	Hero_Hunger = TRUE;
	Hero_Thirst = TRUE;
	Hero_Fatigue = TRUE;
	StatusDayNow = Wld_GetDay();
	hero.attribute[ATR_MANA_MAX] = 20;
	hero.aivar[REAL_MANA_MAX] = 20;
	HeroRealMaxMana = 20;
	hero.attribute[ATR_MANA] = 20;
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_1H,4);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_2H,4);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_BOW,4);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_CROSSBOW,4);
	AI_StopProcessInfos(self);
	B_Kapitelwechsel(1,NEWWORLD_ZEN);
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_PATH_FARM1_08_01");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Scavenger,"NW_XARDAS_VALLEY_04");
	xardas_firstlock();
};

func void DIA_Xardas_FirstEXIT_DontKnow()
{
	Snd_Play("TRO_WARN");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_DontKnow_01_00");	//У меня тоже есть небольшие сомнения на этот счет.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_02");	//Хорошо! Я помогу тебе восстановить часть твоих прежних сил.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_03");	//Правда, мои запасы магических эликсиров несколько ограничены. Но все, что у меня есть, в твоем распоряжении.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_04");	//Вот - возьми и используй с умом!
	CreateInvItems(other,ItPo_Perm_Health,1);
	CreateInvItems(other,ItPo_Health_02,2);
	GivePack = TRUE;
	AI_Print("Получено несколько эликсиров...");
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_DontKnow_01_05");	//А как насчет доспехов?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_06");	//Возьми эти штаны рудокопа. Большим я сейчас не располагаю.
	B_GiveInvItems(self,other,ITAR_PRISONEL,1);
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_08");	//И еще кое-что, прежде чем ты уйдешь...
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_09");	//Здесь находится тот, кто хотел бы поговорить с тобой.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_DontKnow_01_10");	//Правда? И кто это?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_DontKnow_01_11");	//Это ты узнаешь у него самого, если будешь внимательно слушать.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_LastWordsMe_01_01");	//И помни - неважно, кем ты был раньше! Твой новый путь начинается здесь и сейчас. И ты сам решаешь свою судьбу...
	AI_Print(concatText);
	AI_StopProcessInfos(self);
	XP_PER_VICTORY = 20;
	SBMODE = 2;
	SLEEPDIS = 24;
	SURPRISE = 10;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = TRUE;
	CanChangeItem = TRUE;
	Mob_CreateItems("XAR_CHEST",ItFo_Apple,5);
	Mob_CreateItems("XAR_CHEST",ItMi_Gold,200);
	hero.attribute[ATR_STRENGTH] = 20;
	hero.aivar[REAL_STRENGTH] = 20;
	HeroRealStr = 20;
	hero.attribute[ATR_DEXTERITY] = 20;
	hero.aivar[REAL_DEXTERITY] = 20;
	HeroRealDex = 20;
	hero.attribute[ATR_MANA_MAX] = 30;
	hero.aivar[REAL_MANA_MAX] = 30;
	HeroRealMaxMana = 30;
	hero.attribute[ATR_MANA] = 30;
	hero.attribute[ATR_HITPOINTS_MAX] = 200;
	hero.attribute[ATR_HITPOINTS] = 200;
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_1H,9);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_2H,9);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_BOW,9);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_CROSSBOW,9);
	AI_StopProcessInfos(self);
	B_Kapitelwechsel(1,NEWWORLD_ZEN);
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	Wld_InsertNpc(Molerat,"NW_XARDAS_PATH_FARM1_08_01");
	Wld_InsertNpc(Molerat,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Molerat,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Molerat,"NW_XARDAS_VALLEY_04");
};

func void DIA_Xardas_FirstEXIT_NeedHelp()
{
	Snd_Play("SHP_AMBIENT");
	Wld_SendTrigger("EVT_START_CAM");
	AI_PlayAni(hero,"T_MAGRUN_2_HEASHOOT");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_HEALSHRINE",hero,hero,0,0,0,FALSE);
	AI_Wait(hero,1);
	AI_PlayAni(hero,"T_HEASHOOT_2_STAND");
	AI_Wait(hero,1);
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_NeedHelp_01_00");	//Да, дело будет не из легких. Мне понадобится помощь!
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_NeedHelp_01_01");	//Я даже не уверен - смогу ли я вообще добраться до города живым.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_02");	//Да, ты прав. Для тебя сейчас это самая главная задача!
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_03");	//Там ты уже сможешь окрепнуть и набраться сил, чтобы не убегать от каждого встречного зверя.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_06");	//Вот, возьми эти эликсиры и магические свитки с заклинаниями! 
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_07");	//Используй их, чтобы проложить себе путь в Хоринис.
	CreateInvItems(other,ItPo_Health_02,5);
	CreateInvItems(other,ItPo_Perm_Health,1);
	CreateInvItems(other,ItPo_Mana_02,5);
	CreateInvItems(other,ItSc_Firebolt,2);
	CreateInvItems(other,ItSc_Zap,2);
	GivePack = TRUE;
	AI_Print("Получено несколько эликсиров и магических свитков...");
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_08");	//Но не вздумай припрятать их на черный день! Твоя жизнь слишком ценна, чтобы рисковать ею.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_09");	//И вот еще немного золота. Оно-то тебе точно пригодится!
	B_GiveInvItems(self,other,ItMi_Gold,1000);
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_NeedHelp_01_10");	//А как насчет доспехов?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_11");	//Возьми эти штаны рудокопа. Большим я сейчас не располагаю.
	B_GiveInvItems(self,other,ITAR_Prisoner,1);
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_NeedHelp_01_12");	//Ну, спасибо! Теперь я точно не пропаду.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_13");	//Очень надеюсь на это...(с сарказмом) И еще кое-что, прежде чем ты уйдешь.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_14");	//Здесь находится тот, кто хотел бы поговорить с тобой.
	AI_Output(other,self,"DIA_Xardas_FirstEXIT_NeedHelp_01_15");	//Правда? И кто это?
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_NeedHelp_01_16");	//Это ты узнаешь у него самого, если будешь внимательно слушать.
	AI_Output(self,other,"DIA_Xardas_FirstEXIT_LastWordsMe_01_01");	//И помни - неважно, кем ты был раньше! Твой новый путь начинается здесь и сейчас. И ты сам решаешь свою судьбу...
	AI_StopProcessInfos(self);
	XP_PER_VICTORY = 25;
	SBMODE = 4;
	SLEEPDIS = 24;
	SURPRISE = 10;
	CheckStatusHero[0] = SBMODE;
	CheckLevelOption[CH_XP_PER_VICTORY] = XP_PER_VICTORY;
	CheckLevelOption[CH_SURPRISE] = SURPRISE;
	CheckLevelOption[CH_SLEEPDIS] = SLEEPDIS;
	TrapStatus = FALSE;
	CanChangeItem = TRUE;
	Mob_CreateItems("XAR_CHEST",ItMi_Gold,200);
	hero.attribute[ATR_STRENGTH] = 30;
	hero.aivar[REAL_STRENGTH] = 30;
	HeroRealStr = 30;
	hero.attribute[ATR_DEXTERITY] = 30;
	HeroRealDex = 30;
	hero.aivar[REAL_DEXTERITY] = 30;
	hero.attribute[ATR_MANA_MAX] = 40;
	hero.aivar[REAL_MANA_MAX] = 40;
	HeroRealMaxMana = 40;
	hero.attribute[ATR_MANA] = 40;
	hero.attribute[ATR_HITPOINTS_MAX] = 300;
	hero.attribute[ATR_HITPOINTS] = 300;
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_1H,14);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_2H,14);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_BOW,14);
	B_TeachFightTalentPercent_Quiet(self,other,NPC_TALENT_CROSSBOW,14);
	AI_StopProcessInfos(self);
	B_Kapitelwechsel(1,NEWWORLD_ZEN);
	Mdl_RemoveOverlayMds(hero,"PRE_START.MDS");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_PATH_FARM1_08_01");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_TOWER_WATERFALL_01");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_VALLEY_08");
	Wld_InsertNpc(Rabbit,"NW_XARDAS_VALLEY_04");
};

instance DIA_Xardas_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_EXIT_Condition;
	information = DIA_Xardas_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_EXIT_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_NO_TALK(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_no_talk_condition;
	information = dia_xardas_no_talk_info;
	permanent = TRUE;
	important = TRUE;
};

func int dia_xardas_no_talk_condition()
{
	if((self.aivar[AIV_LastFightAgainstPlayer] == FIGHT_LOST) && Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void dia_xardas_no_talk_info()
{
	B_Say(self,other,"$SPAREME");
	B_Say(self,other,"$NEVERENTERROOMAGAIN");
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_DAGOT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_dagot_condition;
	information = dia_xardas_dagot_info;
	permanent = FALSE;
	important = TRUE;
};

func int dia_xardas_dagot_condition()
{
	if((DAGOT_MEET == TRUE) && Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void dia_xardas_dagot_info()
{
	if(GUARDIAN_WAY == TRUE)
	{
		XARDAS_SPEAKDAGOT = TRUE;
		AI_Output(self,other,"DIA_Xardas_Dagot_01_00");	//Значит, ты все-таки принял предложение Хранителя...
		AI_Output(self,other,"DIA_Xardas_Dagot_01_01");	//Возможно, твое решение было поспешным, но сейчас уже ничего не изменить.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_02");	//Теперь ты не сможешь просто так сойти с этого пути.
		AI_Output(other,self,"DIA_Xardas_Dagot_01_03");	//Хранитель сказал, что ты тоже встал на этот путь.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_04");	//Да, это так.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_05");	//До того, как Спящий был повержен, именно Хранители тогда подсказали мне способ изгнать этого демона и разрушить Барьер.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_06");	//Это была цена за то, что я приму их предложение - так же как принял его ты...
		AI_Output(self,other,"DIA_Xardas_Dagot_01_07");	//Если я бы тогда отказался, возможно, сейчас мы бы с тобой не говорили... Кто знает, что вообще могло бы быть.
		AI_Output(other,self,"DIA_Xardas_Dagot_01_08");	//Дагот сказал, что мы еще встретимся, а потом просто исчез!
		AI_Output(self,other,"DIA_Xardas_Dagot_01_09");	//А ты думал, он будет тебе вроде няньки? Встретить Хранителя - честь, которая выпадает лишь избранным.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_09A");	//Ты изгнал Спящего и тем самым заслужил эту честь! А насчет вашей будущей встречи...
		AI_Output(self,other,"DIA_Xardas_Dagot_01_10");	//Если он так сказал, значит, так оно и будет... Придет время и ты его встретишь.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_11");	//А пока оставь свои мысли об этом - сейчас у тебя есть более важные дела...
		B_LogEntry(TOPIC_GUARDIANS,"Ксардас сказал, что я еще встречу Хранителя, но только когда придет время.");
		AI_StopProcessInfos(self);
		Npc_ExchangeRoutine(self,"Xar");
	}
	else if(GUARDIAN_WAY == FALSE)
	{
		AI_Output(self,other,"DIA_Xardas_Dagot_01_13");	//Ты отказался принять предложение Хранителя...
		AI_Output(self,other,"DIA_Xardas_Dagot_01_14");	//Возможно, твое решение было поспешным, но сейчас уже ничего не изменить.
		AI_Output(other,self,"DIA_Xardas_Dagot_01_15");	//Хранитель сказал, что ты тоже встал на этот путь.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_16");	//Я не могу сказать тебе больше того, о чем поведал Хранитель.
		AI_Output(self,other,"DIA_Xardas_Dagot_01_17");	//Оставь свои мысли об этом - сейчас у тебя есть более важные дела...
		B_LogEntry(TOPIC_GUARDIANS,"Ксардас посоветовал мне пока забыть об этом.");
		AI_StopProcessInfos(self);
		Npc_ExchangeRoutine(self,"Xar");
	};
};


var int Addon_zuerst;
var int modcheckv;

instance DIA_Xardas_Hello(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Hello_Condition;
	information = DIA_Xardas_Hello_Info;
	permanent = FALSE;
	important = TRUE;
};


func int DIA_Xardas_Hello_Condition()
{
	if(PrologCredits == TRUE)
	{
		return TRUE;
	};
};

func void DIA_Xardas_Hello_Info()
{
	self.name[0] = "Ксардас";
	self.noFocus = FALSE;
	Mdl_ApplyOverlayMds(other,"PRE_START.MDS");
	Wld_SendTrigger("EVT_START_CAM");
	Snd_Play("RAVENS_EARTHQUAKE1");
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_01,StartHelpBug_01,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_02,StartHelpBug_02,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_03,StartHelpBug_03,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_04,StartHelpBug_04,0,0,0,FALSE);
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",StartHelpBug_05,StartHelpBug_05,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_01,StartHelpBug_01,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_02,StartHelpBug_02,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_03,StartHelpBug_03,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_04,StartHelpBug_04,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_BELIARSRAGE",StartHelpBug_05,StartHelpBug_05,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_Teleport_RING",hero,hero,0,0,0,FALSE);
	AI_PlayAni(hero,"T_STAND_2_HEROSUMMON");
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	Wld_PlayEffect("SPELLFX_BELIARSHRINE",hero,hero,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
	Wld_PlayEffect("spellFX_INCOVATION_WHITE",hero,hero,0,0,0,FALSE);
	Wld_PlayEffect("FX_EarthQuake",hero,hero,0,0,0,FALSE);
	Wld_PlayEffect("SFX_Circle",hero,hero,0,0,0,FALSE);
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_Wait(hero,1);
	AI_UnequipArmor(hero);
	CreateInvItems(other,ITAR_Her_M,1);
	AI_EquipArmor(other,ITAR_Her_M);
	AI_PlayAni(hero,"T_HEROSUMMON_2_STAND");
	AI_Wait(self,2);
	MODCHECKV = 201;
	FalkHunters = 3;
	CaptureCheat = TRUE;
	CrushBonus2HOn = TRUE;
	DPSMeterOn = TRUE;
	CinemaMod = FALSE;
	CinemaModOneTime = FALSE;
	AI_Output(self,other,"DIA_Addon_Xardas_Hello_14_00");	//Наконец-то! Я уж подумал, что нам с тобой не доведется встретиться снова.
	AI_Output(other,self,"DIA_Addon_Xardas_Hello_15_01");	//Я чувствую себя так, будто три недели пролежал под кучей камней.
	AI_Output(self,other,"DIA_Addon_Xardas_Hello_14_02");	//Так оно и было. Ты выжил только благодаря магии твоих доспехов.
	Mob_CreateItems("XAR_CHEST",itpo_anpois,1);
	AI_Output(self,other,"DIA_Addon_Xardas_Hello_14_03");	//Я уже начал опасаться, что не смогу вытащить тебя из-под развалин храма.
	AI_Output(self,other,"DIA_Addon_Xardas_Hello_14_04");	//Но хватит об этом! Сейчас-то ты здесь.
	AI_Output(self,other,"DIA_Addon_Xardas_Hello_14_05");	//И над нами нависла новая угроза.
	Npc_ExchangeRoutine(self,"START");
	Info_ClearChoices(DIA_Xardas_Hello);
	Info_AddChoice(DIA_Xardas_Hello,"Ну, по крайней мере, у нас сейчас достаточно времени. Я сделал это! Спящий...",DIA_Addon_Xardas_Hello_Dragons);
	Info_AddChoice(DIA_Xardas_Hello,"Что это за новая угроза, о которой ты говоришь?",DIA_Addon_Xardas_Hello_Man);
};

func void DIA_Addon_Xardas_Hello_Man()
{
	Npc_RemoveInvItems(hero,ITAR_OLDOREARMOR,1);
	B_RemoveNpcKill(StartHelpBug_01);
	B_RemoveNpcKill(StartHelpBug_02);
	B_RemoveNpcKill(StartHelpBug_03);
	B_RemoveNpcKill(StartHelpBug_04);
	B_RemoveNpcKill(StartHelpBug_05);
	AI_Output(other,self,"DIA_Addon_Xardas_AddonIntro_Add_01_01");	//Что это за новая угроза?
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_02");	//Один из древнейших артефактов зла был возвращен в этот мир!
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_03");	//Его называют Когтем Белиара! И, насколько мне известно, с его помощью можно управлять бесчисленными легионами мертвых.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_04");	//Надеюсь, мне не надо объяснять - что произойдет, если он вдруг попадет в руки приспешников Темного бога.
	AI_Output(other,self,"DIA_Addon_Xardas_AddonIntro_Add_01_05");	//И где сейчас этот артефакт?
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_06");	//В древних записях сказано, что его последним обладателем был народ зодчих, проживавший на этом острове несколько тысячелетий назад. 
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_07");	//Все они были верными почитателями и последователями Аданоса, бога Воды и Равновесия.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_08");	//Я полагаю, что интересующий нас предмет может быть сокрыт в одном из их храмов где-то тут, на острове.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_09");	//Ты должен выяснить это, и как можно скорей.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_10");	//(отвлеченно) Недавно культурой зодчих заинтересовались маги Воды, прибывшие из Долины рудников.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_11");	//Они даже организовали нечто вроде экспедиции в места их святынь.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonIntro_Add_01_12");	//Заручись их поддержкой! С их помощью тебе будет проще отыскать Коготь.
	Addon_zuerst = TRUE;
};

func void DIA_Addon_Xardas_Hello_Dragons()
{
	AI_Output(other,self,"DIA_Xardas_Hello_15_03");	//Ну, по крайней мере, у нас сейчас достаточно времени. Я сделал это! Спящий...
	AI_Output(self,other,"DIA_Xardas_Hello_14_04");	//...был изгнан. Ты победил его, да, это так - но не в наших силах остановить войну, которая разгорается сейчас.
	AI_Output(self,other,"DIA_Xardas_Hello_14_07");	//Своим последним, яростным воплем, Спящий привел в движение армии тьмы.
	AI_Output(self,other,"DIA_Xardas_Hello_14_08");	//Это был приказ всем созданиям тьмы. Слово силы, которому все они обязаны повиноваться.
	AI_Output(self,other,"DIA_Xardas_Hello_14_09");	//Его последним приказом было - ИДИТЕ! И они пошли. Все. Даже драконы!
	AI_Output(other,self,"DIA_Xardas_Hello_15_10");	//(изумленно) Драконы?!
	AI_Output(self,other,"DIA_Xardas_Hello_14_11");	//Это творения древней силы! Я чувствую их присутствие - даже здесь.
	AI_Output(self,other,"DIA_Xardas_Hello_14_12");	//И они собрали вокруг себя целую армию из низших существ.
	AI_Output(other,self,"DIA_Xardas_Hello_15_13");	//И где эта армия сейчас?
	AI_Output(self,other,"DIA_Xardas_Hello_14_14");	//Лагерь этой армии находится недалеко отсюда, в Долине Рудников, около Хориниса. И она готовится к атаке!

	if(Addon_zuerst == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_Hello_14_15");	//(задумчиво) У нас очень мало времени!
	}
	else
	{
		AI_Output(self,other,"DIA_Addon_Xardas_Hello_Dragons_14_06");	//Но это еще не все. Есть еще кое-что, что угрожает нам. Об этом я узнал лишь недавно.
		Info_ClearChoices(DIA_Xardas_Hello);
		Info_AddChoice(DIA_Xardas_Hello,"О какой другой угрозе ты говоришь?",DIA_Addon_Xardas_Hello_Man);
	};
};

instance DIA_Xardas_OtherGreatWeapon(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_OtherGreatWeapon_Condition;
	information = DIA_Xardas_OtherGreatWeapon_Info;
	permanent = FALSE;
	description = "А какое оружие может помочь мне справиться с драконами, кроме Уризеля?";
};

func int DIA_Xardas_OtherGreatWeapon_Condition()
{
	if((Npc_KnowsInfo(other,DIA_Xardas_TODO) == TRUE) && (Kapitel >= 1))
	{
		return TRUE;
	};
};

func void DIA_Xardas_OtherGreatWeapon_Info()
{
	AI_Output(other,self,"DIA_Xardas_OtherGreatWeapon_01_00");	//А какое оружие может помочь мне справиться с драконами, кроме Уризеля?
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_01");	//В этом мире существует довольно много артефактов, которые по силе могут сравниться с Уризелем.
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_02");	//Но мне известны лишь некоторые из них.
	AI_Output(other,self,"DIA_Xardas_OtherGreatWeapon_01_03");	//Ты можешь рассказать мне об этом?
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_05");	//Хорошо. Первый артефакт, достойный упоминания - это магический посох. Его еще называют Гасителем душ!
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_06");	//Он обладает невероятной силой, способной совладать даже с самыми могущественными созданиями этого мира. В том числе и с драконами!
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_07");	//Правда, подчинить его своей воле способен только очень сильный и опытный маг!
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_08");	//В противном случае этот артефакт станет просто бесполезной палкой в неумелых руках.
	AI_Output(other,self,"DIA_Xardas_OtherGreatWeapon_01_09");	//Хорошо. И где мне его искать?
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_10");	//Если бы я знал, он уже давно был бы у меня. Знаешь, такие вещи на дороге не валяются.
	AI_Output(other,self,"DIA_Xardas_OtherGreatWeapon_01_13");	//Понимаю. Что-нибудь еще?
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_14");	//Второй артефакт, о котором мне приходилось слышать, носит имя Эр'Хазир, что в переводе с древнего языка означает - Звездная ярость.
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_15");	//По легенде, этот лук был создан самим Аданосом, дабы его избранный мог нести смерть своим врагам!
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_16");	//Стрелы, выпущенные из него, наделены особенной магической силой, которая способна пробить самую прочную броню.
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_17");	//Оказавшись в твоих руках, это оружие дало бы нам ощутимое преимущество в сражении с драконами.
	AI_Output(self,other,"DIA_Xardas_OtherGreatWeapon_01_19");	//Однако я не могу сказать, существует ли оно на самом деле. Тебе придется выяснить это самому.
	AI_Output(other,self,"DIA_Xardas_OtherGreatWeapon_01_21");	//На другое я и не рассчитывал.
};

instance DIA_Xardas_AWAY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_AWAY_Condition;
	information = DIA_Xardas_AWAY_Info;
	permanent = FALSE;
	description = "Тогда давай побыстрее уносить отсюда ноги!";
};

func int DIA_Xardas_AWAY_Condition()
{
	if(!Npc_KnowsInfo(other,DIA_Xardas_TODO) && !Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_AWAY_Info()
{
	Snd_Play("LevelUp");
	B_GivePlayerXP(50);
	AI_Output(other,self,"DIA_Xardas_AWAY_15_00");	//Тогда давай побыстрее уносить отсюда ноги!
	AI_Output(self,other,"DIA_Xardas_AWAY_14_01");	//Если мы сбежим сейчас, это всего лишь отсрочит нашу встречу с драконами.
	AI_Output(self,other,"DIA_Xardas_AWAY_14_02");	//При помощи солдат и магов, живущих здесь, мы можем остановить их до того, как армия тьмы будет полностью сформирована.
	AI_Output(self,other,"DIA_Xardas_AWAY_14_03");	//У нас не будет лучшего шанса для этого.
	AI_NoticePrint(3000,4098,NAME_Addon_ScareBonus);
	RankPoints = RankPoints + 1;
	ScareBonus = TRUE;
};

instance DIA_Xardas_TODO(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_TODO_Condition;
	information = DIA_Xardas_TODO_Info;
	permanent = FALSE;
	description = "Что мы можем сделать?";
};

func int DIA_Xardas_TODO_Condition()
{
	if(Kapitel < 3)
	{
		return TRUE;
	};
};

func void DIA_Xardas_TODO_Info()
{
	AI_Output(other,self,"DIA_Xardas_TODO_15_00");	//Что мы можем сделать?
	AI_Output(self,other,"DIA_Xardas_TODO_14_01");	//На этот раз самим нам не справиться. Только сила Инноса может помочь нам в борьбе против этих драконов.
	AI_Output(self,other,"DIA_Xardas_TODO_14_02");	//В городе Хоринис, что неподалеку отсюда, остановился отряд паладинов.
	AI_Output(self,other,"DIA_Xardas_TODO_14_03");	//Они обладают сильным артефактом, который может помочь нам победить этих драконов.
	AI_Output(self,other,"DIA_Xardas_TODO_14_04");	//Они называют его 'Глаз Инноса'. Ты должен завладеть этим артефактом.
	AI_Output(self,other,"DIA_Xardas_TODO_14_05");	//Расскажи паладинам о надвигающейся угрозе. Ты ДОЛЖЕН убедить их предводителя поддержать нас!
	AI_Output(self,other,"DIA_Xardas_TODO_14_09");	//Однако чтобы одолеть драконов тебе, возможно, понадобится еще один артефакт.
	AI_Output(self,other,"DIA_Xardas_TODO_14_11");	//Тот меч, которым ты сразил Спящего! Глаз защитит тебя от пламени драконов, но чтобы сразить их, тебе понадобится воистину смертоносное оружие!
	AI_Output(other,self,"DIA_Xardas_TODO_14_12");	//Уризель?
	AI_Output(self,other,"DIA_Xardas_TODO_14_13");	//Именно.
	AI_Output(other,self,"DIA_Xardas_TODO_14_14");	//Но ведь он остался в храме Спящего!
	AI_Output(self,other,"DIA_Xardas_TODO_14_15");	//Значит, тебе придется вновь наведаться туда.
	Log_CreateTopic(TOPIC_INNOSEYE,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_INNOSEYE,LOG_Running);
	B_LogEntry(TOPIC_INNOSEYE,"В городе Хоринис расположилась группа паладинов. Они владеют могущественным артефактом: 'Глаз Инноса'. Его власть должна помочь нам против угрозы драконов. Я должен убедить паладинов поддержать нас в этом деле.");
	Log_CreateTopic(TOPIC_ORCTEMPLE,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_ORCTEMPLE,LOG_Running);
	B_LogEntry_Quiet(TOPIC_ORCTEMPLE,"Ксардас сказал, что кроме Глаза Инноса в борьбе против драконов мне может понадобиться могущественный древний клинок УРИЗЕЛЬ, коим я однажды сразил Спящего. Мне следует при первой же возможности наведаться в храм Спящего, где должен был остаться этот легендарный меч.");
	Info_ClearChoices(DIA_Xardas_TODO);
};

instance DIA_Addon_Xardas_StonePlate(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 5;
	condition = DIA_Addon_Xardas_StonePlate_Condition;
	information = DIA_Addon_Xardas_StonePlate_Info;
	description = "Что ты можешь сказать об этой каменной табличке?";
};

func int DIA_Addon_Xardas_StonePlate_Condition()
{
	if(Npc_HasItems(other,ItWr_StonePlateCommon_Addon))
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_StonePlate_Info()
{
	B_GivePlayerXP(XP_Ambient);
	AI_Output(other,self,"DIA_Addon_Xardas_StonePlate_15_00");	//Что ты можешь сказать об этой каменной табличке?
	AI_Output(self,other,"DIA_Addon_Xardas_StonePlate_14_03");	//Сначала я подозревал, что это магический артефакт. Но потом пришел к выводу, что никакой ценности она не имеет.
	AI_Output(self,other,"DIA_Addon_Xardas_StonePlate_14_04");	//Я не смог полностью расшифровать надписи на табличке, но похоже, они относятся к истории какой-то древней культуры.
	AI_Output(self,other,"DIA_Addon_Xardas_StonePlate_14_05");	//Если хочешь, можешь забрать табличку себе. Мне она ни к чему!
};

instance DIA_XARDAS_ORCTEMPLE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_orctemple_condition;
	information = dia_xardas_orctemple_info;
	permanent = FALSE;
	description = "Я обнаружил странные вещи...";
};

func int dia_xardas_orctemple_condition()
{
	if((MIS_ORCTEMPLE == LOG_Running) && (ORCTEMPLEONETIME == TRUE) && (ORCTEMPLEGATEOPENED == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_orctemple_info()
{
	AI_Output(other,self,"DIA_Xardas_OrcTemple_15_00");	//Я обнаружил странные вещи на месте входа в храм Спящего.
	AI_Output(other,self,"DIA_Xardas_OrcTemple_15_01");	//Орки-призраки, которые ни на что не реагируют и закрытый каменной плитой тоннель вглубь горы.
	AI_Output(self,other,"DIA_Xardas_OrcTemple_14_02");	//Ты пришел очень вовремя. Я как раз разобрался в этом вопросе.
	AI_Output(self,other,"DIA_Xardas_OrcTemple_14_03");	//Этот туннель - дорога в храм Спящего. Орки пробились туда и расчистили завалы сразу после падения Барьера.
	AI_Output(self,other,"DIA_Xardas_OrcTemple_14_04");	//Но затем они почему-то поспешно покинули то место и закрыли вход. И я долго не мог понять, почему.
	AI_Output(self,other,"DIA_Xardas_OrcTemple_14_05");	//Но потом я все понял, разглядев в этом очередную злую шутку Белиара.
	AI_Output(self,other,"DIA_Xardas_OrcTemple_14_06");	//Темного бога очень забавляет, когда его слуги перегрызают друг другу глотки, чтобы выслужиться перед ним.
	AI_Output(self,other,"DIA_Xardas_OrcTemple_14_07");	//Судя по всему, нам придется иметь дело еще с одним серьезным врагом.
	B_GivePlayerXP(XP_Ambient);
	B_LogEntry(TOPIC_ORCTEMPLE,"Найденная решетка закрывает проход в храм Спящего.");
};


instance DIA_XARDAS_ORCTEMPLE2(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_orctemple2_condition;
	information = dia_xardas_orctemple2_info;
	permanent = FALSE;
	description = "О ком ты говоришь?";
};


func int dia_xardas_orctemple2_condition()
{
	if(Npc_KnowsInfo(other,dia_xardas_orctemple) && (MIS_ORCTEMPLE == LOG_Running))
	{
		return TRUE;
	};
};

func void dia_xardas_orctemple2_info()
{
	AI_Output(other,self,"DIA_Xardas_OrcTemple2_15_00");	//О ком ты говоришь?
	AI_Output(self,other,"DIA_Xardas_OrcTemple2_14_01");	//Полагаю, это один из избранных Белиара. И я не думаю, что он уступит по своей силе драконам - Белиар выбирает сильнейших!
	AI_Output(self,other,"DIA_Xardas_OrcTemple2_14_02");	//Подозреваю, что именно он новый хозяин Уризеля.
	AI_Output(self,other,"DIA_Xardas_OrcTemple2_14_03");	//Храм Спящего - отличное место для таких существ, а демоническая аура этого проклятого места придает ему еще больше сил.
	AI_Output(self,other,"DIA_Xardas_OrcTemple2_14_04");	//Скорее всего, орки были не в состоянии противостоять этому злу. А расчистив храм от завалов, они даже избавили его от лишних забот.
	AI_Output(self,other,"DIA_Xardas_OrcTemple2_14_05");	//Призраки, что ты видел у входа, послужат хорошим устрашением всякому, кто вознамерится посягнуть на его спокойствие.
	AI_Output(self,other,"DIA_Xardas_OrcTemple2_14_06");	//В общем, все в этом деле говорит о том, что тебе еще раз придется отправиться в этот храм и выяснить, что за зло там скрывается.
	B_LogEntry(TOPIC_ORCTEMPLE,"Похоже, мне вновь придется наведаться в храм Спящего и выяснить, что за зло там укрылось.");
};


instance DIA_XARDAS_ORCTEMPLEDOOR(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_orctempledoor_condition;
	information = dia_xardas_orctempledoor_info;
	permanent = FALSE;
	description = "Как мне попасть в храм Спящего?";
};


func int dia_xardas_orctempledoor_condition()
{
	if(Npc_KnowsInfo(other,dia_xardas_orctemple) && (ORCTEMPLEGATEOPENED == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_orctempledoor_info()
{
	AI_Output(other,self,"DIA_Xardas_OrcTempleDoor_15_00");	//Как мне попасть в храм Спящего?
	AI_Output(other,self,"DIA_Xardas_OrcTempleDoor_15_01");	//Рядом с решеткой не видно никаких признаков рычага или переключателя.
	AI_Output(self,other,"DIA_Xardas_OrcTempleDoor_14_02");	//Скорее всего, орки наложили на нее сложное заклинание, и просто так она не откроется.
	AI_Output(self,other,"DIA_Xardas_OrcTempleDoor_14_03");	//Боюсь, тут я ничем не смогу помочь. Придется тебе самому найти разгадку.
	AI_Output(self,other,"DIA_Xardas_OrcTempleDoor_14_04");	//Сдается мне, что ответ следует искать у орков.
	B_LogEntry(TOPIC_ORCTEMPLE,"Ксардас не может мне сказать, как открыть решетку, чтобы проникнуть в храм Спящего. Только орки знают ответ на этот вопрос.");
	ORCTEMPLEGATEINFO = TRUE;
};


instance DIA_XARDAS_DMST_DEAD(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_dmst_dead_condition;
	information = dia_xardas_dmst_dead_info;
	permanent = FALSE;
	description = "Я был в храме Спящего.";
};


func int dia_xardas_dmst_dead_condition()
{
	if((DARKMAGE_ISDEAD == TRUE) && (XARDASKNOWSDEADMAGE == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_dmst_dead_info()
{
	AI_Output(other,self,"DIA_Xardas_DMST_Dead_15_00");	//Я был в храме Спящего.
	AI_Output(self,other,"DIA_Xardas_DMST_Dead_14_03");	//Да?! И кто это был?
	AI_Output(other,self,"DIA_Xardas_DMST_Dead_15_04");	//Какой-то колдун. Выглядел он приблизительно так же, как и ты. Я имею в виду одежду.
	AI_Output(other,self,"DIA_Xardas_DMST_Dead_15_04A");	//И при нем был этот меч - узнаешь?
	AI_Output(self,other,"DIA_Xardas_DMST_Dead_14_05");	//Уризель? Отлично! Он тебе еще не раз пригодится. Значит, некромант... хмм... благодаря тебе Белиар потерял еще одного верного слугу.
	AI_Output(self,other,"DIA_Xardas_DMST_Dead_14_06");	//Этот колдун... он смог стать избранным Белиара. Возможно, это открывает некоторые скрытые возможности для...
	AI_Output(self,other,"DIA_Xardas_DMST_Dead_14_07");	//Ну да ладно... сейчас не об этом! (хитро смеется)
	B_GivePlayerXP(200);
	XARDASKNOWSDEADMAGE = TRUE;
};


instance DIA_XARDAS_MAKERUNE(C_Info)
{
	npc = NONE_100_Xardas;
	condition = dia_xardas_makerune_condition;
	information = dia_xardas_makerune_info;
	important = FALSE;
	permanent = FALSE;
	description = "Ты говорил, что даже маг сможет воспользоваться этим мечом.";
};


func int dia_xardas_makerune_condition()
{
	if((Npc_HasItems(other,itmw_2h_urizel) >= 1) && (XARDASKNOWSDEADMAGE == TRUE) && (KNOWINFOURIZELRUNE == FALSE) && ((other.guild == GIL_KDF) || (other.guild == GIL_GUR) || (other.guild == GIL_KDW) || (other.guild == GIL_KDM)))
	{
		return TRUE;
	};
};

func void dia_xardas_makerune_info()
{
	AI_Output(other,self,"DIA_Xardas_MAKERUNE_15_01");	//Ты говорил, что даже маг сможет воспользоваться этим мечом.
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_02");	//Присмотрись к нему повнимательнее. Видишь этот синий камень в основании клинка?
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_03");	//В нем заключена вся магическая сила Уризеля.
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_04");	//Если забрать его оттуда, я смогу создать магическую руну с теми же свойствами.
	AI_Output(other,self,"DIA_Xardas_MAKERUNE_15_05");	//Сделать из меча магическую руну?
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_06");	//В бою сила ее не уступит силе Уризеля!
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_07");	//Я мог бы сделать это для тебя, но ты должен быть полностью уверен в том, что хочешь этого.
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_08");	//Подумай хорошенько, обратно я не смогу вернуть мечу прежнюю мощь!
	AI_Output(self,other,"DIA_Xardas_MAKERUNE_14_09");	//Итак, твой выбор?
	KNOWINFOURIZELRUNE = TRUE;
};


instance DIA_XARDAS_MAKERUNEDOIT(C_Info)
{
	npc = NONE_100_Xardas;
	condition = dia_xardas_makerunedoit_condition;
	information = dia_xardas_makerunedoit_info;
	important = FALSE;
	permanent = TRUE;
	description = "Возьми камень из Уризеля!";
};


func int dia_xardas_makerunedoit_condition()
{
	if((Npc_HasItems(other,itmw_2h_urizel) >= 1) && (XARDASKNOWSDEADMAGE == TRUE) && (KNOWINFOURIZELRUNE == TRUE) && ((other.guild == GIL_KDF) || (other.guild == GIL_GUR) || (other.guild == GIL_KDW) || (other.guild == GIL_KDM)))
	{
		return TRUE;
	};
};

func void dia_xardas_makerunedoit_info()
{
	AI_Output(other,self,"DIA_Xardas_MAKERUNEDOIT_15_01");	//Возьми камень из Уризеля!
	AI_Output(self,other,"DIA_Xardas_MAKERUNEDOIT_14_03");	//Это твое окончательное решение? Ты действительно хочешь, чтобы я забрал этот камень?
	Info_ClearChoices(dia_xardas_makerunedoit);
	Info_AddChoice(dia_xardas_makerunedoit,"ДА, сделай это!",dia_xardas_makerune_yes);
	Info_AddChoice(dia_xardas_makerunedoit,"НЕТ, не делай этого!",dia_xardas_makerune_no);
};

func void dia_xardas_makerune_yes()
{
	AI_Output(other,self,"DIA_Xardas_MAKERUNEDOIT_15_04");	//ДА, сделай это!
	AI_Output(self,other,"DIA_Xardas_MAKERUNEDOIT_14_05");	//Как пожелаешь... Вот, возьми пустой меч и руну!
	AI_Output(self,other,"DIA_Xardas_MAKERUNEDOIT_14_06");	//Но учти, полностью силу этой руны ты сможешь использовать только в битве с драконами.
	Npc_RemoveInvItem(other,itmw_2h_urizel);
	CreateInvItems(other,itmw_2h_urizel_nomagic,1);
	CreateInvItems(other,ItRu_BreathOfDeath,1);
	Info_ClearChoices(dia_xardas_makerunedoit);
};

func void dia_xardas_makerune_no()
{
	AI_Output(other,self,"DIA_Xardas_MAKERUNEDOIT_15_06");	//НЕТ, не делай этого!
	AI_Output(self,other,"DIA_Xardas_MAKERUNEDOIT_14_07");	//Как пожелаешь. Магическая сила останется в этом мече!
	Info_ClearChoices(dia_xardas_makerunedoit);
};


instance DIA_Addon_Xardas_Portal(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Addon_Xardas_Portal_Condition;
	information = DIA_Addon_Xardas_Portal_Info;
	description = "Маги воды нашли портал, ведущий в неисследованную часть острова...";
};


func int DIA_Addon_Xardas_Portal_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Addon_Saturas_WhatsOrnament) && (Saturas_KlaueInsMeer == FALSE) && !C_ScHasBeliarsWeapon())
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_Portal_Info()
{
	AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_00");	//Маги воды нашли портал, ведущий в неисследованную часть острова...
	AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_01");	//Как интересно...
	AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_02");	//Как только ты узнаешь что-нибудь, что действительно сможет нам помочь, дай мне знать!
	AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_03");	//Где-то там может быть спрятан артефакт Белиара. Ты должен найти его!
};


instance DIA_Addon_Xardas_PortalAgain(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Addon_Xardas_PortalAgain_Condition;
	information = DIA_Addon_Xardas_PortalAgain_Info;
	permanent = FALSE;
	description = "Насчет этой неизвестной части острова...";
};


func int DIA_Addon_Xardas_PortalAgain_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Addon_Xardas_Portal) && (Saturas_KlaueInsMeer == FALSE) && !C_ScHasBeliarsWeapon())
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_PortalAgain_Info()
{
	AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_17");	//Насчет этой неизвестной части острова...
	AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_18");	//Меня не интересуют детали. Возвращайся, если узнаешь что-нибудь действительно полезное.
};


instance DIA_Addon_Xardas_AddonSuccess(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Addon_Xardas_AddonSuccess_Condition;
	information = DIA_Addon_Xardas_AddonSuccess_Info;
	permanent = FALSE;
	description = "Я исследовал неизвестную часть острова...";
};


func int DIA_Addon_Xardas_AddonSuccess_Condition()
{
	if((Saturas_KlaueInsMeer == TRUE) || C_ScHasBeliarsWeapon())
	{
		return TRUE;
	};
};

func void DIA_Addon_Xardas_AddonSuccess_Info()
{
	AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_03");	//Я исследовал неизвестную часть острова...
	AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_04");	//И что ты нашел?
	AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_05");	//Все кончилось тем, что в мои руки попал Коготь Белиара.
	AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_06");	//Коготь Белиара?! Где он сейчас? Он у тебя с собой?
	if(C_ScHasBeliarsWeapon())
	{
		AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_07");	//Да, вот он.
		AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_08");	//Как интересно...
		AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_09");	//Это оружие может нам очень помочь. Но оно также и очень опасно.
		AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_10");	//Будь осторожнее! И самое главное, не потеряй Коготь!
		B_GivePlayerXP(XP_Ambient * 3);
	}
	else
	{
		AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_11");	//У меня его больше нет.
		AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_12");	//Я отдал его магам воды, чтобы они утопили его в море.
		AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_13");	//Ты сошел с ума?! Да ты хотя бы понимаешь, что ты отдал?
		AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_14");	//Это оружие могло бы сослужить нам огромную службу!
		AI_Output(other,self,"DIA_Addon_Xardas_AddonSuccess_15_15");	//Я думаю, что я сделал правильный выбор.
		AI_Output(self,other,"DIA_Addon_Xardas_AddonSuccess_14_16");	//Пути богов неисповедимы ...
	};
};


instance DIA_Xardas_ARTEFAKT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_ARTEFAKT_Condition;
	information = DIA_Xardas_ARTEFAKT_Info;
	permanent = FALSE;
	description = "А что такое этот 'Глаз Инноса'?";
};


func int DIA_Xardas_ARTEFAKT_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_TODO) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_ARTEFAKT_Info()
{
	AI_Output(other,self,"DIA_Xardas_ARTEFAKT_15_00");	//А что такое этот 'Глаз Инноса'?
	AI_Output(self,other,"DIA_Xardas_ARTEFAKT_14_01");	//Это амулет. Легенды гласят, что сам Иннос вложил часть своей силы в этот амулет.
	AI_Output(self,other,"DIA_Xardas_ARTEFAKT_14_02");	//Он восстановит часть твоей потерянной силы и поможет нам победить драконов.
	AI_Output(self,other,"DIA_Xardas_ARTEFAKT_14_03");	//Также он обладает и другими скрытыми возможностями. Я расскажу тебе больше, когда этот амулет будет у тебя в руках.
};


instance DIA_Xardas_PALADIN(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_PALADIN_Condition;
	information = DIA_Xardas_PALADIN_Info;
	permanent = FALSE;
	description = "А почему паладины должны отдать мне этот Глаз Инноса?";
};


func int DIA_Xardas_PALADIN_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_TODO) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_PALADIN_Info()
{
	AI_Output(other,self,"DIA_Xardas_PALADIN_15_00");	//А почему паладины должны отдать мне этот Глаз Инноса?
	AI_Output(self,other,"DIA_Xardas_PALADIN_14_01");	//Потому что ты тот, кому судьбой предназначено носить его.
	AI_Output(other,self,"DIA_Xardas_PALADIN_15_02");	//А откуда тебе это известно?
	AI_Output(self,other,"DIA_Xardas_PALADIN_14_03");	//Есть несколько причин полагать это. Вот самая важная из них: ты победил Спящего. Если бы тебе не благоволили боги, ты бы давно уже был мертв.
	AI_Output(other,self,"DIA_Xardas_PALADIN_15_04");	//Предположим, что ты прав, и мне действительно предначертано носить Глаз Инноса. А откуда паладины узнают, что это правда?
	AI_Output(self,other,"DIA_Xardas_PALADIN_14_05");	//Глаз сам выбирает того, кто может носить его. Когда ты наденешь его, все сомнения паладинов рассеются.
};


instance DIA_Xardas_Khorinis(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 4;
	condition = DIA_Xardas_Khorinis_Condition;
	information = DIA_Xardas_Khorinis_Info;
	permanent = FALSE;
	description = "А как мне добраться до города?";
};


func int DIA_Xardas_Khorinis_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_TODO) && (Lothar.aivar[AIV_TalkedToPlayer] == FALSE) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Khorinis_Info()
{
	AI_Output(other,self,"DIA_Xardas_Khorinis_15_00");	//А как мне добраться до города?
	AI_Output(self,other,"DIA_Xardas_Khorinis_14_01");	//Просто иди по тропинке, ведущей отсюда через горы. Город большой, ты его не пропустишь.
	AI_Output(self,other,"DIA_Xardas_Khorinis_14_02");	//Но будь осторожен! Путь в город полон опасностей. А ты сейчас далеко не так силен, как был раньше.
};


instance DIA_Xardas_WhereEx(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 6;
	condition = DIA_Xardas_WhereEx_Condition;
	information = DIA_Xardas_WhereEx_Info;
	permanent = FALSE;
	description = "А где именно мы сейчас находимся?";
};


func int DIA_Xardas_WhereEx_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_WhereEx_Info()
{
	AI_Output(other,self,"DIA_Xardas_Add_15_00");	//А где именно мы сейчас находимся?
	AI_Output(self,other,"DIA_Xardas_Add_14_01");	//Как я уже сказал, неподалеку от города Хоринис.
	AI_Output(self,other,"DIA_Xardas_Add_14_02");	//Я отстроил мою башню здесь.
	AI_Output(other,self,"DIA_Xardas_Add_15_03");	//Но ведь прошло всего несколько дней, с тех пор как мы были в Долине Рудников...
	AI_Output(self,other,"DIA_Xardas_Add_14_04");	//Слуги, которых я вызвал для строительства моей башни, проделали потрясающую работу...
	AI_Output(other,self,"DIA_Xardas_Add_15_05");	//Да, похоже на это.
};


instance DIA_Xardas_EQUIPMENT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 7;
	condition = DIA_Xardas_EQUIPMENT_Condition;
	information = DIA_Xardas_EQUIPMENT_Info;
	permanent = FALSE;
	description = "А где я смогу найти снаряжение получше?";
};


func int DIA_Xardas_EQUIPMENT_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_EQUIPMENT_Info()
{
	AI_Output(other,self,"DIA_Xardas_EQUIPMENT_15_00");	//А где я смогу найти снаряжение получше?
	AI_Output(self,other,"DIA_Xardas_EQUIPMENT_14_01");	//Ближайшее место, где ты сможешь раздобыть приличное оружие и доспехи - город Хоринис.
	AI_Output(self,other,"DIA_Xardas_EQUIPMENT_14_02");	//Но внизу, в долине, ты сможешь найти целебные травы, которые помогут тебе, если ты будешь ранен в бою.
	AI_Output(self,other,"DIA_Xardas_EQUIPMENT_14_03");	//Видишь озеро справа от моей башни? Оттуда в долину ведет секретный проход.
};


instance DIA_Xardas_ABOUTLESTER(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 5;
	condition = DIA_Xardas_ABOUTLESTER_Condition;
	information = DIA_Xardas_ABOUTLESTER_Info;
	permanent = FALSE;
	description = "Ты уже поговорил с Лестером?";
};


func int DIA_Xardas_ABOUTLESTER_Condition()
{
	if((LesterGoXar == TRUE) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_ABOUTLESTER_Info()
{
	B_GivePlayerXP(XP_Ambient);
	AI_Output(other,self,"DIA_Xardas_ABOUTLESTER_15_00");	//Ты уже поговорил с Лестером?
	AI_Output(self,other,"DIA_Xardas_ABOUTLESTER_14_01");	//Да, я просто засыпал его вопросами. Он многое смог рассказать мне, но он полностью вымотан.
	AI_Output(self,other,"DIA_Xardas_ABOUTLESTER_14_02");	//Это почти чудо, что ему удалось выжить. Я отправил его в постель.
	AI_Output(other,self,"DIA_Xardas_ABOUTLESTER_15_03");	//Что он рассказал тебе?
	AI_Output(self,other,"DIA_Xardas_ABOUTLESTER_14_04");	//Боюсь, что ничего хорошего. Он видел не только дракона, но еще и людей в черных плащах с капюшонами.
	AI_Output(other,self,"DIA_Xardas_ABOUTLESTER_15_05");	//И?
	AI_Output(self,other,"DIA_Xardas_ABOUTLESTER_14_06");	//Если эти люди существуют, то их присутствие несет определенную угрозу.
	AI_Output(self,other,"DIA_Xardas_ABOUTLESTER_14_07");	//И мне это не нравится. Вот, возьми мое кольцо. Оно защитит тебя от магии.
	B_GiveInvItems(self,other,ItRi_Prot_Mage_01,1);
};


instance DIA_Xardas_FirstPal(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 10;
	condition = DIA_Xardas_FirstPal_Condition;
	information = DIA_Xardas_FirstPal_Info;
	permanent = FALSE;
	description = "Я был в городе...";
};


func int DIA_Xardas_FirstPal_Condition()
{
	if((Lothar.aivar[AIV_TalkedToPlayer] == TRUE) && (LordHagen.aivar[AIV_TalkedToPlayer] == FALSE) && (other.guild == GIL_NONE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_FirstPal_Info()
{
	B_GivePlayerXP(XP_Ambient);
	AI_Output(other,self,"DIA_Xardas_FirstPal_15_00");	//Я был в городе...
	AI_Output(self,other,"DIA_Xardas_FirstPal_14_01");	//И? Ты смог поговорить с предводителем паладинов?
	AI_Output(other,self,"DIA_Xardas_FirstPal_15_02");	//Меня к нему не пропустят...
	AI_Output(self,other,"DIA_Xardas_FirstPal_14_03");	//Чушь! Должен быть способ увидеться с ним.
	AI_Output(self,other,"DIA_Xardas_FirstPal_14_04");	//Если все остальное не получится, вступи в монастырь и стань магом.
	AI_Output(self,other,"DIA_Xardas_FirstPal_14_05");	//Это, возможно, сомнительная затея с точки зрения морали, но это даст тебе то, что тебе нужно.
	AI_Output(self,other,"DIA_Xardas_FirstPal_14_06");	//Если ты будешь магом, ему придется встретиться с тобой.
};


instance DIA_Xardas_Weiter(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = DIA_Xardas_Weiter_Condition;
	information = DIA_Xardas_Weiter_Info;
	permanent = FALSE;
	description = "И что нам делать дальше?";
};


func int DIA_Xardas_Weiter_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT) && (Kapitel < 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Weiter_Info()
{
	AI_Output(other,self,"DIA_Xardas_Weiter_15_00");	//И что нам делать дальше?
	AI_Output(self,other,"DIA_Xardas_Weiter_14_01");	//Мы должны действовать согласно нашему плану. Другого пути нет.
	AI_Output(self,other,"DIA_Xardas_Weiter_14_02");	//Ты должен добыть Глаз Инноса, а я буду продолжать искать ответы.
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_KdfSecret(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 9;
	condition = DIA_Xardas_KdfSecret_Condition;
	information = DIA_Xardas_KdfSecret_Info;
	permanent = FALSE;
	description = "Почему Круг Огня не должен знать о тебе?";
};


func int DIA_Xardas_KdfSecret_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_FirstEXIT))
	{
		return TRUE;
	};
};

func void DIA_Xardas_KdfSecret_Info()
{
	AI_Output(other,self,"DIA_Xardas_KdfSecret_15_00");	//Почему Круг Огня не должен знать о тебе?
	AI_Output(self,other,"DIA_Xardas_KdfSecret_14_01");	//Когда-то я был высшим членом Круга. Даже тогда я подозревал, что демоническая магия может быть ключом к этому магическому барьеру.
	AI_Output(self,other,"DIA_Xardas_KdfSecret_14_02");	//Но мне было ни за что не убедить остальных членов Круга последовать этому пути.
	AI_Output(self,other,"DIA_Xardas_KdfSecret_14_03");	//Поэтому я покинул Круг, чтобы изучать черную магию.
	AI_Output(self,other,"DIA_Xardas_KdfSecret_14_04");	//Это преступление, которому в глазах Магов Огня, (язвительно) 'Посвященных Инноса', всегда таких 'Добрых' и 'Добродетельных', никогда не будет оправдания.
	AI_Output(self,other,"DIA_Xardas_KdfSecret_14_05");	//Они уверены, что я все еще жив, но они понятия не имеют, где искать меня - и это хорошо.
};


instance DIA_Xardas_KAP3_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP3_EXIT_Condition;
	information = DIA_Xardas_KAP3_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};


func int DIA_Xardas_KAP3_EXIT_Condition()
{
	if(Kapitel == 3)
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP3_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_BACKFROMOW(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 31;
	condition = DIA_Xardas_BACKFROMOW_Condition;
	information = DIA_Xardas_BACKFROMOW_Info;
	description = "Я вернулся из Долины Рудников.";
};


func int DIA_Xardas_BACKFROMOW_Condition()
{
	if(Kapitel == 3)
	{
		return TRUE;
	};
};

func void DIA_Xardas_BACKFROMOW_Info()
{
	AI_Output(other,self,"DIA_Xardas_BACKFROMOW_15_00");	//Я вернулся из Долины Рудников.
	AI_Output(self,other,"DIA_Xardas_BACKFROMOW_14_01");	//Давно бы пора. И что ты там видел?
	AI_Output(other,self,"DIA_Xardas_BACKFROMOW_15_02");	//Ты был прав. Там все кишит врагами, даже яблоку упасть негде.
	AI_Output(other,self,"DIA_Xardas_BACKFROMOW_15_03");	//Орки осаждают замок, а драконы опустошают все вокруг.
	AI_Output(other,self,"DIA_Xardas_BACKFROMOW_15_04");	//Осталось недолго, прежде чем они нападут на Хоринис, если я не ошибаюсь.
	B_GivePlayerXP(XP_Ambient);
};


instance DIA_Xardas_DMTSINDDA(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 32;
	condition = DIA_Xardas_DMTSINDDA_Condition;
	information = DIA_Xardas_DMTSINDDA_Info;
	description = "Что, черт возьми, произошло здесь?";
};


func int DIA_Xardas_DMTSINDDA_Condition()
{
	if((Kapitel == 3) && Npc_KnowsInfo(other,DIA_Xardas_BACKFROMOW))
	{
		return TRUE;
	};
};

func void DIA_Xardas_DMTSINDDA_Info()
{
	if(Npc_KnowsInfo(other,DIA_Lester_BACKINTOWN))
	{
		AI_Output(other,self,"DIA_Xardas_DMTSINDDA_15_00");	//Лестер сказал, что ты хотел видеть меня как можно быстрее.
	};

	AI_Output(other,self,"DIA_Xardas_DMTSINDDA_15_01");	//Что, черт возьми, произошло здесь?
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_14_02");	//Враг узнал, кем ты являешься на самом деле, и планирует завладеть Глазом Инноса.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_14_03");	//Он распознал эту угрозу. Это заставило его выйти из тени и решиться на открытую атаку.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_14_04");	//Игра в прятки окончена. Вчера еще никто не знал, какова будет атака врага. Но теперь это становится слишком очевидно.
	XarMeetPsi = TRUE;
	B_LogEntry(TOPIC_INNOSEYE,"Врагу теперь известно, что я ищу Глаз Инноса. Мне нужно побыстрее найти его, пока еще не слишком поздно.");
	Info_ClearChoices(DIA_Xardas_DMTSINDDA);
	Info_AddChoice(DIA_Xardas_DMTSINDDA,"Меня атаковали маги в черных мантиях.",DIA_Xardas_DMTSINDDA_DMT);
	Info_AddChoice(DIA_Xardas_DMTSINDDA,"Я добыл доказательство, которое требовал от меня лорд Хаген.",DIA_Xardas_DMTSINDDA_Beweis);
};

func void DIA_Xardas_DMTSINDDA_DMT()
{
	AI_Output(other,self,"DIA_Xardas_DMTSINDDA_DMT_15_00");	//Меня атаковали маги в черных мантиях.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_14_01");	//У врага много обличий. Темные странники - одно из них! Они те, кто подготавливает плацдарм для врага.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_14_02");	//Они заняли позиции в стратегических местах, и теперь только ждут возможности захлопнуть ловушку.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_14_03");	//Держись от них подальше! Они сильные маги, и они попытаются во что бы то ни стало остановить тебя.

	if(hero.guild == GIL_KDF)
	{
		Log_CreateTopic(TOPIC_DEMENTOREN,LOG_MISSION);
		Log_SetTopicStatus(TOPIC_DEMENTOREN,LOG_Running);
		B_LogEntry(TOPIC_DEMENTOREN,"Ксардас догадывается, кто такие эти люди в черных робах. Их называют темными странниками и они очень опасны.");
	};
};

func void DIA_Xardas_DMTSINDDA_Beweis()
{
	AI_Output(other,self,"DIA_Xardas_DMTSINDDA_Beweis_15_00");	//Я, наконец, добыл доказательство, которое требовал от меня лорд Хаген.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_Beweis_14_01");	//Что еще за доказательство?
	AI_Output(other,self,"DIA_Xardas_DMTSINDDA_Beweis_15_02");	//Я получил письмо от Гаронда, предводителя паладинов в Долине Рудников. В нем он просит о подкреплении.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_Beweis_14_03");	//Этого должно быть достаточно, чтобы убедить воинственного ветерана. Отлично.
	Info_AddChoice(DIA_Xardas_DMTSINDDA,"И каков будет наш следующий шаг?",DIA_Xardas_DMTSINDDA_DMT_WhatToDo);
	B_GivePlayerXP(XP_Ambient);
};

func void DIA_Xardas_DMTSINDDA_DMT_WhatToDo()
{
	AI_Output(other,self,"DIA_Xardas_DMTSINDDA_DMT_WhatToDo_15_00");	//И каков будет наш следующий шаг?
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_01");	//Иди и отнеси Лорду Хагену письмо от Гаронда, и добейся от него, чтобы он позволил тебя взять Глаз Инноса.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_02");	//Затем иди в монастырь, и поговори с Пирокаром. Он должен дать тебе Глаз.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_03");	//Сейчас нет ничего более важного, чем обеспечить безопасность этого артефакта.
	AI_Output(self,other,"DIA_Xardas_DMTSINDDA_DMT_WhatToDo_14_04");	//Иди, пока еще не слишком поздно. Враг также попытается наложить на него свои лапы.
	B_LogEntry(TOPIC_INNOSEYE,"Глаз находится в монастыре магов огня. Я надеюсь, что лорд Хаген предоставит мне доступ к нему, когда я принесу ему письмо от лорда Гаронда. Верховный маг Пирокар не позволит мне надеть этот амулет без одобрения Хагена.");
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(PC_Psionic,"XardasTow");
};


instance DIA_Xardas_INNOSEYEBROKEN(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 33;
	condition = DIA_Xardas_INNOSEYEBROKEN_Condition;
	information = DIA_Xardas_INNOSEYEBROKEN_Info;
	description = "Глаз Инноса был уничтожен.";
};


func int DIA_Xardas_INNOSEYEBROKEN_Condition()
{
	if((Kapitel == 3) && Npc_KnowsInfo(other,DIA_Xardas_DMTSINDDA) && (Npc_HasItems(hero,ItMi_InnosEye_Broken_Mis) >= 1))
	{
		return TRUE;
	};
};

func void DIA_Xardas_INNOSEYEBROKEN_Info()
{
	AI_Output(other,self,"DIA_Xardas_INNOSEYEBROKEN_15_00");	//Глаз Инноса был уничтожен.
	AI_Output(self,other,"DIA_Xardas_INNOSEYEBROKEN_14_01");	//Что ты говоришь? Уничтожен!
	AI_Output(other,self,"DIA_Xardas_INNOSEYEBROKEN_15_02");	//Я нашел его в северных лесах - к сожалению, мне удалось найти только фрагменты.
	AI_Output(self,other,"DIA_Xardas_INNOSEYEBROKEN_14_03");	//Это был наш единственный шанс противостоять этим драконам. И мы провалили его!
	MIS_SCKnowsInnosEyeIsBroken = TRUE;
	B_GivePlayerXP(XP_Ambient);
	Info_ClearChoices(DIA_Xardas_INNOSEYEBROKEN);
	Info_AddChoice(DIA_Xardas_INNOSEYEBROKEN,"Что теперь?",DIA_Xardas_INNOSEYEBROKEN_wasnun);
};

func void DIA_Xardas_INNOSEYEBROKEN_wasnun()
{
	AI_Output(other,self,"DIA_Xardas_INNOSEYEBROKEN_wasnun_15_00");	//И что теперь?
	AI_Output(self,other,"DIA_Xardas_INNOSEYEBROKEN_wasnun_14_01");	//Это болезненный удар. Мы должны перестроиться. Я должен уединиться, и все взвесить.
	AI_Output(self,other,"DIA_Xardas_INNOSEYEBROKEN_wasnun_14_02");	//А тем временем, ты отправляйся в город и поговори с Ватрасом, Магом Воды. Возможно, он знает, что нужно делать.
	B_LogEntry(TOPIC_INNOSEYE,"Ксардас остался не очень доволен уничтожением Глаза Инноса. Маг воды Ватрас в городе Хоринис, возможно, наша единственная надежда.");
	MIS_Xardas_GoToVatrasInnoseye = LOG_Running;
};


instance DIA_Xardas_RITUALREQUEST(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 34;
	condition = DIA_Xardas_RITUALREQUEST_Condition;
	information = DIA_Xardas_RITUALREQUEST_Info;
	description = "Ватрас отправил меня к тебе.";
};


func int DIA_Xardas_RITUALREQUEST_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_Running) && Npc_KnowsInfo(other,DIA_Xardas_INNOSEYEBROKEN) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RITUALREQUEST_Info()
{
	AI_Output(other,self,"DIA_Xardas_RITUALREQUEST_15_00");	//Ватрас послал меня к тебе.
	AI_Output(self,other,"DIA_Xardas_RITUALREQUEST_14_01");	//Это хорошо. Что он сказал тебе?
	AI_Output(other,self,"DIA_Xardas_RITUALREQUEST_15_02");	//Он что-то говорил об обратимом ритуале в огненном кругу.
	AI_Output(self,other,"DIA_Xardas_RITUALREQUEST_14_03");	//Старый пройдоха...(смеется) Я уже знаю, что он хочет сделать. Ты пришел, чтобы пригласить меня к нему.
	AI_Output(other,self,"DIA_Xardas_RITUALREQUEST_15_04");	//Так и есть. Когда ты отправишься в путь?
	if((hero.guild == GIL_KDF) || (hero.guild == GIL_DJG) || (hero.guild == GIL_PAL) || (hero.guild == GIL_GUR) || (hero.guild == GIL_TPL) || (hero.guild == GIL_KDW) || (hero.guild == GIL_KDM))
	{
		AI_Output(self,other,"DIA_Xardas_RITUALREQUEST_14_05");	//Не стоит заставлять Ватраса ждать. Я отправляюсь немедленно. А ты должен выполнить свою задачу, а затем присоединиться ко мне опять.
		AI_StopProcessInfos(self);
		B_LogEntry(TOPIC_INNOSEYE,"Ксардас согласился участвовать в ритуале в Круге Солнца.");
		B_GivePlayerXP(XP_Ambient);
		Npc_ExchangeRoutine(self,"RitualInnosEyeRepair");
		Xardas_GoesToRitualInnosEye = TRUE;
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_RITUALREQUEST_14_06");	//Я должен быть уверен, что ты готов дать отпор драконам.
		AI_Output(self,other,"DIA_Xardas_RITUALREQUEST_14_07");	//А ты не производишь пока такого впечатления!
		B_LogEntry(TOPIC_INNOSEYE,"Ксардас не появится на ритуале у Круга Солнца, пока не будет уверен в том, что я смогу справиться с драконами.");
	};
	B_GivePlayerXP(XP_Ambient);
};


instance DIA_Xardas_WARUMNICHTJETZT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 34;
	condition = DIA_Xardas_WARUMNICHTJETZT_Condition;
	information = DIA_Xardas_WARUMNICHTJETZT_Info;
	description = "Почему бы тебе не отправиться на встречу с Ватрасом ПРЯМО СЕЙЧАС?";
};


func int DIA_Xardas_WARUMNICHTJETZT_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Xardas_RITUALREQUEST) && (Xardas_GoesToRitualInnosEye == FALSE) && ((hero.guild == GIL_MIL) || (hero.guild == GIL_SLD) || (hero.guild == GIL_SEK) || (hero.guild == GIL_NDW) || (hero.guild == GIL_NDM)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_WARUMNICHTJETZT_Info()
{
	AI_Output(other,self,"DIA_Xardas_WARUMNICHTJETZT_15_00");	//Почему бы тебе не отправиться на встречу с Ватрасом ПРЯМО СЕЙЧАС?
	AI_Output(other,self,"DIA_Xardas_WARUMNICHTJETZT_15_01");	//Иногда я просто не понимаю тебя.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_14_02");	//(раздраженно) Не смей говорить со мной в таком тоне. Если бы не я, твое ни на что не годное тело до сих пор бы гнило в этом храме.
	Info_AddChoice(DIA_Xardas_WARUMNICHTJETZT,"Не волнуйся! Просто скажи, что мне нужно сделать.",DIA_Xardas_WARUMNICHTJETZT_wastun);
	Info_AddChoice(DIA_Xardas_WARUMNICHTJETZT,"Тогда, по крайней мере объясни мне, почему ты колеблешься.",DIA_Xardas_WARUMNICHTJETZT_grund);
};

func void DIA_Xardas_WARUMNICHTJETZT_grund()
{
	AI_Output(other,self,"DIA_Xardas_WARUMNICHTJETZT_grund_15_00");	//Тогда, по крайней мере объясни мне, почему ты колеблешься.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_grund_14_01");	//С тех пор, как я отошел от магов Огня, я старался держаться от них подальше.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_grund_14_02");	//И я не собираюсь изменять этой привычке, если только у меня совсем уж не будет выбора.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_grund_14_03");	//Но прежде чем я предстану перед укоризненным взором этих магов, я сначала хочу убедиться, что у тебя есть хоть какие-то шансы противостоять драконам.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_grund_14_04");	//С твоим жалким снаряжением, впрочем, тебе далеко не продвинуться. Возвращайся, когда станешь достаточно силен.
	AI_StopProcessInfos(self);
};

func void DIA_Xardas_WARUMNICHTJETZT_wastun()
{
	AI_Output(other,self,"DIA_Xardas_WARUMNICHTJETZT_wastun_15_00");	//Не волнуйся! Просто скажи, что мне нужно сделать.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_wastun_14_01");	//Ты все еще слишком слаб, чтобы сражаться с драконами. С этим снаряжением у тебя нет никаких шансов.
	AI_Output(self,other,"DIA_Xardas_WARUMNICHTJETZT_wastun_14_02");	//Не возвращайся ко мне, пока не будешь полностью готов. Вот тогда я пойду, и присоединюсь к Ватрасу.
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_BEREIT(C_Info)
{
	npc = NONE_100_Xardas;
	condition = DIA_Xardas_BEREIT_Condition;
	information = DIA_Xardas_BEREIT_Info;
	description = "Я готов к сражению с драконами.";
};

func int DIA_Xardas_BEREIT_Condition()
{
	if((Xardas_GoesToRitualInnosEye == FALSE) && Npc_KnowsInfo(other,DIA_Xardas_RITUALREQUEST) && ((hero.guild == GIL_DJG) || (hero.guild == GIL_PAL) || (hero.guild == GIL_TPL) || (hero.guild == GIL_GUR) || (hero.guild == GIL_KDW) || (hero.guild == GIL_KDM) || (hero.guild == GIL_KDF)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_BEREIT_Info()
{
	AI_Output(other,self,"DIA_Xardas_BEREIT_15_00");	//Я готов к сражению с драконами.
	AI_Output(self,other,"DIA_Xardas_BEREIT_14_01");	//Тогда не будем терять времени. Я немедленно отправляюсь к Кругу Солнца. А ты выполни свои задачи. Я встречу тебя там.
	AI_StopProcessInfos(self);
	B_LogEntry(TOPIC_INNOSEYE,"Ксардас согласился участвовать в ритуале в Круге Солнца.");
	B_GivePlayerXP(XP_Ambient);
	Npc_ExchangeRoutine(self,"RitualInnosEyeRepair");
	Xardas_GoesToRitualInnosEye = TRUE;
};


instance DIA_Xardas_BINGESPANNT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 35;
	condition = DIA_Xardas_BINGESPANNT_Condition;
	information = DIA_Xardas_BINGESPANNT_Info;
	permanent = TRUE;
	description = "Этот ритуал обращения сработает?";
};


func int DIA_Xardas_BINGESPANNT_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_Running) && (Kapitel == 3) && (Xardas_GoesToRitualInnosEye == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_BINGESPANNT_Info()
{
	AI_Output(other,self,"DIA_Xardas_BINGESPANNT_15_00");	//Этот ритуал обращения сработает?
	AI_Output(self,other,"DIA_Xardas_BINGESPANNT_14_01");	//Я не совсем уверен. Это зависит от того, что именно собирается сделать Ватрас.
};


instance DIA_Xardas_PYROWILLNICHT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 37;
	condition = DIA_Xardas_PYROWILLNICHT_Condition;
	information = DIA_Xardas_PYROWILLNICHT_Info;
	description = "Пирокар отказывается принять участие в ритуале.";
};


func int DIA_Xardas_PYROWILLNICHT_Condition()
{
	if((Pyrokar_DeniesInnosEyeRitual == TRUE) && Npc_KnowsInfo(other,DIA_Xardas_RITUALREQUEST) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_PYROWILLNICHT_Info()
{
	AI_Output(other,self,"DIA_Xardas_PYROWILLNICHT_15_00");	//Пирокар отказывается принять участие в ритуале.
	AI_Output(other,self,"DIA_Xardas_PYROWILLNICHT_15_01");	//Сначала он хочет получить доказательства того, что он может доверять тебе.
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_02");	//Ах, неужели! Пирокар. Как интересно.
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_03");	//Этот старый чудак становится совершенно невыносимым. Но я думаю, у меня есть кое-что, что поможет тебе.
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_04");	//Когда я покидал орден Магов Огня, я взял с собой из монастыря несколько вещей.
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_06");	//Я не хотел, чтобы паладины или Маги Огня перевернули все в моей башне вверх дном, и нашли эти вещи.
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_07");	//Поэтому я спрятал их в надежном месте, где магам никогда не придет в голову искать их.
	AI_Output(other,self,"DIA_Xardas_PYROWILLNICHT_15_08");	//И где же?
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_09");	//Некоторые из них лежат в запертом сундуке на ферме Секоба.
	Sekob_RoomFree = TRUE;
	AI_Output(other,self,"DIA_Xardas_PYROWILLNICHT_15_10");	//Ты доверяешь этому Секобу?
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_11");	//Нет. Но его можно купить и он не будет задавать глупых вопросов. К тому же, этот сундук заперт. Вот ключ.
	CreateInvItems(self,ItKe_CHEST_SEKOB_XARDASBOOK_MIS,1);
	B_GiveInvItems(self,other,ItKe_CHEST_SEKOB_XARDASBOOK_MIS,1);
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_12");	//Там, среди прочего, есть очень старая книга. Когда Пирокар увидит эту книгу, он поймет, что она от меня.
	AI_Output(self,other,"DIA_Xardas_PYROWILLNICHT_14_13");	//Она больше не нужна мне. Поэтому, пусть она послужит хоть такой цели.
	B_LogEntry(TOPIC_INNOSEYE,"Ксардас дал мне ключ от сундука на ферме Секоба. Я должен отнести книгу, находящуюся в нем, Пирокару.");
};


instance DIA_Xardas_RitualInnosEyeRepairImportant(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 36;
	condition = DIA_Xardas_RitualInnosEyeRepairImportant_Condition;
	information = DIA_Xardas_RitualInnosEyeRepairImportant_Info;
	important = TRUE;
};


func int DIA_Xardas_RitualInnosEyeRepairImportant_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_SUCCESS) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RitualInnosEyeRepairImportant_Info()
{
	AI_Output(self,other,"DIA_Xardas_Add_14_06");	//Теперь, когда Глаз Инноса восстановлен, ты должен предстать перед драконами!
	AI_Output(self,other,"DIA_Xardas_Add_14_07");	//Все они служат Белиару, богу тьмы.
	AI_Output(self,other,"DIA_Xardas_Add_14_08");	//Но должна быть также земная сила, которая контролирует их. Теперь это стало очевидным для меня.
	AI_Output(self,other,"DIA_Xardas_Add_14_09");	//Найди источник этой силы.
	AI_Output(self,other,"DIA_Xardas_Add_14_10");	//А как только ты выяснишь это, сразу же возвращайся ко мне!
	Info_ClearChoices(DIA_Xardas_RitualInnosEyeRepairImportant);
	Info_AddChoice(DIA_Xardas_RitualInnosEyeRepairImportant,Dialog_Ende,DIA_Xardas_RitualInnosEyeRepairImportant_weiter);
};

func void DIA_Xardas_RitualInnosEyeRepairImportant_weiter()
{
	AI_StopProcessInfos(self);
	B_StartOtherRoutine(Xardas,"Start");
	B_StartOtherRoutine(Vatras,"Start");
};


instance DIA_Xardas_WASNUN(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 36;
	condition = DIA_Xardas_WASNUN_Condition;
	information = DIA_Xardas_WASNUN_Info;
	permanent = TRUE;
	description = "Глаз Инноса восстановлен. Что дальше?";
};


func int DIA_Xardas_WASNUN_Condition()
{
	if((MIS_RitualInnosEyeRepair == LOG_SUCCESS) && (Kapitel == 3))
	{
		return TRUE;
	};
};

func void DIA_Xardas_WASNUN_Info()
{
	AI_Output(other,self,"DIA_Xardas_WASNUN_15_00");	//Глаз Инноса восстановлен. Что дальше?
	AI_Output(self,other,"DIA_Xardas_WASNUN_14_01");	//Не забудь надеть его, когда ты, наконец, предстанешь перед драконами.
	AI_Output(self,other,"DIA_Xardas_WASNUN_14_04");	//И помни, что тебе, возможно, понадобится Уризель в битве с этими порождениями тьмы.
	AI_Output(self,other,"DIA_Xardas_WASNUN_14_05");	//Мощь этого меча - несомненно серьезное подспорье в деле, которое тебе предстоит.
	AI_Output(self,other,"DIA_Xardas_WASNUN_14_06");	//Это все, что я хотел тебе сказать.

	if(MIS_ReadyforChapter4 == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_WASNUN_14_02");	//Не теряй времени. Отправляйся в Долину Рудников и убей этих драконов.
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_WASNUN_14_03");	//Иди к Пирокару, и пусть он объяснит тебе, как пользоваться Глазом.
	};
};

instance DIA_Xardas_KAP4_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP4_EXIT_Condition;
	information = DIA_Xardas_KAP4_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_KAP4_EXIT_Condition()
{
	if(Kapitel == 4)
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP4_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_PERM4(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 40;
	condition = DIA_Xardas_PERM4_Condition;
	information = DIA_Xardas_PERM4_Info;
	permanent = TRUE;
	description = "Что нового?";
};

func int DIA_Xardas_PERM4_Condition()
{
	if(Kapitel == 4)
	{
		return TRUE;
	};
};

func void DIA_Xardas_PERM4_Info()
{
	AI_Output(other,self,"DIA_Xardas_PERM4_15_00");	//Что нового?
	AI_Output(self,other,"DIA_Xardas_PERM4_14_01");	//Темные странники еще не ушли! Они не остановятся, пока не прикончат тебя.
	AI_Output(self,other,"DIA_Xardas_PERM4_14_02");	//Убей драконов в Долине Рудников и выясни, кто стоит за этими нападениями. В противном случае их сила только вырастет еще больше.
};

instance DIA_Xardas_KAP5_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP5_EXIT_Condition;
	information = DIA_Xardas_KAP5_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_KAP5_EXIT_Condition()
{
	if(Kapitel == 5)
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP5_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_KAP6_EXIT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 999;
	condition = DIA_Xardas_KAP6_EXIT_Condition;
	information = DIA_Xardas_KAP6_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_KAP6_EXIT_Condition()
{
	if(Kapitel == 6)
	{
		return TRUE;
	};
};

func void DIA_Xardas_KAP6_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_PRETEACH(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_preteach_condition;
	information = dia_xardas_preteach_info;
	description = "Теперь могу ли я обучиться магии некромантов?";
};

func int dia_xardas_preteach_condition()
{
	if(hero.guild == GIL_KDM)
	{
		return TRUE;
	};
};

func void dia_xardas_preteach_info()
{
	AI_Output(other,self,"DIA_Xardas_PreTeach_15_00");	//Теперь могу ли я обучиться магии некромантов?
	AI_Output(self,other,"DIA_Xardas_PreTeach_05_01");	//Научить тебя созданию рун темной магии - это не проблема. Но это потребует от тебя знаний магических кругов.
	AI_Output(self,other,"DIA_Xardas_PreTeach_05_02");	//Я могу обучить тебя этому, если у тебя есть достаточно опыта.
	AI_Output(self,other,"DIA_Xardas_PreTeach_05_03");	//Воистину, магия тьмы - одна из самых сильных и разрушительных магий из всех, что существуют в этом мире.
	AI_Output(self,other,"DIA_Xardas_PreTeach_05_04");	//Помни об этом, и постарайся использовать эти знания мудро!
	XARDAS_TEACHRUNES = TRUE;
	XARDAS_TEACHCIRCLE = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry(TOPIC_ADDON_DMTTEACHER,"Ксардас научит меня создавать руны некромантов и поможет освоить магические круги.");
};


instance DIA_XARDAS_SACTANOME(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_sactanome_condition;
	information = dia_xardas_sactanome_info;
	permanent = FALSE;
	description = "Чему еще ты сможешь меня научить?";
};


func int dia_xardas_sactanome_condition()
{
	if((hero.guild == GIL_KDM) && Npc_KnowsInfo(other,dia_xardas_preteach))
	{
		return TRUE;
	};
};

func void dia_xardas_sactanome_info()
{
	AI_Output(other,self,"DIA_Xardas_SactaNome_01_00");	//Чему еще ты сможешь меня научить?
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_01");	//Есть много тайн, которые ты не познал.
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_02");	//Но ты должен понимать, что некоторые тайные знания темной магии таят в себе большую опасность.
	AI_Output(other,self,"DIA_Xardas_SactaNome_01_04");	//Что это за тайные знания?
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_05");	//Одной из таких тайн является искусство Сакта Номен!
	AI_Output(other,self,"DIA_Xardas_SactaNome_01_06");	//Сакта Номен?
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_07");	//На языке демонов это означает 'Жертва крови', что само по себе уже отражает всю суть этого искусства.
	AI_Output(other,self,"DIA_Xardas_SactaNome_01_08");	//А можно поподробнее?
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_09");	//Сакта Номен позволит тебе использовать магические руны и свитки темной магии даже при отсутствии у тебя достаточного количества маны.
	AI_Output(other,self,"DIA_Xardas_SactaNome_01_10");	//Но каким образом?
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_11");	//За счет твоей жизненной энергии! Каждое сотворенное заклинание будет отнимать у тебя силы до тех пор, пока твои запасы магической энергии не восстановятся в достаточной мере.
	AI_Output(self,other,"DIA_Xardas_SactaNome_01_13");	//Поэтому использовать эту способность стоит только тогда, когда этого действительно требуют обстоятельства. Иначе она запросто может убить тебя!
	AI_Output(other,self,"DIA_Xardas_SactaNome_01_16");	//Хорошо, я все понял.
	XARDAS_TEACHSACTANOME = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry(TOPIC_ADDON_DMTTEACHER,"Ксардас обучит меня искусству Сакта Номен, что на языке демонов означает 'Жертва крови'. С помощью этой способности я смогу использовать темные руны и свитки за счет своей жизненной силы, в том случае если моей магической энергии недостаточно для осуществления заклинания.");
};


instance DIA_XARDAS_TEACHSACTANOME(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 998;
	condition = dia_xardas_teachsactanome_condition;
	information = dia_xardas_teachsactanome_info;
	permanent = TRUE;
	description = "Обучи меня искусству Сакта Номен! (Очков опыта: 50LP, Стоимость: 50000 золотых)";
};


func int dia_xardas_teachsactanome_condition()
{
	if((hero.guild == GIL_KDM) && (XARDAS_TEACHSACTANOME == TRUE) && (XARDAS_KNOWSSACTANOME == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_teachsactanome_info()
{
	AI_Output(other,self,"DIA_Xardas_TeachSactaNome_01_00");	//Обучи меня искусству Сакта Номен!
	AI_Output(self,other,"DIA_Xardas_TeachSactaNome_01_01");	//Ты действительно в этом уверен?
	Info_ClearChoices(dia_xardas_teachsactanome);
	Info_AddChoice(dia_xardas_teachsactanome,"Пока нет.",dia_xardas_teachsactanome_no);
	Info_AddChoice(dia_xardas_teachsactanome,"Да, уверен.",dia_xardas_teachsactanome_yes);
};

func void dia_xardas_teachsactanome_no()
{
	AI_Output(other,self,"DIA_Xardas_TeachSactaNome_No_01_00");	//Пока нет.
	AI_Output(self,other,"DIA_Xardas_TeachSactaNome_No_01_01");	//Хорошо, как скажешь.
	Info_ClearChoices(dia_xardas_teachsactanome);
};

func void dia_xardas_teachsactanome_yes()
{
	if((Npc_HasItems(other,ItMi_Gold) >= 50000) && (other.lp >= 50))
	{
		AI_Print(PRINT_SACTANOME);
		Snd_Play("MFX_FEAR_CAST");
		Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
		Wld_PlayEffect("FX_EarthQuake",self,self,0,0,0,FALSE);
		Wld_PlayEffect("SFX_Circle",self,self,0,0,0,FALSE);
		AI_Output(self,other,"DIA_Xardas_TeachSactaNome_Yes_01_01");	//Тогда познай же истинную силу темной магии, и пусть твоя жертва не будет напрасной...
		AI_PlayAni(self,"T_PRACTICEMAGIC5");
		AI_Output(self,other,"DIA_Xardas_TeachSactaNome_Yes_01_02");	//САКТА ШАДАР НОМЕН ТАР МАДАР САТАГ!
		AI_PlayAni(self,"T_PRACTICEMAGIC5");
		AI_Output(self,other,"DIA_Xardas_TeachSactaNome_Yes_01_03");	//Используй полученные тобой знания мудро, и пусть багровая Тьма хранит твой путь!
		other.lp = other.lp - 50;
		RankPoints = RankPoints + 50;
		Npc_RemoveInvItems(other,ItMi_Gold,50000);
		XARDAS_KNOWSSACTANOME = TRUE;
		Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
		B_LogEntry(TOPIC_ADDON_DMTTEACHER,"Я обучился искусству Сакта Номен.");
		Info_ClearChoices(dia_xardas_teachsactanome);
		Info_ClearChoices(dia_xardas_teachsactanome);
	}
	else if(other.lp < 50)
	{
		AI_Output(self,other,"DIA_Xardas_TeachSactaNome_01_05");	//Ты еще не готов к тому, чтобы овладеть этими знаниями!
		Info_ClearChoices(dia_xardas_teachsactanome);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_TeachSactaNome_01_08");	//У тебя не хватает золота!
		Info_ClearChoices(dia_xardas_teachsactanome);
	};
};


instance DIA_XARDAS_EXPLAINCIRCLES(C_Info)
{
	npc = NONE_100_Xardas;
	condition = dia_xardas_explaincircles_condition;
	information = dia_xardas_explaincircles_info;
	permanent = FALSE;
	description = "Объясни мне, в чем смысл магических Кругов?";
};


func int dia_xardas_explaincircles_condition()
{
	if((hero.guild == GIL_KDM) && Npc_KnowsInfo(other,dia_xardas_preteach))
	{
		return TRUE;
	};
};

func void dia_xardas_explaincircles_info()
{
	AI_Output(other,self,"DIA_Xardas_EXPLAINCIRCLES_Info_15_01");	//Объясни мне, в чем смысл магических Кругов?
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_02");	//Круги символизируют твое понимание магии.
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_03");	//Они обозначают уровень твоих знаний и способность обучаться новым заклинаниям.
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_04");	//Прежде чем сможешь вступить в следующий Круг, ты должен полностью овладеть предшествующим.
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_05");	//Потребуются долгие часы обучения и намного больше опыта, чтобы достичь высших Кругов.
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_06");	//Но каждый раз твои старания будут вознаграждаться новыми могущественными заклинаниями Тьмы.
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_07");	//Они станут частью твоей жизни и всегда будут с тобой. Сделай их частью себя.
	AI_Output(self,other,"DIA_Xardas_EXPLAINCIRCLES_Info_14_08");	//Познай себя - и тебе откроется неизмеримая сила темной магии!
	EXPLAINCIRCLEMEAN = TRUE;
};


instance DIA_XARDAS_RUNEN(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_runen_condition;
	information = dia_xardas_runen_info;
	permanent = TRUE;
	description = "Научи меня создавать руны.";
};


func int dia_xardas_runen_condition()
{
	if(XARDAS_TEACHRUNES == TRUE)
	{
		return TRUE;
	};
};

func void dia_xardas_runen_info()
{
	AI_Output(other,self,"DIA_Parlan_TEACH_15_00");	//Обучи меня!
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);
	if((Npc_GetTalentSkill(other,NPC_TALENT_DEMONOLOG) == 1) && (PLAYER_TALENT_RUNES[SPL_SummonDemon] == FALSE))
	{
		Info_AddChoice(dia_xardas_runen,"Руна демонолога",dia_xardas_runen_dem);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 6)
	{
		Info_AddChoice(dia_xardas_runen,"6 Круг магии",dia_xardas_runen_6);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 5)
	{
		Info_AddChoice(dia_xardas_runen,"5 Круг магии",dia_xardas_runen_5);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 4)
	{
		Info_AddChoice(dia_xardas_runen,"4 Круг магии",dia_xardas_runen_4);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 3)
	{
		Info_AddChoice(dia_xardas_runen,"3 Круг магии",dia_xardas_runen_3);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 2)
	{
		Info_AddChoice(dia_xardas_runen,"2 Круг магии",dia_xardas_runen_2);
	};
	if(Npc_GetTalentSkill(other,NPC_TALENT_MAGE) >= 1)
	{
		Info_AddChoice(dia_xardas_runen,"1 Круг магии",dia_xardas_runen_1);
	};
};

func void dia_xardas_runen_back()
{
	Info_ClearChoices(dia_xardas_runen);
};

func void dia_xardas_runen_dem()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);
	if((PLAYER_TALENT_RUNES[SPL_SummonDemon] == FALSE) && (XARDASTEACHCASTDEMON == TRUE))
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonDemon,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonDemon)),dia_xardas_runen_circle_4_spl_summondemon);
	};
};

func void dia_xardas_runen_1()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);

	if(PLAYER_TALENT_RUNES[SPL_Deathbolt] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Deathbolt,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Deathbolt)),dia_xardas_runen_circle_1_spl_deathbolt);
	};
	if(PLAYER_TALENT_RUNES[SPL_SummonGoblinSkeleton] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonGoblinSkeleton,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonGoblinSkeleton)),dia_xardas_runen_circle_1_spl_summongoblinskeleton);
	};
	if(PLAYER_TALENT_RUNES[SPL_Rage] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Rage,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Rage)),dia_xardas_runen_circle_1_spl_Rage);
	};
};

func void dia_xardas_runen_2()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);

	if(PLAYER_TALENT_RUNES[SPL_ManaForLife] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_ManaForLife,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_ManaForLife)),dia_xardas_runen_circle_2_spl_suckenergy);
	};
	if(PLAYER_TALENT_RUNES[SPL_SummonZombie] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonZombie,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonZombie)),dia_xardas_runen_circle_2_spl_summonzombie);
	};
	if(PLAYER_TALENT_RUNES[SPL_Lacerate] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Lacerate,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Lacerate)),dia_xardas_runen_circle_2_spl_Lacerate);
	};
};

func void dia_xardas_runen_3()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);

	if(PLAYER_TALENT_RUNES[SPL_Swarm] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Swarm,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Swarm)),dia_xardas_runen_circle_3_spl_swarm);
	};
	if(PLAYER_TALENT_RUNES[SPL_SummonSkeleton] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_SummonSkeleton,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_SummonSkeleton)),dia_xardas_runen_circle_3_spl_summonskeleton);
	};
	if(PLAYER_TALENT_RUNES[SPL_Energyball] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_BeliarsRage,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Energyball)),dia_xardas_runen_circle_3_spl_energyball);
	};
};

func void dia_xardas_runen_4()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);

	if(PLAYER_TALENT_RUNES[SPL_Deathball] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Deathball,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Deathball)),dia_xardas_runen_circle_4_spl_deathball);
	};
};

func void dia_xardas_runen_5()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);

	if(PLAYER_TALENT_RUNES[SPL_ArmyOfDarkness] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_ArmyOfDarkness,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_ArmyOfDarkness)),dia_xardas_runen_circle_5_spl_armyofdarkness);
	};
};

func void dia_xardas_runen_6()
{
	Info_ClearChoices(dia_xardas_runen);
	Info_AddChoice(dia_xardas_runen,Dialog_Back,dia_xardas_runen_back);

	if(PLAYER_TALENT_RUNES[SPL_MassDeath] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes("Волна смерти",B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_MassDeath)),dia_xardas_runen_circle_6_spl_massdeath);
	};
	if(PLAYER_TALENT_RUNES[SPL_Skull] == FALSE)
	{
		Info_AddChoice(dia_xardas_runen,b_buildlearnstringforrunes(NAME_SPL_Skull,B_GetLearnCostTalent(other,NPC_TALENT_RUNES,SPL_Skull)),dia_xardas_runen_circle_6_spl_skull);
	};
};

func void dia_xardas_runen_circle_1_spl_Rage()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Rage);
};

func void dia_xardas_runen_circle_2_spl_Lacerate()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Lacerate);
};

func void dia_xardas_runen_circle_1_spl_deathbolt()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Deathbolt);
};

func void dia_xardas_runen_circle_1_spl_summongoblinskeleton()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonGoblinSkeleton);
};

func void dia_xardas_runen_circle_2_spl_suckenergy()
{
	B_TeachPlayerTalentRunes(self,other,SPL_ManaForLife);
};

func void dia_xardas_runen_circle_2_spl_summonzombie()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonZombie);
};

func void dia_xardas_runen_circle_3_spl_swarm()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Swarm);
};

func void dia_xardas_runen_circle_3_spl_summonskeleton()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonSkeleton);
};

func void dia_xardas_runen_circle_3_spl_energyball()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Energyball);
};

func void dia_xardas_runen_circle_4_spl_summondemon()
{
	B_TeachPlayerTalentRunes(self,other,SPL_SummonDemon);
};

func void dia_xardas_runen_circle_4_spl_deathball()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Deathball);
};

func void dia_xardas_runen_circle_5_spl_armyofdarkness()
{
	B_TeachPlayerTalentRunes(self,other,SPL_ArmyOfDarkness);
};

func void dia_xardas_runen_circle_6_spl_massdeath()
{
	B_TeachPlayerTalentRunes(self,other,SPL_MassDeath);
};

func void dia_xardas_runen_circle_6_spl_skull()
{
	B_TeachPlayerTalentRunes(self,other,SPL_Skull);
};


var int dia_xardas_trade_onetime;

instance DIA_XARDAS_CANTRADE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_cantrade_condition;
	information = dia_xardas_cantrade_info;
	permanent = FALSE;
	description = "А где мне достать свитки заклинаний темной магии?";
};


func int dia_xardas_cantrade_condition()
{
	if((XARDAS_TEACHRUNES == TRUE) && (DIA_XARDAS_TRADE_ONETIME == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_cantrade_info()
{
	DIA_XARDAS_TRADE_ONETIME = TRUE;
	AI_Output(other,self,"DIA_Xardas_CanTrade_01_01");	//А где мне достать свитки заклинаний темной магии?
	AI_Output(self,other,"DIA_Xardas_CanTrade_01_02");	//Хороший вопрос... Для создания некоторых рун тебе действительно понадобятся магические свитки.
	AI_Output(self,other,"DIA_Xardas_CanTrade_01_03");	//Некоторые из них ты вряд ли сможешь отыскать у других магов или торговцев.
	AI_Output(self,other,"DIA_Xardas_CanTrade_01_04");	//Но у меня еще осталось несколько редких экземпляров.
};


instance DIA_XARDAS_TRADE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_trade_condition;
	information = dia_xardas_trade_info;
	trade = TRUE;
	permanent = TRUE;
	description = "Покажи мне свои магические свитки.";
};


func int dia_xardas_trade_condition()
{
	if((XARDAS_TEACHRUNES == TRUE) && (DIA_XARDAS_TRADE_ONETIME == TRUE))
	{
		return TRUE;
	};
	if((CHOOSEDARK == TRUE) && ((hero.guild == GIL_KDF) || (hero.guild == GIL_KDW) || (hero.guild == GIL_KDM) || (hero.guild == GIL_GUR)))
	{
		return TRUE;
	};
};

func void dia_xardas_trade_info()
{
	AI_Output(other,self,"DIA_Xardas_Trade_01_01");	//Покажи мне свои магические свитки.
	B_GiveTradeInv(self);
};


instance DIA_XARDAS_CIRCLE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 99;
	condition = dia_xardas_circle_condition;
	information = dia_xardas_circle_info;
	permanent = TRUE;
	description = "Я хочу постигать суть магии.";
};

func int dia_xardas_circle_condition()
{
	if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) <= 6) && (XARDAS_TEACHCIRCLE == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_circle_info()
{
	AI_Output(other,self,"DIA_Xardas_CIRCLE_15_00");	//Я хочу постигать суть магии.
	Info_ClearChoices(DIA_Xardas_CIRCLE);
	Info_AddChoice(DIA_Xardas_CIRCLE,Dialog_Back,DIA_Xardas_CIRCLE_Back);

	if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) < 1) && (Kapitel >= 1))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE,"1 Круг магии (Очков обучения: 20)",DIA_Xardas_CIRCLE_1);
	}
	else if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) == 1) && (Kapitel >= 2))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE,"2 Круг магии (Очков обучения: 30)",DIA_Xardas_CIRCLE_2);
	}
	else if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) == 2) && (Kapitel >= 3))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE,"3 Круг магии (Очков обучения: 40)",DIA_Xardas_CIRCLE_3);
	}
	else if((Npc_GetTalentSkill(hero,NPC_TALENT_MAGE) == 3) && (MIS_ReadyforChapter4 == TRUE))
	{
		Info_AddChoice(DIA_Xardas_CIRCLE,"4 Круг магии (Очков обучения: 60)",DIA_Xardas_CIRCLE_4);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_31");	//Еще не время! Возвращайся позже.
	};
};

func void DIA_Xardas_CIRCLE_Back()
{
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_1()
{
	if(B_TeachMagicCircle(self,other,1))
	{
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_01");	//Вступив в Первый Круг, ты научишься использовать магические руны.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_02");	//Каждая руна содержит структуру особого магического заклинания.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_03");	//Использовав свою собственную магическую силу, ты сможешь высвободить магию руны.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_04");	//Но в отличие от свитков, которые по сути являются магическими формулами, магия рун поддерживает структуру заклинания всегда.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_05");	//Каждая руна таит в себе магическую силу, которую ты можешь забрать в любой момент.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_06");	//Так же, как и со свитком, в момент, когда ты используешь руну, расходуется твоя собственная магическая сила.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_07");	//С каждым новым Кругом ты будешь узнавать о рунах все больше и больше.
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_2()
{
	if(B_TeachMagicCircle(self,other,2))
	{
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_09");	//Ты уже научился понимать руны. Пришло время углубить твои познания.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_10");	//Вступив во Второй Круг, ты постигнешь основы более мощных заклятий.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_11");	//Но для того чтобы познать истинные секреты магии, тебе предстоит многому научиться.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_12");	//Ты уже знаешь о том, что можешь использовать любую руну бессчетное число раз, но лишь до тех пор, пока не израсходуешь собственную магическую силу.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_13");	//Но прежде чем сделать что-либо, подумай о том, есть ли в этом смысл. Ты обладаешь силой, которая позволяет с легкостью сеять смерть и разрушения.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_14");	//Но истинный маг использует ее лишь по необходимости.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_15");	//Научись оценивать ситуацию, и ты познаешь истинную силу рун.
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_3()
{
	if(B_TeachMagicCircle(self,other,3))
	{
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_16");	//Третий Круг является одним из важнейших этапов в жизни каждого мага. Достигнув его, ты завершаешь свой поиск.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_17");	//Ты уже преодолел значительный этап на пути магии. Ты научился использовать руны.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_18");	//Это знание послужит основой для следующего этапа. Используй руны осмотрительно.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_19");	//Ты можешь использовать их или нет. Но ты должен определиться с выбором.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_20");	//Сделав выбор, используй свою силу без колебаний.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_21");	//Найди свой путь, и тогда ты познаешь силу решения.
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

func void DIA_Xardas_CIRCLE_4()
{
	if(B_TeachMagicCircle(self,other,4))
	{
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_22");	//Ты завершил первые три Круга. Пришло время тебе постичь секреты магии.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_23");	//Основа магии рун - камень. Магический камень, добытый из магической руды.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_24");	//Это та самая руда, которую добывают в шахтах. В храмах она наделяется магическими формулами, и там же руны превращаются в орудия нашей силы.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_25");	//Теперь ты обладаешь всеми знаниями, которые были накоплены храмами.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_27");	//Познай магию, и ты откроешь для себя секрет власти.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_28");	//И еще кое-что. Войдя в четвертый круг магии - ты удостаиваешься чести носить облачение высших темных магов.
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_29");	//Немногим удавалось такое. Теперь ты - один из избранных бога Тьмы!
		AI_Output(self,other,"DIA_Xardas_CIRCLE_14_30");	//Вот, возьми эту робу и магический посох в знак признания твоего статуса.
		CreateInvItems(other,ItMW_Addon_Stab03,1);
		CreateInvItems(self,itar_dmt_h,1);
		B_GiveInvItems(self,other,itar_dmt_h,1);
		NEKR_H_ROBA = TRUE;
	};
	Info_ClearChoices(DIA_Xardas_CIRCLE);
};

instance DIA_XARDAS_PRETEACH_MANA(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_preteach_mana_condition;
	information = dia_xardas_preteach_mana_info;
	permanent = FALSE;
	description = "Ты можешь мне помочь увеличить магическую силу?";
};

func int dia_xardas_preteach_mana_condition()
{
	if((other.guild == GIL_KDM) && Npc_KnowsInfo(other,dia_xardas_preteach))
	{
		return TRUE;
	};
};

func void dia_xardas_preteach_mana_info()
{
	AI_Output(other,self,"DIA_Xardas_PreTeach_Mana_15_00");	//Ты можешь увеличить магическую силу?
	AI_Output(self,other,"DIA_Xardas_PreTeach_Mana_05_01");	//Естественно. Но тебе следует кое-что знать об этом.
	AI_Output(self,other,"DIA_Xardas_PreTeach_Mana_05_03");	//Магическая энергия или, проще говоря, мана - основополагающий момент для любого мага или волшебника.
	AI_Output(self,other,"DIA_Xardas_PreTeach_Mana_05_04");	//Мы используем ее для сотворения магических заклинаний, пользуясь силой рун. Но она не беспредельна!
	AI_Output(self,other,"DIA_Xardas_PreTeach_Mana_05_05");	//Поэтому ты должен понять, что кроме повышения своих магических возможностей, ты должен также научиться расходовать магическую энергию разумно и только по необходимости.
	AI_Output(self,other,"DIA_Xardas_PreTeach_Mana_05_06");	//Только тогда ты сможешь стать воистину великим магом Тьмы!
	XARDAS_TEACHMANA = TRUE;
};

instance DIA_XARDAS_TEACH_MANA(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 10;
	condition = dia_xardas_teach_mana_condition;
	information = dia_xardas_teach_mana_info;
	permanent = TRUE;
	description = "Я хочу увеличить свою магическую энергию.";
};

func int dia_xardas_teach_mana_condition()
{
	if((other.guild == GIL_KDM) && (XARDAS_TEACHMANA == TRUE) && ((other.attribute[ATR_MANA_MAX] < T_MEGA) || (VATRAS_TEACHREGENMANA == FALSE))) 
	{
		return TRUE;
	};
};

func void dia_xardas_teach_mana_info()
{
	AI_Output(other,self,"DIA_Xardas_TEACH_MANA_15_00");	//Я хочу увеличить свою магическую энергию.
	AI_Output(self,other,"DIA_Xardas_TEACH_MANA_15_01");	//Я могу помочь тебе в этом. Как ты ее используешь, зависит только от тебя.
	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);

	if((Kapitel >= 2) && (VATRAS_TEACHREGENMANA == FALSE))
	{
		Info_AddChoice(DIA_Xardas_TEACH_MANA,"Регенерация маны (Очки обучения: 15)",DIA_Xardas_TEACH_MANA_Regen);
	};
};

func void dia_xardas_teach_mana_back()
{
	if(other.attribute[ATR_MANA_MAX] >= T_MEGA)
	{
		AI_Output(self,other,"DIA_Xardas_TEACH_MANA_05_00");	//Я больше не в силах помочь тебе в этом.
		AI_Output(self,other,"DIA_Xardas_TEACH_MANA_05_01");	//Ты на пределе своих возможностей!
	};

	Info_ClearChoices(dia_xardas_teach_mana);
};

func void DIA_Xardas_TEACH_MANA_Regen()
{
	var int kosten;
	var int money;

	AI_Output(other,self,"DIA_Vatras_Teach_regen_15_05");	//Научи меня регенерации маны.

	kosten = 15;

	if(hero.lp < kosten)
	{
		AI_Print(PRINT_NotEnoughLearnPoints);
		AI_StopProcessInfos(self);
	}
	else
	{
		hero.lp = hero.lp - kosten;
		RankPoints = RankPoints + kosten;
		AI_Print("Обучение: Регенерация маны");
		VATRAS_TEACHREGENMANA = TRUE;
		Snd_Play("LevelUP");
	};

	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);
};

func void dia_xardas_teach_mana_1()
{
	B_TeachAttributePoints(self,other,ATR_MANA_MAX,1,T_MEGA);
	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);

	if((Kapitel >= 2) && (hero.guild == GIL_KDM) && (VATRAS_TEACHREGENMANA == FALSE))
	{
		Info_AddChoice(DIA_Xardas_TEACH_MANA,"Регенерация маны (Очки обучения: 20)",DIA_Xardas_TEACH_MANA_Regen);
	};
};

func void dia_xardas_teach_mana_5()
{
	B_TeachAttributePoints(self,other,ATR_MANA_MAX,5,T_MEGA);
	Info_ClearChoices(dia_xardas_teach_mana);
	Info_AddChoice(dia_xardas_teach_mana,Dialog_Back,dia_xardas_teach_mana_back);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA1,B_GetLearnCostAttribute(other,ATR_MANA_MAX)),dia_xardas_teach_mana_1);
	Info_AddChoice(dia_xardas_teach_mana,b_buildlearnstringforskills(PRINT_LearnMANA5,B_GetLearnCostAttribute(other,ATR_MANA_MAX) * 5),dia_xardas_teach_mana_5);

	if((Kapitel >= 2) && (hero.guild == GIL_KDM) && (VATRAS_TEACHREGENMANA == FALSE))
	{
		Info_AddChoice(DIA_Xardas_TEACH_MANA,"Регенерация маны (Очки обучения: 20)",DIA_Xardas_TEACH_MANA_Regen);
	};
};


instance DIA_XARDAS_TELLABOUTKREOL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_tellaboutkreol_condition;
	information = dia_xardas_tellaboutkreol_info;
	permanent = FALSE;
	description = "Ты знаешь язык Демонов Лэнга?";
};


func int dia_xardas_tellaboutkreol_condition()
{
	if(Npc_KnowsInfo(other,dmt_1214_tegon_hello))
	{
		return TRUE;
	};
};

func void dia_xardas_tellaboutkreol_info()
{
	AI_Output(other,self,"DIA_Xardas_TellAboutKreol_01_00");	//Ты знаешь язык Демонов Лэнга?
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_01");	//ЧТО? Откуда тебе стало известно про этот древний язык?
	AI_Output(other,self,"DIA_Xardas_TellAboutKreol_01_02");	//Хранитель Тегон сказал, что...
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_03");	//(перебивая) Можешь не продолжать! Мне все стало ясно...
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_04");	//Если я правильно понимаю, чтобы пройти испытание хранителя, тебе необходимо изучить этот язык.
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_05");	//И наверняка он также просил тебя ознакомиться с древними записями, что находятся здесь, в верхней зале моей башни.
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_06");	//Возможно, ты даже полагаешь, что я смогу тебя научить ему...
	AI_Output(other,self,"DIA_Xardas_TellAboutKreol_01_07");	//Именно это я и хотел спросить у тебя.
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_08");	//Увы, но я не смогу это сделать. Мои познания языка демонов Лэнга очень скудны и вряд ли помогут тебе в твоем испытании.
	AI_Output(other,self,"DIA_Xardas_TellAboutKreol_01_11");	//Но Хранитель сказал, что ты поможешь мне решить эту проблему!
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_12");	//Но он не говорил, что именно я обучу тебя этому языку. Тебе нужно найти того, кто в совершенстве владеет этим знанием!
	AI_Output(other,self,"DIA_Xardas_TellAboutKreol_01_15");	//И у тебя есть кто-то на примете?
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_18");	//Да. Его зовут Креол... Он некромант и очень могущественный колдун. По своей силе он не уступит даже Хранителям!
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_19");	//Креол - истинный приверженец Темного бога, и его даже можно назвать одним из избранных Белиара!
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_22");	//Однако он не станет учить тебя без веской причины. Тебе придется произвести на него впечатление.
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_23");	//Я не смогу тебе точно сказать, каким именно образом, но я уверен, что сделать это будет непросто.
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_24");	//У Креола очень крутой нрав, так что постарайся быть с ним повежливее. Иначе он запросто сделает из тебя нечто совсем непотребное...(смеется)
	AI_Output(other,self,"DIA_Xardas_TellAboutKreol_01_25");	//А где мне искать этого... Креола?
	AI_Output(self,other,"DIA_Xardas_TellAboutKreol_01_26");	//Кажется, не так давно он обосновался где-то в Долине рудников. Попробуй начать его поиски там.
	XARDASTELLABOUTKREOL = TRUE;
	Log_CreateTopic(TOPIC_FINDKREOL,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_FINDKREOL,LOG_Running);
	MIS_FINDKREOL = LOG_Running;
	B_LogEntry(TOPIC_FINDKREOL,"Ксардас рассказал мне о могущественном некроманте Креоле. Похоже, только он способен обучить меня языку демонов. Ксардас полагает, что Креол нашел свое пристанище где-то в Долине рудников.");
	Log_AddEntry(TOPIC_FINDKREOL,"Ксардас также предупредил, что Креол обладает очень крутым нравом. Мне стоит быть с ним повежливее, если я его встречу - в противном случае для меня это может очень плохо кончиться.");
};


instance DIA_XARDAS_TELLABOUTRESURECT(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_tellaboutresurect_condition;
	information = dia_xardas_tellaboutresurect_info;
	permanent = TRUE;
	description = "У меня есть один вопрос.";
};

func int dia_xardas_tellaboutresurect_condition()
{
	if((MIS_VIPERNUGGETS == LOG_Running) && (Npc_HasItems(other,itat_skeletonbonealef) >= 1) && (AlefRitualTell == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_tellaboutresurect_info()
{
	AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_00");	//У меня есть один вопрос.

	if(Wld_IsTime(9,0,21,0) == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_01");	//Ну, так спрашивай, если есть.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_02");	//Хмм... Ксардас, ты некромант и владеешь искусством вызова умерших.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_03");	//Любой некромант обладает этой способностью. Подожди, и почему я должен рассказывать тебе об этом?
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_04");	//Мне необходимо поговорить с одним человеком и выбить из него кое-какую информацию.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_05");	//Но проблема в том, что этого человека уже давно нет в живых.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_07");	//И что ты хочешь от меня?
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_08");	//Ты бы мог каким-нибудь образом вернуть его к жизни, чтобы я мог с ним поговорить?
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_09");	//Чушь! Никто не может оживить уже умершего человека, даже некромант.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_11");	//Я могу сделать из его сгнившей плоти слугу - зомби. Но, боюсь, ничего толкового ты от него не добьешься.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_12");	//От его плоти уже мало что осталось - только пара костей.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_13");	//Пара костей, говоришь?
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_17");	//Существует один ритуал - ритуал вызова души умершего. Он не самый простой, очень опасный и потребует больших затрат магической энергии.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_18");	//Но если тебе это действительно очень нужно...
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_20");	//Хммм... ну, хорошо! Но для того, чтобы осуществить этот ритуал - мне понадобится одна вещь.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_21");	//Какая именно?
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_22");	//Мне нужны останки того, чью душу мы будем вызывать. Подойдут те же кости!
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_23");	//Только не вздумай тащить сюда весь скелет! Мне хватит и одной небольшой косточки.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_25");	//Я на всякий случай как раз уже прихватил один экземпляр.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_26");	//Да? Хммм... а ты предусмотрителен! Покажи-ка мне ее.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_27");	//Вот, держи.
		B_GiveInvItems(other,self,itat_skeletonbonealef,1);
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_29");	//Теперь мы можем приступить к выполнению ритуала?
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_30");	//Да, конечно. Но хочу тебя сразу предупредить: у этого ритуала, так сказать, есть несколько очень неприятных побочных эффектов.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_32");	//Во-первых, у тебя будет только пять минут, в течение которых ты сможешь поговорить с душой. После этого она станет свободной от чар заклинания.
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_33");	//А если она откажется со мной говорить и тем более отвечать на мои вопросы?
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_34");	//Она не сможет этого сделать - иначе она больше нигде и никогда не будет знать покоя. Так что смело задавай свои вопросы!
		AI_Output(other,self,"DIA_Xardas_TellAboutResurect_01_35");	//А во-вторых? Что случится после этого?
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_36");	//Думаю, вызванная душа не очень обрадуется тому, что ее потревожили и наверняка попытается убить человека, посмевшего нарушить ее покой.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_46");	//Поэтому хорошенько подумай, прежде чем решиться осуществить то, что задумал.
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_47");	//Итак, что скажешь?
		AlefRitualTell = TRUE;
		B_LogEntry(TOPIC_VIPERNUGGETS,"Оказалось не все так плохо, как я думал. Ксардас готов помочь мне, проведя ритуал вызова души и призвав душу Алефа в наш мир. Он также предупредил меня, что это очень опасный ритуал. У меня будет всего пять минут, чтобы задать душе интересующие меня вопросы - после я потеряю контроль над душой. И тогда она попытается убить меня.");
		Info_ClearChoices(dia_xardas_tellaboutresurect);
		Info_AddChoice(dia_xardas_tellaboutresurect,"Нет. Подожди минутку!",dia_xardas_tellaboutresurect_answer1);
		Info_AddChoice(dia_xardas_tellaboutresurect,"Давай начнем ритуал!",dia_xardas_tellaboutresurect_answer2);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_TellAboutResurect_01_99");	//Все вопросы завтра! Сейчас я устал и хочу отдохнуть...
		AI_StopProcessInfos(self);
	};
};

func void dia_xardas_tellaboutresurect_answer1()
{
	AI_Output(other,self,"DIA_Xardas_TellAboutResurect_Answer1_01_00");	//Нет. Подожди минутку!
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer1_01_01");	//Хорошо. Как скажешь.
	Info_ClearChoices(dia_xardas_tellaboutresurect);
};

func void dia_xardas_tellaboutresurect_answer2()
{
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer2_01_0A");	//Тогда не будем терять времени!
	AI_SetWalkMode(self,NPC_WALK);
	AI_GotoWP(self,"NW_XARDAS_ALEFCAST");
	AI_AlignToWP(self);
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer2_01_00");	//Именем Темного бога призываю тебя...
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer2_01_01");	//Отступи свет... Наступи тьма!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer2_01_02");	//Проложи путь... Пусть пройдет Душа!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC3");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer2_01_03");	//ШАКАН ТАР МАДАР! Приди на мой зов...!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC2");
	AI_TurnToNPC(self,other);
	Info_ClearChoices(dia_xardas_tellaboutresurect);
	Info_AddChoice(dia_xardas_tellaboutresurect,"...",dia_xardas_tellaboutresurect_answer3);
};

func void dia_xardas_tellaboutresurect_answer3()
{
	Snd_Play("MFX_FEAR_CAST");
	Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
	Wld_PlayEffect("FX_EarthQuake",self,self,0,0,0,FALSE);
	Wld_PlayEffect("SFX_Circle",self,self,0,0,0,FALSE);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer3_01_00");	//Это все! Душа уже здесь.
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer3_01_01");	//Помни, что я тебе говорил и не теряй времени понапрасну.
	Wld_InsertNpc(alef_soul,"NW_XARDAS_SOUL");
	ALEFRESURECTRITUAL = TRUE;
	Info_ClearChoices(dia_xardas_tellaboutresurect);
	Info_AddChoice(dia_xardas_tellaboutresurect,"Хорошо.",dia_xardas_tellaboutresurect_answer5);
};

func void dia_xardas_tellaboutresurect_answer5()
{
	AI_Output(other,self,"DIA_Xardas_TellAboutResurect_Answer5_01_00");	//Хорошо.
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer5_01_01");	//(слабеет) Поспеши...
	AI_Output(other,self,"DIA_Xardas_TellAboutResurect_Answer5_01_02");	//Что с тобой?!
	AI_Output(self,other,"DIA_Xardas_TellAboutResurect_Answer5_01_03");	//Я... не...
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"DRAINED");
};


instance DIA_XARDAS_RESURECTALEF(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_resurectalef_condition;
	information = dia_xardas_resurectalef_info;
	permanent = TRUE;
	description = "Я готов провести ритуал.";
};

func int dia_xardas_resurectalef_condition()
{
	if((AlefRitualTell == TRUE) && (ALEFRESURECTRITUAL == FALSE) && (MIS_VIPERNUGGETS == LOG_Running))
	{
		return TRUE;
	};
};

func void dia_xardas_resurectalef_info()
{
	AI_Output(other,self,"DIA_Xardas_ResurectAlef_01_00");	//По поводу ритуала...

	if(Wld_IsTime(9,0,21,0) == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_ResurectAlef_01_01");	//Да?
		AI_Output(other,self,"DIA_Xardas_ResurectAlef_01_02");	//Давай вызовем эту душу. Я готов.
		AI_Output(self,other,"DIA_Xardas_ResurectAlef_01_03");	//Ты точно в этом уверен?
		Info_ClearChoices(dia_xardas_tellaboutresurect);
		Info_AddChoice(dia_xardas_resurectalef,"Нет. Я передумал!",dia_xardas_resurectalef_answer1);
		Info_AddChoice(dia_xardas_resurectalef,"Да, уверен!",dia_xardas_resurectalef_answer2);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_ResurectAlef_01_99");	//Поговорим об этом завтра! Сейчас, я хочу отдохнуть...
		AI_StopProcessInfos(self);
	};
};

func void dia_xardas_resurectalef_answer1()
{
	AI_Output(other,self,"DIA_Xardas_ResurectAlef_Answer1_01_00");	//Подожди. Я еще не готов!
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer1_01_01");	//Хорошо. Как скажешь.
	Info_ClearChoices(dia_xardas_resurectalef);
};

func void dia_xardas_resurectalef_answer2()
{
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer2_01_0A");	//Тогда не будем терять времени!
	AI_SetWalkMode(self,NPC_WALK);
	AI_GotoWP(self,"NW_XARDAS_ALEFCAST");
	AI_AlignToWP(self);
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer2_01_00");	//Именем Темного бога призываю тебя...
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer2_01_01");	//Отступи свет... Наступи тьма!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer2_01_02");	//Проложи путь... Пусть пройдет Душа!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC3");
	AI_UseMob(self,"BOOK",1);
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer2_01_03");	//ШАКАН ТАР МАДАР! Приди на мой зов...!
	AI_UseMob(self,"BOOK",-1);
	AI_PlayAni(self,"T_PRACTICEMAGIC2");
	AI_UseMob(self,"BOOK",-1);
	AI_TurnToNPC(self,other);
	Info_ClearChoices(dia_xardas_resurectalef);
	Info_AddChoice(dia_xardas_resurectalef,"...",dia_xardas_resurectalef_answer3);
};

func void dia_xardas_resurectalef_answer3()
{
	Snd_Play("MFX_FEAR_CAST");
	Wld_PlayEffect("spellFX_INCOVATION_RED",self,self,0,0,0,FALSE);
	Wld_PlayEffect("FX_EarthQuake",self,self,0,0,0,FALSE);
	Wld_PlayEffect("SFX_Circle",self,self,0,0,0,FALSE);
	AI_PlayAni(self,"T_PRACTICEMAGIC5");
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer3_01_00");	//Это все! Душа уже здесь.
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer3_01_01");	//Помни, что я тебе говорил и не теряй времени понапрасну.
	Wld_InsertNpc(alef_soul,"NW_XARDAS_SOUL");
	ALEFRESURECTRITUAL = TRUE;
	Info_ClearChoices(dia_xardas_resurectalef);
	Info_AddChoice(dia_xardas_resurectalef,"Хорошо.",dia_xardas_resurectalef_answer4);
};

func void dia_xardas_resurectalef_answer4()
{
	AI_Output(other,self,"DIA_Xardas_ResurectAlef_Answer4_01_00");	//Хорошо.
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer4_01_01");	//(слабеет) Поспеши...
	AI_Output(other,self,"DIA_Xardas_ResurectAlef_Answer4_01_02");	//Что с тобой?!
	AI_Output(self,other,"DIA_Xardas_ResurectAlef_Answer4_01_03");	//Я... не...
	Npc_ExchangeRoutine(self,"DRAINED");
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_FINDDARKSOUL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_finddarksoul_condition;
	information = dia_xardas_finddarksoul_info;
	permanent = FALSE;
	description = "Тебе что-нибудь говорят слова Мора Уларту?";
};


func int dia_xardas_finddarksoul_condition()
{
	if((TASKFINDDARKSOUL == TRUE) && (MIS_GOLDDRAGONPORTAL == LOG_Running) && (TELLABOUTDS == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_finddarksoul_info()
{
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_00");	//Тебе что-нибудь говорят слова Мора Уларту?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_01");	//Хммм... Ты не перестаешь меня удивлять... откуда тебе стало известно об этом?
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_02");	//Это не столь важно, поверь мне. Ты можешь рассказать мне про это заклинание?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_03");	//М-да...(удивленно) Ну, я сам не очень много знаю, но попытаюсь вкратце объяснить тебе его суть...
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_05");	//Насколько мне известно, Мора Уларту - очень древнее могущественное заклинание. Его иногда также называют Темницей душ.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_06");	//Оно пришло с тех незапамятных времен, когда человечество лишь начинало свой путь в этом мире.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_07");	//Точно неизвестно, каким образом это заклинание попало в этот мир, но, судя по всему, к этому приложил свою руку сам Белиар!
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_08");	//Думаю, мне не надо тебе объяснять, зачем нужно это заклинание - его название, говорит само за себя.
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_09");	//Скажи, а как можно заполучить Мора Уларту?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_10");	//(удивленно) Зачем тебе это?
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_14");	//Мне нужно это заклинание, чтобы поймать душу одного демона.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_15");	//Ха! И давно ты занялся охотой на демонов? (смеется) Это, знаешь ли, крайне опасное дело!
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_17");	//Ну, если тебе и впрямь охота с этим связываться - будь по-твоему.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_18");	//Правда, боюсь, моя помощь будет не столь значительной в этом деле. Скажу сразу - у меня нет этого заклинания.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_19");	//Но, возможно, я смогу подсказать тебе, с чего тебе следует начать поиски.
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_20");	//Я чувствую, что это будет не так-то просто!
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_23");	//Мора Уларту - не просто заклинание. Это дар Белиара тому, кто по его мнению достоин владеть этим сокровенным знанием!
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_24");	//И не думаю, что он посчитает тебя тем достойным!
	if(other.guild == GIL_KDF)
	{
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_25");	//К тому же, ты маг Огня, служитель Инноса!
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_26");	//Боюсь, у тебя нет на это никаких шансов!
		CHANCEGETDARKSOUL = 1;
	}
	else if(other.guild == GIL_PAL)
	{
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_27");	//К тому же, ты паладин Инноса!
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_28");	//Боюсь, твои шансы ничтожно малы.
		CHANCEGETDARKSOUL = 5;
	}
	else if(other.guild == GIL_KDW)
	{
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_29");	//К тому же, ты маг Воды, служитель Аданоса!
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_30");	//Хотя между ним и Белиаром нет особой вражды, но, думаю, на это не стоит сильно рассчитывать.
		CHANCEGETDARKSOUL = 25;
	}
	else if(other.guild == GIL_KDM)
	{
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_31");	//Хотя, с другой стороны, то, что ты темный маг, безусловно, плюс в этом деле.
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_32");	//Но думаю, все равно на это не стоит сильно рассчитывать.
		CHANCEGETDARKSOUL = 50;
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_33");	//Хотя с другой стороны - ты не давал обет другим богам!
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_34");	//Возможно, это сможет стать твоим преимуществом в этом деле...(вдумчиво)
		CHANCEGETDARKSOUL = 75;
	};
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_35");	//В любом случае ты должен попробовать.
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_36");	//И что мне нужно сделать для того, чтобы Белиар даровал мне Мора Уларту?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_37");	//Тебе необходимо предложить Темному богу нечто особенное в обмен на его дар...
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_40");	//Возможно, твоя душа могла бы заинтересовать его - но, думаю, такой вариант тебе самому не выгоден...(смеется)
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_42");	//Думаю, есть еще одна вещь, которую Белиар был бы не прочь заполучить.
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_43");	//Какая именно?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_46");	//Существует один очень могущественный артефакт - Амулет Трирамар.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_47");	//Я точно не знаю, кто был его создателем - но предполагаю, что это был сам Белиар!
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_48");	//Иначе как объяснить, что со времени своего создания и до последнего момента артефакт находился в одном из храмов, посвященных Темному богу.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_49");	//Правда, сейчас ситуация несколько изменилась. Где-то полвека назад паладины разрушили этот храм.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_52");	//Они не оставили без внимания и сам артефакт. Не в силах его уничтожить, они надежно сокрыли его от посторонних глаз.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_53");	//А сила Инноса помогла им противостоять гневу Белиара, желавшего вернуть его себе.
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_54");	//А что в нем такого особенного?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_55");	//В нем сокрыта одна из четырех сущностей Темного бога. Для тех, кто служил Белиару, этот артефакт являлся источником их силы...
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_57");	//...а для Темного бога он являлся неотъемлемой частью его самого!
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_58");	//Хочешь сказать, если Темный бог получит этот амулет обратно, то он даст мне...
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_59");	//(перебивая) Как я и говорил, это может лишь заинтересовать Белиара. Белиар хитер и коварен!
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_61");	//Безусловно, он будет рад вернуть себе этот артефакт, но на этом его благодарность может и закончиться.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_63");	//Кроме того, если паладины узнают об этом - сам понимаешь, что тебе грозит.
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_65");	//А где паладины хранят этот артефакт?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_66");	//Они спрятали его где-то на острове, как я полагаю. Но вряд ли он хранится в городе или в монастыре.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_68");	//Скорее всего, это место надежно сокрыто от посторонних глаз, и попасть туда практически невозможно.
	if(Npc_KnowsInfo(other,dia_pal_199_ritter_firstwarn) || Npc_KnowsInfo(other,dia_pal_199_ritter_hagen))
	{
		AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_69");	//Может, они хранят его в королевском форте Азган?
		AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_70");	//Не думаю. Там слишком людно!
	};
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_74");	//А откуда тебе это все самому известно?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_75");	//Я бывший маг Огня! Такое никогда не проходит без их ведома!
	AI_Output(other,self,"DIA_Xardas_FindDarkSoul_01_76");	//А что мне делать, если я все-таки найду способ заполучить этот амулет?
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_77");	//Произнеси молитву Белиару и возложи амулет к подножию его алтаря. А после этого проси его даровать тебе Мора Уларту.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_81");	//И еще кое-что... держи меня в курсе событий. Если что-то узнаешь про амулет - дай мне знать.
	AI_Output(self,other,"DIA_Xardas_FindDarkSoul_01_85");	//Теперь можешь идти.
	TELLABOUTDS = TRUE;
	XARDASLINE = TRUE;
	Wld_InsertNpc(pal_187_melhior,"NW_CITY_HABOUR_MELHIOR");
	B_LogEntry(TOPIC_GOLDDRAGONPORTAL,"Ксардас поведал мне о древнем заклинании Мора Уларту - Темнице душ. Это заклинание может быть даровано только самим Белиаром, и мои шансы на это не очень высоки. Однако Ксардас подсказал мне, как возможно заполучить благосклонность Темного бога. Для этого мне необходимо достать некий Амулет Трирамар - могущественный артефакт, в который Белиар вложил часть своей божественной силы, захваченный паладинами во время уничтожения одного из храмов Темного бога. Но где паладины прячут этот артефакт, мне придется выяснить самому.");
	Log_AddEntry(TOPIC_GOLDDRAGONPORTAL,"Если мне удастся достать артефакт, мне следует вознести молитву Темному богу, возложить амулет на его алтарь и просить Белиара даровать нужное мне заклинание. И надеяться, что он услышит мою просьбу.");
};


instance DIA_XARDAS_FINDETLU(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_findetlu_condition;
	information = dia_xardas_findetlu_info;
	permanent = FALSE;
	description = "Я узнал, где паладины прячут Амулет Трирамар.";
};


func int dia_xardas_findetlu_condition()
{
	if((ETLUBEGINS == TRUE) && Npc_KnowsInfo(other,dia_xardas_finddarksoul) && (BEONETLU == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_findetlu_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_FindEtlu_01_00");	//Я узнал, где паладины прячут Амулет Трирамар.
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_01");	//И где же?
	AI_Output(other,self,"DIA_Xardas_FindEtlu_01_02");	//На острове Этлу.
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_03");	//Этлу? (задумчиво) Да, они его хорошенько припрятали.
	AI_Output(other,self,"DIA_Xardas_FindEtlu_01_04");	//Я также узнал и как попасть туда.
	AI_Output(other,self,"DIA_Xardas_FindEtlu_01_05");	//Здесь в Хоринисе есть магический портал, который прямиком ведет на этот остров.
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_06");	//Портал? Откуда он здесь взялся?
	AI_Output(other,self,"DIA_Xardas_FindEtlu_01_07");	//Его построили паладины.
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_08");	//М-да...(смеется) Ирония судьбы! Тогда тебе осталось только найти этот портал.
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_13");	//Но, как я уже говорил, паладины на острове не обрадуются твоему визиту.
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_15");	//Это запретная зона! И всякого, кто осмелится нарушить это правило и заявится туда без приглашения, ожидает только одно...
	if(hero.guild == GIL_PAL)
	{
		AI_Output(self,other,"DIA_Xardas_FindEtlu_01_18");	//Даже несмотря на то, что ты паладин!
		AI_Output(self,other,"DIA_Xardas_FindEtlu_01_19");	//Там, на острове, твой статус тебя уже не спасет!
	}
	else if(hero.guild == GIL_KDF)
	{
		AI_Output(self,other,"DIA_Xardas_FindEtlu_01_20");	//Даже несмотря на то, что ты маг Огня!
		AI_Output(self,other,"DIA_Xardas_FindEtlu_01_21");	//Там, на острове, твой статус тебя уже не спасет!
	}
	else if(hero.guild == GIL_KDW)
	{
		AI_Output(self,other,"DIA_Xardas_FindEtlu_01_22");	//Даже несмотря на то, что ты маг Воды!
		AI_Output(self,other,"DIA_Xardas_FindEtlu_01_23");	//Там, на острове, твой статус тебя уже не спасет!
	};
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_24");	//Прежде чем туда отправляться, хорошенько подготовься. Тебя ожидает тяжелый бой!
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_25");	//Паладины будут стоять насмерть, защищая этот артефакт!
	AI_Output(self,other,"DIA_Xardas_FindEtlu_01_27");	//И не смей надевать этот амулет! У тебя просто не хватит сил сопротивляться его мощи.
	B_LogEntry(TOPIC_GOLDDRAGONPORTAL,"Ксардас сказал, что не стоит ожидать теплого приема на острове. Похоже, мне придется прорубать себе дорогу мечом. Также не стоит пытаться надеть амулет, иначе он просто убьет меня.");
};


instance DIA_XARDAS_ASKABOUTPEACEWAY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_askaboutpeaceway_condition;
	information = dia_xardas_askaboutpeaceway_info;
	permanent = FALSE;
	description = "Еще один вопрос.";
};


func int dia_xardas_askaboutpeaceway_condition()
{
	if(Npc_KnowsInfo(other,dia_xardas_findetlu) && (MEHASTRIRAVAR == FALSE) && (ASKABOUTPEACEWAY == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_askaboutpeaceway_info()
{
	AI_Output(other,self,"DIA_Xardas_AskAboutPeaceWay_01_00");	//Еще один вопрос.
	AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_01");	//И какой же?
	AI_Output(other,self,"DIA_Xardas_AskAboutPeaceWay_01_03");	//Неужели нет другого способа заполучить у паладинов этот амулет?
	AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_04");	//Как я уже сказал, мне это неведомо.
	if((other.guild == GIL_PAL) || (other.guild == GIL_KDF))
	{
		AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_05");	//Возможно, на твоем месте я бы попробовал попросить помощи у самого хозяина амулета - Белиара!
		if(other.guild == GIL_PAL)
		{
			AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_06");	//Но ты паладин Инноса! Вряд ли он станет тебе помогать.
		}
		else
		{
			AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_07");	//Но ты маг Огня! Вряд ли он станет тебе помогать.
		};
		AI_Output(other,self,"DIA_Xardas_AskAboutPeaceWay_01_08");	//Понятно.
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_09");	//Однако на твоем месте я бы попробовал попросить помощи у самого хозяина амулета.
		AI_Output(other,self,"DIA_Xardas_AskAboutPeaceWay_01_10");	//Ты имеешь в виду Белиара?
		AI_Output(self,other,"DIA_Xardas_AskAboutPeaceWay_01_11");	//Именно! Обратись к нему с молитвой и, возможно, у тебя появится шанс.
		AI_Output(other,self,"DIA_Xardas_AskAboutPeaceWay_01_12");	//Я попробую.
		B_LogEntry(TOPIC_GOLDDRAGONPORTAL,"Я спросил Ксардаса, существует ли иной способ забрать у паладинов амулет, не устраивая бойни. Он посоветовал мне обратиться к самому Белиару. Надеюсь, он услышит мои мольбы.");
	};
	ASKABOUTPEACEWAY = TRUE;
};


instance DIA_XARDAS_FINDAMULET(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_findamulet_condition;
	information = dia_xardas_findamulet_info;
	permanent = FALSE;
	description = "Я достал Амулет Трирамар!";
};


func int dia_xardas_findamulet_condition()
{
	if((Npc_HasItems(other,itmi_triramar) >= 1) && Npc_KnowsInfo(other,dia_xardas_finddarksoul))
	{
		return TRUE;
	};
};

func void dia_xardas_findamulet_info()
{
	B_GivePlayerXP(200);

	if(Npc_HasItems(other,ITKE_SI_SIGN) >= 1)
	{
		Npc_RemoveInvItems(other,ITKE_SI_SIGN,1);
	};
	if(Npc_HasItems(other,ITKE_HAGEN_SECRETKEY) >= 1)
	{
		Npc_RemoveInvItems(other,ITKE_HAGEN_SECRETKEY,1);
	};

	AI_Output(other,self,"DIA_Xardas_FindAmulet_01_00");	//Я достал Амулет Трирамар!
	AI_Output(self,other,"DIA_Xardas_FindAmulet_01_01");	//ЧТО?! Неужели тебе это удалось?
	AI_Output(self,other,"DIA_Xardas_FindAmulet_01_03");	//Ты не перестаешь меня удивлять. Хотя пора бы мне уже к этому привыкнуть.

	if(CountPalmora >= 5)
	{
		AI_Output(self,other,"DIA_Xardas_FindAmulet_01_04");	//Надеюсь, тебя не мучает советь, что из-за этого амулета тебе пришлось отправить на тот свет столько людей?
		AI_Output(self,other,"DIA_Xardas_FindAmulet_01_08");	//Возможно, ты совершил ошибку... ладно, хватит попусту молоть языком.
	};

	AI_Output(self,other,"DIA_Xardas_FindAmulet_01_09");	//Теперь, чтобы получить Мора Уларту, тебе осталось только совершить церемонию подношения дара Белиару.
	AI_Output(self,other,"DIA_Xardas_FindAmulet_01_10");	//Отправляйся к ближайшему алтарю Темного бога, возложи амулет к его основанию и проси даровать тебе Темницу душ!
	AI_Output(self,other,"DIA_Xardas_FindAmulet_01_11");	//Один из таких алтарей ты найдешь на верхнем этаже моей башни.
	AI_Output(self,other,"DIA_Xardas_FindAmulet_01_12");	//И помни - Темный бог хитер и коварен! Не думай, что если ты отдашь ему этот амулет, то обязательно получишь свою награду!
	AI_Output(other,self,"DIA_Xardas_FindAmulet_01_14");	//Я надеюсь, что все мои усилия не пропадут даром!
	B_LogEntry(TOPIC_GOLDDRAGONPORTAL,"Я показал амулет Ксардасу. Теперь мне следует отправиться к любому алтарю Белиара, возложить амулет к его основанию и просить Темного бога принять этот амулет, даровав мне Мора Уларту.");
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_GETSUPERBELIARWEAPON(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_getsuperbeliarweapon_condition;
	information = dia_xardas_getsuperbeliarweapon_info;
	permanent = FALSE;
	description = "Темный бог даровал мне Мора Уларту!";
};


func int dia_xardas_getsuperbeliarweapon_condition()
{
	if((Npc_HasItems(hero,itru_moraulartu) >= 1) && Npc_KnowsInfo(hero,dia_xardas_finddarksoul))
	{
		return TRUE;
	};
};

func void dia_xardas_getsuperbeliarweapon_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_00");	//Темный бог даровал мне Мора Уларту!
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_01");	//ЧТО?! (вздыхает) Иногда мне кажется, что для тебя вообще не существует невозможного...
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_07");	//Теперь в твоих руках находится могущественный артефакт, дарующий тебе способность Ловца душ!
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_08");	//Ловца Душ?
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_09");	//Да! Очень немногие владеют этим знанием...
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_12");	//В основном, это демоны и подобные им существа, которые унаследовали эту способность при рождении, или же им были дарованы эти знания. Правда, не всем, а только самым могущественным из них!
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_13");	//Для людей же эти знания практически недоступны... хотя, как оказалось, бывают и исключения.
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_14");	//Но зачем нужны души?
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_15");	//Ты сам до сих пор не осознаешь, чем ты теперь владеешь...
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_16");	//Душа - это самое ценное, что есть у живого существа! Это источник нашей магической силы, которую мы используем для сотворения магии.
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_17");	//Ко всему прочему, душа живого существа обладает рядом и других необычных свойств. Но о них мне практически ничего не известно.
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_19");	//Именно поэтому эта субстанция так высоко ценится - ведь это ключ к безграничному могуществу!
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_20");	//Объясни, как использовать все эти знания?
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_21");	//Это не так уж и сложно. У тебя есть Мора Уларту - этого вполне хватит, чтобы не дать душе ускользнуть после смерти ее обладателя...
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_22");	//Однако использовать ее силу ты не сможешь.
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_24");	//Люди не умеют обращаться с ними так, как это делают например те же демоны - пожирать их, тем самым увеличивая свою силу и могущество.
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_25");	//Тогда что мне с ними делать?
	AI_Output(self,other,"DIA_Xardas_GetSuperBeliarWeapon_01_26");	//Возможно, Темный бог примет пойманные тобой души в качестве дара. А взамен ты сможешь выпросить у него что-либо ценное.
	AI_Output(other,self,"DIA_Xardas_GetSuperBeliarWeapon_01_29");	//Хорошо, мне все ясно.
	KNOWSHOWDEALSOULS = TRUE;
	Log_CreateTopic(TOPIC_SUPERBELIARWEAPON_UPG,LOG_NOTE);
	B_LogEntry(TOPIC_SUPERBELIARWEAPON_UPG,"Полученная мной руна Мора Уларту даровала мне способность Ловца душ, с помощью которой я смогу пленить и захватывать души любого существа. Собранные души я могу преподнести в дар Темному богу, не забыв при этом выпросить у него для себя что-нибудь полезное.");
};


instance DIA_XARDAS_GETSUPERSOUL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_getsupersoul_condition;
	information = dia_xardas_getsupersoul_info;
	permanent = FALSE;
	description = "У меня есть душа архидемона С'эньяка!";
};


func int dia_xardas_getsupersoul_condition()
{
	if((Npc_HasItems(hero,itmi_stonesoul_senyak) >= 1) && (TELLCANSUPERBELIARWEAPON == FALSE) && (KNOWSHOWDEALSOULS == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_getsupersoul_info()
{
	B_GivePlayerXP(300);
	AI_Output(other,self,"DIA_Xardas_GetSuperSoul_01_00");	//У меня есть душа архидемона С'эньяка!
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_01");	//С'эньяка?! Хммм...(ехидно) А ты зря времени не терял, да?
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_02");	//В твоих руках воистину настоящее сокровище!
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_05");	//Душа архидемона не похожа на все остальные. Ее магическая сила огромна и совладать с ней ты будешь просто не в состоянии.
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_06");	//Тебе понадобится какой-либо мощный магический артефакт. Вложив в него магическую основу души, ты сможешь увеличить его мощь!
	AI_Output(other,self,"DIA_Xardas_GetSuperSoul_01_08");	//И что это должен быть за предмет?
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_09");	//Для начала он должен иметь магическую суть создания, ибо только структура подобных артефактов позволяет заключить в них магическую силу души.
	AI_Output(other,self,"DIA_Xardas_GetSuperSoul_01_10");	//Как насчет Когтя Белиара?
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_11");	//Коготь? Думаю, он бы идеально подошел для этого. Ведь он был создан магией - темной магией Белиара!
	AI_Output(other,self,"DIA_Xardas_GetSuperSoul_01_14");	//Как мне тогда перенести душу архидемона в этот артефакт?
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_15");	//Подойдет любой магический алтарь Темного бога. Его аура позволит тебе осуществить ритуал переноса души.
	AI_Output(self,other,"DIA_Xardas_GetSuperSoul_01_17");	//Тебе потребуется лишь благосклонность самого Белиара!
	TELLCANSUPERBELIARWEAPON = TRUE;
	B_LogEntry(TOPIC_SUPERBELIARWEAPON_UPG,"Чтобы использовать силу плененной мною души архидемона С'эньяка, мне необходим артефакт, способный поглотить ее силу. Для этого лучше всего подойдет Коготь Белиара. Чтобы осуществить ритуал переноса души в этот артефакт, подойдет алтарь Темного бога. Однако Белиар должен быть благосклонен ко мне.");
};


instance DIA_XARDAS_GOBLINBRINGSCROLL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 23;
	condition = dia_xardas_goblinbringscroll_condition;
	information = dia_xardas_goblinbringscroll_info;
	permanent = FALSE;
	description = "Мне нужен свиток изгнания.";
};


func int dia_xardas_goblinbringscroll_condition()
{
	if((MIS_GOBLINAWAY == LOG_Running) && (XARDASGOBLINREADYAWAY == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_goblinbringscroll_info()
{
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_01_00");	//Мне нужен свиток изгнания.
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_01_01");	//У тебя есть такой?
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_01_02");	//Это опасное заклинание, и без объяснений я тебе его не дам!
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_01_03");	//Зачем тебе понадобился этот свиток?
	Info_ClearChoices(dia_xardas_goblinbringscroll);
	Info_AddChoice(dia_xardas_goblinbringscroll,"Я не могу тебе об этом рассказать.",dia_xardas_goblinbringscroll_ok);
	Info_AddChoice(dia_xardas_goblinbringscroll,"Он нужен мне для нашего общего дела.",dia_xardas_goblinbringscroll_no_1);
	Info_AddChoice(dia_xardas_goblinbringscroll,"Чтобы изгнать одно странное существо.",dia_xardas_goblinbringscroll_no_2);
	Info_AddChoice(dia_xardas_goblinbringscroll,"Это для моего друга Мада.",dia_xardas_goblinbringscroll_no_3);
};

func void dia_xardas_goblinbringscroll_ok()
{
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_Ok_01_00");	//Я не могу тебе об этом рассказать.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_Ok_01_01");	//В таком случае я не буду тебе помогать!
};

func void dia_xardas_goblinbringscroll_no_1()
{
	B_GivePlayerXP(50);
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_No_1_01_00");	//Он нужен мне для нашего общего дела.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_1_01_01");	//Чушь! Я знаю, что нужно для нашего дела!
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_1_01_02");	//И я не вижу ни одной причины, почему я должен дать тебе этот свиток.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_1_01_03");	//А теперь иди выполняй то, что необходимо. (сердито) И не смей больше беспокоить меня по всяким пустякам!
	B_LogEntry(TOPIC_GOBLINAWAY,"Ксардас отказался дать мне свиток изгнания.");
	AI_StopProcessInfos(self);
};

func void dia_xardas_goblinbringscroll_no_2()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_No_2_01_00");	//Чтобы изгнать одно странное существо.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_01");	//Какое еще существо?! О чем это ты?
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_No_2_01_02");	//Одного гоблина! Представляешь, он еще и оказался говорящим.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_03");	//Да? Кажется, я знаю, о ком ты говоришь.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_04");	//Ты встретил его недалеко от моей старой башни в Долине рудников?
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_No_2_01_05");	//Точно! А как ты узнал об этом?
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_06");	//(ехидно) Догадался! Но не будем тратить время на обсуждение всяких глупостей.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_07");	//Ладно, я дам тебе этот свиток, и лишь потому, что сам давно уже должен был это сделать!
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_09");	//Я об этом как-то подзабыл... но ты исправишь мою ошибку.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_10");	//Хотя для начала следовало бы наказать это порождение падальщика за то, что он сбежал от меня!
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_11");	//Но такое бывает - призванные существа не всегда послушны голосу своего хозяина.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_12");	//Вот, держи свиток и запомни: использовать его можно только раз и в непосредственной близости от вызванного существа.
	B_GiveInvItems(self,other,itwr_xardasgoblinscroll,1);
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_2_01_13");	//А теперь иди и постарайся больше не отвлекать меня по всяким пустякам!
	B_LogEntry(TOPIC_GOBLINAWAY,"Ксардас дал мне свиток изгнания. Пора возвращаться к гоблину.");
	AI_StopProcessInfos(self);
};

func void dia_xardas_goblinbringscroll_no_3()
{
	B_GivePlayerXP(50);
	AI_Output(other,self,"DIA_Xardas_GoblinBringScroll_No_3_01_01");	//Это для моего друга Мада. Я познакомился с ним в Колонии.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_3_01_02");	//Мне кажется, что ты лжешь.
	AI_Output(self,other,"DIA_Xardas_GoblinBringScroll_No_3_01_08");	//Лучше иди и занимайся тем, чем должен. И не смей больше отвлекать меня по пустякам!
	B_LogEntry(TOPIC_GOBLINAWAY,"Ксардас отказался дать мне свиток изгнания.");
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_CANBENECROM(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_canbenecrom_condition;
	information = dia_xardas_canbenecrom_info;
	permanent = FALSE;
	description = "Ты можешь посвятить меня в тайны темной магии?";
};


func int dia_xardas_canbenecrom_condition()
{
	if((TELLABOUTOTHERGUILD == TRUE) && (hero.guild == GIL_NONE))
	{
		return TRUE;
	};
};

func void dia_xardas_canbenecrom_info()
{
	AI_Output(other,self,"DIA_Xardas_CanBeNecrom_01_00");	//Ты можешь посвятить меня в тайны темной магии?
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_01");	//Хммм...(задумчиво) Твоя просьба немного удивляет меня!
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_03");	//Я даже и не ожидал услышать от тебя подобного вопроса.
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_04");	//Конечно, я понимаю твое желание стать магом и овладеть силой магических рун.
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_05");	//Но для этого есть куда более легкие пути, нежели путь некроманта и заклинателя демонов.
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_06");	//Мало кто отважится вступить на него - ведь он невероятно труден и опасен!
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_07");	//И к тому же, путь темного мага - это путь полного одиночества...(мрачно)
	AI_Output(other,self,"DIA_Xardas_CanBeNecrom_01_08");	//Меня это не пугает.
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_10");	//Но разве на острове мало представителей других божеств. Как насчет те же магов Воды или Огня?
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_11");	//Ведь они также смогут дать тебе то, что ты ищешь.
	AI_Output(other,self,"DIA_Xardas_CanBeNecrom_01_14");	//Я чувствую, что именно тьма - моя обитель. Именно в ней заключается мое предназначение!
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_15");	//(задумчиво) Хммм...
	AI_Output(other,self,"DIA_Xardas_CanBeNecrom_01_17");	//Так ты поможешь мне стать некромантом?
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_18");	//Ну, хорошо! Однако сразу я не могу принять такое решение.
	AI_Output(self,other,"DIA_Xardas_CanBeNecrom_01_21");	//Мне нужно время, чтобы подумать об этом...
	XARDASTIMERBENDM = Wld_GetDay();
	MIS_BECOMEKDM = LOG_Running;
	Log_CreateTopic(TOPIC_BECOMEKDM,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_BECOMEKDM,LOG_Running);
	B_LogEntry(TOPIC_BECOMEKDM,"Я обратился к Ксардасу с просьбой принять меня в темные маги и обучить секретам магии некромантов. Ксардас ответил, что ему нужно подумать над этим вопросом несколько дней.");
};


instance DIA_XARDAS_CANBENECROMOK(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_canbenecromok_condition;
	information = dia_xardas_canbenecromok_info;
	permanent = FALSE;
	description = "Ты подумал насчет моей просьбы?";
};

func int dia_xardas_canbenecromok_condition()
{
	var int daynow;
	daynow = Wld_GetDay();
	if((XARDASTIMERBENDM <= (daynow - 2)) && (MIS_BECOMEKDM == LOG_Running) && (XARDAS_NDM == FALSE) && (hero.guild == GIL_NONE))
	{
		return TRUE;
	};
};

func void dia_xardas_canbenecromok_info()
{
	AI_Output(other,self,"DIA_Xardas_CanBeNecromOk_01_00");	//Ты подумал насчет моей просьбы?
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_01_03");	//Я согласен принять тебя в свои ученики и обучить секретам магии Тьмы.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_01_04");	//Однако ты должен понимать, что приняв это решение, ты уже не сможешь просто так изменить свой выбор.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_01_05");	//Поэтому ты должен целиком и полностью осознавать правильность своих действий.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_01_06");	//Итак, ты готов дать обет Темному богу и посвятить свою жизнь изучению магии Тьмы?
	B_LogEntry(TOPIC_BECOMEKDM,"Ксардас согласен взять меня к себе в ученики и обучить темной магии.");
	Info_ClearChoices(dia_xardas_canbenecromok);
	Info_AddChoice(dia_xardas_canbenecromok,"Хорошо, я готов.",dia_xardas_canbenecromok_yes);
	Info_AddChoice(dia_xardas_canbenecromok,"Мне нужно подумать.",dia_xardas_canbenecromok_no);
};

func void dia_xardas_canbenecromok_yes()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_CanBeNecromOk_Yes_01_00");	//Я готов.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_01");	//Да будет так!
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_02");	//Властью, данной мне Белиаром, я принимаю тебя в ряды последователей его священного культа.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_03");	//(мрачно) И пусть багровая Тьма хранит твой путь и твою душу.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_04");	//Это все! Теперь ты часть тьмы и твоя жизнь нераздельно связана с ней.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_05");	//Но ты должен понимать, что это все еще не делает тебя полноценным темным магом!
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_06");	//Тебе еще предстоит многое узнать и многому научиться.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_07");	//Пока же прими эту робу послушника Тьмы в знак того, что теперь ты принадлежишь к нашему Кругу.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_08");	//И вот еще что. Раз ты теперь мой ученик, прими это кольцо.
	B_GiveInvItems(self,other,ITRI_XARDASPLACE,1);
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_Yes_01_09");	//Оно позволит тебе оказаться в этой башне быстрее, чем ты можешь себе представить.

	if(CanTeachTownMaster == FALSE)
	{
		CanTeachTownMaster = TRUE;
		MIS_PathFromDown = LOG_SUCCESS;
		Log_SetTopicStatus(TOPIC_PathFromDown,LOG_SUCCESS);
	};

	other.guild = GIL_NDM;
	CheckHeroGuild[0] = TRUE;
	Snd_Play("LEVELUP");
	B_GiveInvItems(self,other,itar_ndm_l,1);
	SLD_Aufnahme = LOG_OBSOLETE;
	KDF_Aufnahme = LOG_OBSOLETE;
	MIL_Aufnahme = LOG_OBSOLETE;
	MIS_PSICAMPJOIN = LOG_OBSOLETE;
	MIS_BECOMEKDW = LOG_OBSOLETE;

	Log_SetTopicStatus(TOPIC_BecomeMIL,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_BecomeSLD,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_BecomeKdF,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_PSICAMPJOIN,LOG_OBSOLETE);
	Log_SetTopicStatus(TOPIC_BECOMEKDW,LOG_OBSOLETE);

	if(MIS_SLDRESPEKT == LOG_Running)
	{
		MIS_SLDRESPEKT = LOG_OBSOLETE;
		Log_SetTopicStatus(TOPIC_SLDRespekt,LOG_OBSOLETE);
	};

	XARDAS_NDM = TRUE;
	B_LogEntry(TOPIC_BECOMEKDM,"Ксардас принял меня в послушники темных магов.");
	Info_ClearChoices(dia_xardas_canbenecromok);
};

func void dia_xardas_canbenecromok_no()
{
	AI_Output(other,self,"DIA_Xardas_CanBeNecromOk_No_01_00");	//Мне нужно подумать.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOk_No_01_01");	//Хорошо! Я не тороплю тебя с ответом. Это ответственный шаг!
	Info_ClearChoices(dia_xardas_canbenecromok);
};


instance DIA_XARDAS_CANBENECROMOKONCE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_canbenecromokonce_condition;
	information = dia_xardas_canbenecromokonce_info;
	permanent = TRUE;
	description = "Я хочу стать на путь Темного мага.";
};


func int dia_xardas_canbenecromokonce_condition()
{
	if(Npc_KnowsInfo(hero,dia_xardas_canbenecromok) && (MIS_BECOMEKDM == LOG_Running) && (XARDAS_NDM == FALSE) && (hero.guild == GIL_NONE))
	{
		return TRUE;
	};
};

func void dia_xardas_canbenecromokonce_info()
{
	AI_Output(other,self,"DIA_Xardas_CanBeNecromOkOnce_01_00");	//Я хочу стать на путь Темного мага.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_01_01");	//Ты готов дать обет Темному богу и посвятить свою жизнь изучению магии Тьмы?
	Info_ClearChoices(dia_xardas_canbenecromokonce);
	Info_AddChoice(dia_xardas_canbenecromokonce,"Хорошо, я готов.",dia_xardas_canbenecromokonce_yes);
	Info_AddChoice(dia_xardas_canbenecromokonce,"Мне нужно подумать.",dia_xardas_canbenecromokonce_no);
};

func void dia_xardas_canbenecromokonce_yes()
{
	if(hero.level >= 10)
	{
		B_GivePlayerXP(200);
		AI_Output(other,self,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_00");	//Я готов.
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_01");	//Да будет так!
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_02");	//Властью, данной мне Белиаром, я принимаю тебя в ряды последователей его священного культа.
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_03");	//(мрачно) И пусть багровая Тьма хранит твой путь и твою душу.
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_04");	//Это все! Теперь ты часть тьмы и твоя жизнь нераздельно связана с ней.
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_05");	//Но ты должен понимать, что это все еще не делает тебя полноценным темным магом!
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_06");	//Тебе еще предстоит многое узнать и многому научиться.
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_07");	//Пока же прими эту робу послушника Тьмы в знак того, что теперь ты принадлежишь к нашему Кругу.
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_08");	//И вот еще что. Раз ты теперь мой ученик, прими это кольцо.
		B_GiveInvItems(self,other,ITRI_XARDASPLACE,1);
		AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_Yes_01_09");	//Оно позволит тебе оказаться в этой башне быстрее, чем ты можешь себе представить.

		if(CanTeachTownMaster == FALSE)
		{
			CanTeachTownMaster = TRUE;
			MIS_PathFromDown = LOG_SUCCESS;
			Log_SetTopicStatus(TOPIC_PathFromDown,LOG_SUCCESS);
		};

		other.guild = GIL_NDM;
		CheckHeroGuild[0] = TRUE;
		Snd_Play("LEVELUP");
		B_GiveInvItems(self,other,itar_ndm_l,1);
		SLD_Aufnahme = LOG_OBSOLETE;
		KDF_Aufnahme = LOG_OBSOLETE;
		MIL_Aufnahme = LOG_OBSOLETE;
		MIS_PSICAMPJOIN = LOG_OBSOLETE;
		MIS_BECOMEKDW = LOG_OBSOLETE;

		Log_SetTopicStatus(TOPIC_BecomeMIL,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_BecomeSLD,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_BecomeKdF,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_PSICAMPJOIN,LOG_OBSOLETE);
		Log_SetTopicStatus(TOPIC_BECOMEKDW,LOG_OBSOLETE);

		XARDAS_NDM = TRUE;
		B_LogEntry(TOPIC_BECOMEKDM,"Ксардас принял меня в послушники темных магов.");
		Info_ClearChoices(dia_xardas_canbenecromokonce);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_No_Level_00_01");	//Но сперва тебе надо набраться опыта - у меня нет времени объяснять тебе элементарные вещи.
		B_LogEntry(TOPIC_BECOMEKDM,"Чтобы стать учеником Ксардаса, мне необходимо набраться опыта (требуется уровень героя не менее 10.");
	};
};

func void dia_xardas_canbenecromokonce_no()
{
	AI_Output(other,self,"DIA_Xardas_CanBeNecromOkOnce_No_01_00");	//Мне нужно подумать.
	AI_Output(self,other,"DIA_Xardas_CanBeNecromOkOnce_No_01_01");	//Хорошо! Я не тороплю тебя с ответом. Это ответственный шаг!
	Info_ClearChoices(dia_xardas_canbenecromokonce);
};


instance DIA_XARDAS_NDM_HOWKDM(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_howkdm_condition;
	information = dia_xardas_ndm_howkdm_info;
	permanent = FALSE;
	description = "Как мне стать истинным темным магом?";
};


func int dia_xardas_ndm_howkdm_condition()
{
	if((MIS_BECOMEKDM == LOG_Running) && (XARDAS_NDM == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_howkdm_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_HowKDM_01_00");	//Как мне стать истинным темным магом?
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_03");	//Выбранный тобою путь - не просто возможность носить мантию послушника или робу некроманта.
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_04");	//Это возможность обретения знаний, ведущих к почти безграничному могуществу!
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_07");	//Многое зависит от того, насколько крепок твой дух и насколько велика твоя мудрость!
	AI_Output(other,self,"DIA_Xardas_NDM_HowKDM_01_08");	//Что ты имеешь в виду?
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_09");	//Неподготовленного человека эти знания могут свести с ума или просто убить!
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_10");	//А я не хочу, чтобы то же самое произошло и с тобой.
	AI_Output(other,self,"DIA_Xardas_NDM_HowKDM_01_11");	//То есть, получается, что я еще не готов?
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_12");	//Да, твой дух еще слаб и не готов принять на себя столь тяжелую ношу.
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_13");	//Для того, чтобы стать истинным магом Тьмы, тебе придется провести долгое время в усердных тренировках, укрепляя свой дух и разум.
	AI_Output(self,other,"DIA_Xardas_NDM_HowKDM_01_14");	//И только после этого ты сможешь стать тем, кто по праву может назвать себя некромантом!
	B_LogEntry(TOPIC_BECOMEKDM,"Для того, чтобы Ксардас посвятил меня в темные маги, мне необходимо укрепить свою духовную силу.");
};

var int XarOneTimeDM;

instance DIA_XARDAS_NDM_MANA(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_mana_condition;
	information = dia_xardas_ndm_mana_info;
	permanent = TRUE;
	description = "Достоин ли я стать темным магом?";
};

func int dia_xardas_ndm_mana_condition()
{
	if(Npc_KnowsInfo(hero,dia_xardas_ndm_howkdm) && (MIS_BECOMEKDM == LOG_Running) && (XARDAS_AGREEDBEKDM == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_mana_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Mana_01_00");	//Достоин ли я стать темным магом?
	AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_01");	//Возможно. Сейчас я загляну в твою душу и мы узнаем ответ.

	if((other.attribute[ATR_MANA_MAX] >= 75) && (ATR_INTELLECT >= 30))
	{
		B_GivePlayerXP(300);
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_03");	//Хммм...(внимательно разглядывает)
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_04");	//ДА! Я ощущаю в тебе огромную духовную силу. А твой разум готов к испытанию Тьмой.
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_07");	//Теперь я могу тебя посвятить в тайны магии Тьмы и возвести тебя в статус Некроманта.
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_08");	//Поздравляю, ты допущен в круг избранных!
		B_LogEntry(TOPIC_BECOMEKDM,"Ксардас считает, что теперь я достоин стать некромантом.");
		XARDAS_AGREEDBEKDM = TRUE;
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_09");	//Хммм...(внимательно разглядывает)
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_10");	//Нет, ты еще не достоин.
		AI_Output(self,other,"DIA_Xardas_NDM_Mana_01_11");	//Так что не трать понапрасну мое время.

		if(XarOneTimeDM == FALSE)
		{
			B_LogEntry(TOPIC_BECOMEKDM,"По мнению Ксардаса, мне чего-то еще не хватает - или маны, или знаний. А может, мне еще просто рано постигать темную магию. (Требование: магическая энергия не менее 75 единиц, интеллект не менее 30 единиц)");
			XarOneTimeDM = TRUE;
		};

		AI_StopProcessInfos(self);
	};
};

instance DIA_Xardas_NDM_LastStand(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_NDM_LastStand_condition;
	information = DIA_Xardas_NDM_LastStand_info;
	permanent = FALSE;
	description = "Теперь ты посвятишь меня в темные маги?";
};

func int DIA_Xardas_NDM_LastStand_condition()
{
	if(Npc_KnowsInfo(hero,dia_xardas_ndm_howkdm) && (MIS_BECOMEKDM == LOG_Running) && (XARDAS_AGREEDBEKDM == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_NDM_LastStand_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_LastStand_01_01");	//Теперь ты посвятишь меня в темные маги?
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_01_02");	//Да... думаю, ты готов к обряду посвящения.
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_01_03");	//Но по древнему обычаю, каждый ученик сначала должен пройти суровое испытание. И ты не исключение.
	AI_Output(other,self,"DIA_Xardas_NDM_LastStand_01_04");	//Что мне нужно делать?
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_01_05");	//Ты должен убить самого невинного послушника магов Огня.
	AI_Output(other,self,"DIA_Xardas_NDM_LastStand_01_06");	//Что?! А другого способа нет?
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_01_07");	//Нет и быть не может. Ты и сам должен понимать, чьей смерти больше всего жаждет Темный бог. 
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_01_08");	//Белиар дает свое покровительство и силу только тем, кто всецело отдает свою душу ему в услужение.
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_01_09");	//Выполни то, о чем я тебе сказал, и обретешь могущество багровой тьмы Белиара!
	MIS_Xardas_LastStand_Done = LOG_Running;
	Log_CreateTopic(TOPIC_XARDAS_DEMON,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDAS_DEMON,LOG_Running);
	B_LogEntry(TOPIC_XARDAS_DEMON,"Ксардас посвятит меня в темные маги только после того, как я пройду последнее испытание. Для того, чтобы заслужить благосклонность Белиара, мне следует найти и убить самого невинного послушника магов Огня. Иного способа, по словам Ксардаса, не существует.");
};


instance DIA_Xardas_NDM_LastStand_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_NDM_LastStand_Done_condition;
	information = DIA_Xardas_NDM_LastStand_Done_info;
	permanent = FALSE;
	description = "Я убил послушника магов Огня!";
};

func int DIA_Xardas_NDM_LastStand_Done_condition()
{
	if((MIS_Xardas_LastStand_Done == LOG_Running) && (OpolosIsDead == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_NDM_LastStand_Done_info()
{
	B_GivePlayerXP(1000);
	AI_Output(other,self,"DIA_Xardas_NDM_LastStand_Done_01_01");	//Я убил послушника магов Огня!
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_Done_01_02");	//Хорошо. Тем самым ты доказал, что целиком и полностью на стороне Белиара.
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_Done_01_03");	//Уверен, что и сам Темный бог будет крайне доволен тобой!
	AI_Output(self,other,"DIA_Xardas_NDM_LastStand_Done_01_04");	//И теперь, как я и обещал, в любой момент могу принять тебя в круг некромантов и заклинателей демонов!
	MIS_Xardas_LastStand_Done = LOG_SUCCESS;
	B_LogEntry(TOPIC_XARDAS_DEMON,"Я справился с последним испытанием, и теперь, наконец, смогу стать темным магом.");
	Log_SetTopicStatus(TOPIC_XARDAS_DEMON,LOG_SUCCESS);
};

instance DIA_XARDAS_MAKEMEKDM(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_makemekdm_condition;
	information = dia_xardas_makemekdm_info;
	permanent = TRUE;
	description = "Посвяти меня в темные маги!";
};

func int dia_xardas_makemekdm_condition()
{
	if((MIS_BECOMEKDM == LOG_Running) && (XARDAS_AGREEDBEKDM == TRUE) && (other.guild == GIL_NDM) && (MIS_Xardas_LastStand_Done == LOG_SUCCESS))
	{
		return TRUE;
	};
};

func void dia_xardas_makemekdm_info()
{
	hero.guild = GIL_KDM;
	CheckHeroGuild[0] = TRUE;
	Mdl_ApplyOverlayMds(hero,"Humans_Mage.mds");
	AI_Output(other,self,"DIA_Xardas_MakeMeKDM_01_00");	//Посвяти меня в темные маги!
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_01");	//(властно) Хорошо! Ты доказал, что достоин этой чести.
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_02");	//Отныне ты принадлежишь к Священному Кругу темных магов - некромантов и заклинателей демонов.
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_03");	//Вот! Прими от меня эту робу в знак признания мною твоего статуса.
	CreateInvItems(self,itar_dmt_l,1);
	B_GiveInvItems(self,other,itar_dmt_l,1);
	MIS_BECOMEKDM = LOG_SUCCESS;
	BELIARPRAYCOUNT = BELIARPRAYCOUNT + 30;
	Snd_Play("GUILD_INV");
	Log_SetTopicStatus(TOPIC_BECOMEKDM,LOG_SUCCESS);
	B_LogEntry(TOPIC_BECOMEKDM,"Я обрел статус темного мага - некроманта и заклинателя демонов. Мой путь теперь неотрывно связан с Тьмой!");
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_04");	//И этот магический посох. Только нам, магам Тьмы дарована честь обладать им и распоряжаться его силой!
	CreateInvItems(self,ITMW_2H_KMR_BLACKSTAFF_01,1);
	B_GiveInvItems(self,other,ITMW_2H_KMR_BLACKSTAFF_01,1);
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_05");	//Теперь твоя судьба неотрывно связана с багровой тьмой Белиара! Помни об этом.
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_06");	//Черпай в ней свои силы и впитывай ее мудрость, как молоко матери.
	AI_Output(self,other,"DIA_Xardas_MakeMeKDM_01_07");	//И пусть она хранит твой путь!
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_NDM_ABOUTDARKMAGIC(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_aboutdarkmagic_condition;
	information = dia_xardas_ndm_aboutdarkmagic_info;
	permanent = TRUE;
	description = "Расскажи мне о магии Тьмы.";
};


func int dia_xardas_ndm_aboutdarkmagic_condition()
{
	if((XARDAS_NDM == TRUE) && (XARDASMENTIONABOUTDEMONOLOG == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_aboutdarkmagic_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_AboutDarkMagic_01_00");	//Расскажи мне о магии Тьмы.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_04");	//Магия Белиара - одна из самых зловещих и разрушительных магий из всех, что существуют в этом мире!
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_05");	//Ведь по своей силе разрушения с ней не сравнится ни одна другая.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_06");	//А ее единственная цель заключается лишь в том, чтобы порабощать и уничтожать!
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_10");	//Но ты должен понимать, что обладать такой властью под силу лишь опытному магу.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_11");	//Новичка она, скорее всего, просто убьет... Магия Тьмы коварна, так же как и сам Белиар.
	if(other.guild == GIL_KDM)
	{
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_13");	//Это еще не все.
		AI_Output(other,self,"DIA_Xardas_NDM_AboutDarkMagic_01_14");	//Что еще?
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_15");	//При тех преимуществах, которые открывает перед тобой изучение темной магии, нельзя не отметить еще одну ее особенность.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_17");	//Только магия темных рун позволит тебе призывать к себе различных существ Тьмы.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_18");	//Но здесь также есть свои трудности.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_20");	//Призванные тобой существа иногда просто могут отказаться подчиняться тебе.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_22");	//Ты можешь оказаться слишком слаб, чтобы повелевать ими.
		AI_Output(other,self,"DIA_Xardas_NDM_AboutDarkMagic_01_23");	//И что тогда?
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_24");	//Если это случится, то, скорее всего, тебя просто попытаются убить.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_28");	//Существа Тьмы очень сильны и опасны. Не говоря уже о демонах.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_33");	//Запомни одну очень важную вещь - ключ к успеху в этом деле кроется в твоем могуществе.
		AI_Output(other,self,"DIA_Xardas_NDM_AboutDarkMagic_01_34");	//Что это значит?
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_35");	//Это значит, что чем опытнее ты будешь становиться, тем больше у тебя будет шансов подчинить своей воле вызванное тобой существо.
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_36");	//И, соответственно, тем больше оно будет служить тебе!
		XARDASMENTIONABOUTDEMONOLOG = TRUE;
	}
	else
	{
		AI_Output(other,self,"DIA_Xardas_NDM_AboutDarkMagic_01_38");	//Понятно. Что-нибудь еще?
		AI_Output(self,other,"DIA_Xardas_NDM_AboutDarkMagic_01_39");	//Нет, это все. Остальное ты узнаешь, когда сам станешь темным магом.
	};
};


instance DIA_XARDAS_NDM_ABOUTDEMONOLOG(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_aboutdemonolog_condition;
	information = dia_xardas_ndm_aboutdemonolog_info;
	permanent = TRUE;
	description = "Расскажи мне о демонах.";
};


func int dia_xardas_ndm_aboutdemonolog_condition()
{
	if((hero.guild == GIL_KDM) && (XARDASMENTIONABOUTDEMONOLOG == TRUE) && (XARDASTELLABOUTDEMONOLOG == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_aboutdemonolog_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_AboutDemonolog_01_00");	//Расскажи мне о демонах.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_01");	//Хорошо. Демоны - это отдельный вид темных существ и самые страшные порождения Белиара!
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_04");	//Они самые опасные создания, которых можно встретить в нашем мире, не считая драконов.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_08");	//Демоны обладают высоким иммунитетом к магии, и подчинить их своей воле крайне сложно!
	AI_Output(other,self,"DIA_Xardas_NDM_AboutDemonolog_01_09");	//Может, есть способ исправить это?
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_10");	//Для этого в темной магии существует отдельная область знаний - демонология.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_12");	//Изучив ее, ты откроешь для себя способность призывать этих ужасных существ в этот мир.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_13");	//И кроме того, знания демонологии позволят тебе научиться создавать руну, которая поможет тебе в этом.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_14");	//Однако воспользоваться ее силой ты сможешь только один раз. После этого сила руны иссякнет.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_17");	//Впоследствии знание демонологии позволит тебе призывать высших демонов!
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_18");	//Они на порядок сильнее своих обычных собратьев и это дает куда больше преимуществ.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_19");	//Однако подчинить их своей воле будет также намного сложнее!
	AI_Output(other,self,"DIA_Xardas_NDM_AboutDemonolog_01_20");	//А ты можешь обучить меня демонологии?
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_21");	//Поскольку ты являешься темным магом, я объясню тебе основные принципы демонологии и научу тебя создавать руну вызова этих созданий.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_22");	//Правда, овладеть ее силой ты сможешь только тогда, когда откроешь для себя четвертый круг магии.
	AI_Output(self,other,"DIA_Xardas_NDM_AboutDemonolog_01_23");	//И естественно, для того чтобы постичь все эти знания, тебе понадобится иметь достаточно опыта.
	XARDASTELLABOUTDEMONOLOG = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry(TOPIC_ADDON_DMTTEACHER,"Ксардас сможет обучить меня искусству демонологии, знания которой даруют мне способность призывать к себе демонов.");
};


instance DIA_XARDAS_NDM_TEACHDEMONOLOG(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 997;
	condition = dia_xardas_ndm_teachdemonolog_condition;
	information = dia_xardas_ndm_teachdemonolog_info;
	permanent = TRUE;
	description = "Обучи меня искусству демонологии.";
};


func int dia_xardas_ndm_teachdemonolog_condition()
{
	if((hero.guild == GIL_KDM) && (XARDASTELLABOUTDEMONOLOG == TRUE) && ((XARDASTEACHCASTDEMON_SIMPLE == FALSE) || (XARDASTEACHCASTDEMON_LORD == FALSE)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_teachdemonolog_info()
{
	AI_Output(other,self,"DIA_Hokurn_Teach_15_00");	//Давай начнем обучение.
	AI_Output(self,other,"DIA_Xardas_NDM_TeachDemonolog_01_01");	//Если ты считаешь, что готов к этому - я научу тебе всему, что знаю сам.
	Info_ClearChoices(dia_xardas_ndm_teachdemonolog);
	Info_AddChoice(dia_xardas_ndm_teachdemonolog,Dialog_Back,dia_xardas_ndm_teachdemonolog_back);

	if((XARDASTEACHCASTDEMON_SIMPLE == FALSE) && (XARDASTEACHCASTDEMON_LORD == FALSE))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog("Изучить демонологию.",B_GetLearnCostTalent(other,NPC_TALENT_DEMONOLOG,1)),dia_xardas_ndm_teachdemonolog_simple);
	};
	if((XARDASTEACHCASTDEMON_SIMPLE == TRUE) && (XARDASTEACHCASTDEMON_LORD == FALSE) && (	DemonologSkill[0] >= 3))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog("Изучить высшую демонологию.",B_GetLearnCostTalent(other,NPC_TALENT_DEMONOLOG,1)),dia_xardas_ndm_teachdemonolog_high);
	};
};

func void dia_xardas_ndm_teachdemonolog_back()
{
	if(XARDASTEACHCASTDEMON_LORD == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_NDM_TeachDemonolog_BACK_01_00");	//Теперь в твоей власти призывать самих высших демонов.
		AI_Output(self,other,"DIA_Xardas_NDM_TeachDemonolog_BACK_01_01");	//Но будь осторожен! Помни, что подчинить этих созданий невероятно трудно.
		AI_Output(self,other,"DIA_Xardas_NDM_TeachDemonolog_BACK_01_02");	//Ошибка в этом деле равнозначна неминуемой гибели.
	};
	Info_ClearChoices(dia_xardas_ndm_teachdemonolog);
};

func void dia_xardas_ndm_teachdemonolog_simple()
{
	if(b_teachdemonologtalent(self,other,NPC_TALENT_DEMONOLOG))
	{
		XARDASTEACHCASTDEMON_SIMPLE = TRUE;
	};
	Info_ClearChoices(dia_xardas_ndm_teachdemonolog);
	Info_AddChoice(dia_xardas_ndm_teachdemonolog,Dialog_Back,dia_xardas_ndm_teachdemonolog_back);

	if((XARDASTEACHCASTDEMON_SIMPLE == FALSE) && (XARDASTEACHCASTDEMON_LORD == FALSE))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog("Изучить демонологию.",B_GetLearnCostTalent(other,NPC_TALENT_DEMONOLOG,1)),dia_xardas_ndm_teachdemonolog_simple);
	};
	if((XARDASTEACHCASTDEMON_SIMPLE == TRUE) && (XARDASTEACHCASTDEMON_LORD == FALSE) && (	DemonologSkill[0] >= 3))
	{
		Info_AddChoice(dia_xardas_ndm_teachdemonolog,b_buildlearnstringfordemonolog("Изучить высшую демонологию.",B_GetLearnCostTalent(other,NPC_TALENT_DEMONOLOG,1)),dia_xardas_ndm_teachdemonolog_high);
	};
};

func void dia_xardas_ndm_teachdemonolog_high()
{
	if(b_teachdemonologtalent(self,other,NPC_TALENT_DEMONOLOG))
	{
		AI_Output(self,other,"DIA_Xardas_NDM_TeachDemonolog_High_01_00");	//Познай данную тебе силу и тебе откроется истинное могущество!
		XARDASTEACHCASTDEMON_LORD = TRUE;
	};
	Info_ClearChoices(dia_xardas_ndm_teachdemonolog);
	Info_AddChoice(dia_xardas_ndm_teachdemonolog,Dialog_Back,dia_xardas_ndm_teachdemonolog_back);
};


instance DIA_XARDAS_NDM_PROOF(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_proof_condition;
	information = dia_xardas_ndm_proof_info;
	permanent = FALSE;
	description = "Чем еще я могу тебе доказать, что достоин стать магом Тьмы?";
};


func int dia_xardas_ndm_proof_condition()
{
	if(Npc_KnowsInfo(hero,dia_xardas_ndm_howkdm) && (MIS_BECOMEKDM == LOG_Running))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_proof_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Proof_01_00");	//Чем еще я могу тебе доказать, что достоин стать магом Тьмы?
	AI_Output(self,other,"DIA_Xardas_NDM_Proof_01_01");	//Только сила твоего духа может сделать тебя достойным этой чести.
	AI_Output(self,other,"DIA_Xardas_NDM_Proof_01_02");	//К тому же, у меня нет никакой необходимости проверять, на что ты способен.
	AI_Output(self,other,"DIA_Xardas_NDM_Proof_01_03");	//Ты мне это уже доказал.
};


instance DIA_XARDAS_NDM_TASKS(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_condition;
	information = dia_xardas_ndm_tasks_info;
	permanent = FALSE;
	description = "У тебя будут для меня какие-нибудь поручения?";
};


func int dia_xardas_ndm_tasks_condition()
{
	if((hero.guild == GIL_KDM) || (Npc_KnowsInfo(hero,dia_xardas_ndm_howkdm) && (MIS_BECOMEKDM == LOG_Running)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_01_00");	//У тебя будут для меня какие-нибудь поручения?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_01");	//Хммм... Поскольку теперь ты мой ученик, у меня действительно найдется для тебя парочка каких-нибудь простеньких поручений.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_02");	//Однако ты должен помнить, что главное - это угроза со стороны драконов. Это твоя основная цель!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_03");	//Ладно, теперь о самом поручении...
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_04");	//Для экспериментов мне требуется большое количество различных ингредиентов, большую часть из которых ты не найдешь в простой торговой лавке.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_05");	//У меня не так много свободного времени, чтобы искать их самому. И я хочу, чтобы ты приносил мне эти самые ингредиенты.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_06");	//Меня, как некроманта, больше всего интересуют человеческие останки - мертвая плоть, кости и черепа. Последнее особенно предпочтительно.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_07");	//Но самое ценное для меня - это сердце демона! Его достать будет сложнее всего.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_01_08");	//Если вдруг у тебя при себе окажется что-то из вышеперечисленного, можешь смело приносить это мне.
	XARDASTASKSBEGUN = TRUE;
	XARDASBUYBONES = TRUE;
	Log_CreateTopic(TOPIC_ADDON_DMTTEACHER,LOG_NOTE);
	B_LogEntry(TOPIC_ADDON_DMTTEACHER,"Ксардасу нужны ингредиенты для экспериментов. В основном, его интересуют человеческие останки - мертвая плоть, кости, черепа и сердца демонов.");
};


instance DIA_XARDAS_BUYBONES(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 600;
	condition = dia_xardas_buybones_condition;
	information = dia_xardas_buybones_info;
	permanent = TRUE;
	description = "У меня есть несколько нужных тебе ингредиентов...";
};


func int dia_xardas_buybones_condition()
{
	if(XARDASBUYBONES == TRUE)
	{
		if((Npc_HasItems(hero,ItMi_Skull) > 0) || (Npc_HasItems(hero,ItMi_Plazma) > 0) || (Npc_HasItems(hero,ItAt_GoblinBone) > 0) || (Npc_HasItems(hero,ItAt_SkeletonBone) > 0) || (Npc_HasItems(hero,itmi_zombiecorpse) > 0) || (Npc_HasItems(hero,ItAt_DemonHeart) > 0))
		{
			return TRUE;
		};
	};
};

func void dia_xardas_buybones_info()
{
	var int countexp;
	var int goldplus;
	AI_Output(other,self,"DIA_Xardas_BuyBones_01_00");	//У меня есть несколько нужных тебе ингредиентов...
	AI_Output(self,other,"DIA_Xardas_BuyBones_01_01");	//Превосходно! Тогда давай взглянем на них.

	if(Npc_HasItems(other,ItAt_GoblinBone) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItAt_GoblinBone);
		B_GiveInvItems(other,self,ItAt_GoblinBone,Npc_HasItems(other,ItAt_GoblinBone));
		Npc_RemoveInvItems(self,ItAt_GoblinBone,Npc_HasItems(self,ItAt_GoblinBone));
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_02");	//Хммм... кажется, это кости гоблина.
		AI_Output(other,self,"DIA_Xardas_BuyBones_01_03");	//Они пригодятся тебе?
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_04");	//Вполне. Хотя это и не совсем то, на что я рассчитывал.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 6);
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_08");	//Что ты еще мне принес?
	};
	if(Npc_HasItems(other,ItAt_SkeletonBone) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItAt_SkeletonBone);
		B_GiveInvItems(other,self,ItAt_SkeletonBone,Npc_HasItems(other,ItAt_SkeletonBone));
		Npc_RemoveInvItems(self,ItAt_SkeletonBone,Npc_HasItems(self,ItAt_SkeletonBone));
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_09");	//Так, так... похоже, это кости скелета. Совсем неплохо!
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_10");	//Хотя, конечно, ты мог бы принести их немного больше.
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_12");	//Ладно, думаю, на первое время этого должно хватить.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 8);
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_16");	//Что-нибудь еще?
	};
	if(Npc_HasItems(other,itmi_zombiecorpse) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,itmi_zombiecorpse);
		B_GiveInvItems(other,self,itmi_zombiecorpse,Npc_HasItems(other,itmi_zombiecorpse));
		Npc_RemoveInvItems(self,itmi_zombiecorpse,Npc_HasItems(self,itmi_zombiecorpse));
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_33");	//Мертвая плоть - очень ценный ингредиент.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 15);
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_36");	//Что еще тут у нас?
	};
	if(Npc_HasItems(other,ItMi_Plazma) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItMi_Plazma);
		B_GiveInvItems(other,self,ItMi_Plazma,Npc_HasItems(other,ItMi_Plazma));
		Npc_RemoveInvItems(self,ItMi_Plazma,Npc_HasItems(self,ItMi_Plazma));
		AI_Output(other,self,"DIA_Xardas_HarmUndead_Done_01_01");	//Я принес тебе эктоплазму.
		AI_Output(self,other,"DIA_Xardas_HarmUndead_Done_01_02");	//(довольно) Неплохо, очень неплохо!
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 50);
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_08");	//Что ты еще мне принес?
	};
	if(Npc_HasItems(other,ItMi_Skull) > 0)
	{
		AI_Wait(self,1);
		goldplus = Npc_HasItems(other,ItMi_Skull);
		B_GiveInvItems(other,self,ItMi_Skull,Npc_HasItems(other,ItMi_Skull));
		Npc_RemoveInvItems(self,ItMi_Skull,Npc_HasItems(self,ItMi_Skull));
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_17");	//Хммм... вижу, твои поиски не прошли напрасно. Череп - довольно редкий ингредиент.
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_19");	//Твои старания будут оценены по достоинству.
		B_GiveInvItems(self,other,ItMi_Gold,goldplus * 250);
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_21");	//Что еще у тебя есть?
	};
	if(Npc_HasItems(other,ItAt_DemonHeart) > 0)
	{
		AI_Wait(self,1);
		GOLDPLUSDEM = Npc_HasItems(other,ItAt_DemonHeart);
		B_GiveInvItems(other,self,ItAt_DemonHeart,Npc_HasItems(other,ItAt_DemonHeart));
		Npc_RemoveInvItems(self,ItAt_DemonHeart,Npc_HasItems(self,ItAt_DemonHeart));
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_22");	//Невероятно!
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_25");	//Сердце демона - самый ценный ингредиент, который ты только мог принести.
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_26");	//Ты отлично поработал и достоин особенной награды.
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_27");	//Итак, выбор за тобой...
		Info_ClearChoices(dia_xardas_buybones);
		Info_AddChoice(dia_xardas_buybones,"Увеличить магическую энергию.",dia_xardas_buybones_mana);
		Info_AddChoice(dia_xardas_buybones,"Увеличить жизненную энергию.",dia_xardas_buybones_life);
		Info_AddChoice(dia_xardas_buybones,"Взять золото.",dia_xardas_buybones_gold);
	}
	else
	{
		if(countexp > 0)
		{
			B_GivePlayerXP(countexp);
		};
		AI_Output(other,self,"DIA_Xardas_BuyBones_01_28");	//Это все.
		AI_Output(self,other,"DIA_Xardas_BuyBones_01_29");	//Хорошо! Возвращайся, когда у тебя будут еще нужные мне ингредиенты.
	};
};

func void dia_xardas_buybones_mana()
{
	B_RaiseAttribute_Bonus(other,ATR_MANA_MAX,GOLDPLUSDEM * 2);
	AI_Output(other,self,"DIA_Xardas_BuyBones_Mana_01_00");	//Как скажешь.
	Info_ClearChoices(dia_xardas_buybones);
};

func void dia_xardas_buybones_life()
{
	B_RaiseAttribute_Bonus(other,ATR_HITPOINTS_MAX,GOLDPLUSDEM * 5);
	AI_Output(other,self,"DIA_Xardas_BuyBones_Life_01_00");	//Как скажешь.
	Info_ClearChoices(dia_xardas_buybones);
};

func void dia_xardas_buybones_gold()
{
	B_GiveInvItems(self,other,ItMi_Gold,GOLDPLUSDEM * 300);
	AI_Output(other,self,"DIA_Xardas_BuyBones_Gold_01_00");	//Как скажешь.
	Info_ClearChoices(dia_xardas_buybones);
};


instance DIA_XARDAS_NDM_TASKS_ONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_condition;
	information = dia_xardas_ndm_tasks_one_info;
	permanent = FALSE;
	description = "Что за поручения?";
};


func int dia_xardas_ndm_tasks_one_condition()
{
	if(XARDASTASKSBEGUN == TRUE)
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_01_00");	//Что за поручения?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_01");	//Для начала не особо сложное. Как ты знаешь, раньше я состоял в ордене магов Огня.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_01_02");	//Да, ты говорил об этом.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_03");	//Так вот, в те времена, будучи служителем Инноса, я занимался одним очень любопытным с точки зрения магии исследованием.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_04");	//На тот момент я достиг в этом серьезных успехов. Но, к сожалению, так и не успел довести дело до конца.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_05");	//А покидая орден, мне пришлось оставить в монастыре все записи, связанные с этими экспериментами. О чем позже я очень пожалел.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_01_06");	//Но почему ты сразу не взял их с собой?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_07");	//Тогда я не предполагал, что когда-нибудь они мне так понадобятся.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_08");	//Я хочу вернуть себе эти записи! Отправляйся в монастырь и забери их оттуда.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_01_09");	//Хорошо, попробую.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_10");	//Никаких 'попробую'! (серьезно) Просто сделай это...
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_01_11");	//Ну, раз у меня нет выбора, подскажи - где именно их искать?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_12");	//Часть документов хранилась в монастырской библиотеке. Попасть туда будет нелегко - ключи от нее есть только у самих магов Огня.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_13");	//(ухмыляясь) Но я уверен, тебе удастся что-нибудь придумать.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_14");	//Остальные записи наверняка так и пылятся в моей старой келье. А ключ у меня до сих пор с собой - вот, держи.
	B_GiveInvItems(self,other,ItKe_KDFPlayer,1);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_01_15");	//Ты в этом уверен? За столько лет их могли где угодно запрятать.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_16");	//Не думаю. Пирокар и другие маги считали, что эти исследования - пустая трата времени.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_17");	//Для них эти документы никогда не представляли особой ценности. И вряд ли с тех пор что-то изменилось.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_01_18");	//Ладно, ступай уже и достань мне эти бумаги.
	Mob_CreateItems("BOOKSHELF_CONT_7",itwr_xardasdocs_2,1);
	Mob_CreateItems("BOOKSHELF_CONT_10",itwr_xardasdocs_1,1);
	MIS_XARDASNDMTASKSONE = LOG_Running;
	Log_CreateTopic(TOPIC_XARDASNDMTASKSONE,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSONE,LOG_Running);
	B_LogEntry(TOPIC_XARDASNDMTASKSONE,"Ксардас поручил мне достать его старые рукописи, которые хранятся в монастыре магов Огня. Похоже, часть эти документов должна находиться в библиотеке, а другая - в его старой келье.");
};


instance DIA_XARDAS_NDM_TASKS_ONE_DONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_done_condition;
	information = dia_xardas_ndm_tasks_one_done_info;
	permanent = FALSE;
	description = "Я принес твои рукописи.";
};


func int dia_xardas_ndm_tasks_one_done_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_Running) && (Npc_HasItems(hero,itwr_xardasdocs_1) >= 1) && (Npc_HasItems(hero,itwr_xardasdocs_2) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_done_info()
{
	B_GivePlayerXP(50);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_00");	//Я принес твои рукописи.
	b_giveinvitemsmanythings(other,self);
	Npc_RemoveInvItems(other,itwr_xardasdocs_1,1);
	Npc_RemoveInvItems(other,itwr_xardasdocs_2,1);
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_01");	//(разглядывая) Да, это действительно то, что мне было нужно.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_02");	//И что ты собираешься делать теперь?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_03");	//Теперь я намерен завершить, наконец, свое исследование, а найденные тобой бумаги очень помогут мне в этом.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_04");	//А что в них записано?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_05");	//(сердито) Ты слишком любопытен! И потом - не думаю, что ты сможешь до конца понять суть моих изысканий.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_06");	//Так ты сначала попробуй.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_07");	//Вот ведь наглец! Хммм... хорошо. В этих рукописях записана приблизительная формула одного сложного магического заклинания, над которым я работал многие годы.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_08");	//А что это за заклинание?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_09");	//Оно напоминает то, которое ты использовал для переноса энергии магической руды в Уризель, перед тем как отправиться в храм Спящего.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_10");	//Ага! Вроде бы, все понятно.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_11");	//Да, однако на сей раз цель заклинания несколько иная. Оно позволит тебе забрать всю магическую силу любого существа!
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_12");	//Но зачем тебе это?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_13");	//(сердито) А вот это тебя уже не касается! И мне кажется, ты задаешь слишком много вопросов.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_14");	//Мне просто интересно.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_15");	//(ехидно) Безусловно! Однако сейчас тебя должно волновать другое.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Done_01_16");	//Опять ты за свое - я не забыл про драконов!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Done_01_17");	//Зачем тогда ты докучаешь мне своими бесконечными вопросами? Лучше иди и займись делом.
	RUKOPISI1 = TRUE;
	XARDASTIMERBENDM = Wld_GetDay();
	B_LogEntry(TOPIC_XARDASNDMTASKSONE,"Я принес Ксардасу его старые записи.");
};

instance DIA_XARDAS_NDM_TASKS_ONE_NEW(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_new_condition;
	information = dia_xardas_ndm_tasks_one_new_info;
	important = TRUE;
	permanent = FALSE;
};

func int dia_xardas_ndm_tasks_one_new_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_Running) && (RUKOPISI1 == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_new_info()
{
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_01");	//(гневно) Постой!
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_02");	//Что такое?
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_03");	//Вторая часть рукописи, которую ты мне принес, на самом деле ни что иное, как дешевая подделка! Странно, что я не сразу этого заметил.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_04");	//Как такое может быть?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_05");	//Не знаю и знать не хочу! Единственное, что в данный момент меня интересует, это моя подлинная рукопись, которой у меня сейчас нет.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_06");	//Но где теперь ее искать?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_07");	//Хммм... Наверняка ее умыкнул кто-то из не в меру любопытных магов Огня!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_08");	//Сомневаюсь, что кто-то из этих лицемеров признается, что его заинтересовали запрещенные знания. Но ничего не остается, кроме как поспрашивать у них.
	RUK3 = TRUE;
	B_LogEntry(TOPIC_XARDASNDMTASKSONE,"Вторая часть рукописей оказалась подделкой. Теперь мне нужно найти подлинник. Ксардас убежден, что об этом могут знать лишь маги Огня.");
	AI_StopProcessInfos(self);
};

instance DIA_XARDAS_NDM_TASKS_ONE_NEW1(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_new1_condition;
	information = dia_xardas_ndm_tasks_one_new1_info;
	permanent = FALSE;
	description = "Я нашел подлинную рукопись.";
};

func int dia_xardas_ndm_tasks_one_new1_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_Running) && (Npc_HasItems(hero,itwr_xardasdocs_3) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_new1_info()
{
	B_GivePlayerXP(150);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_09");	//Я нашел подлинную рукопись.
	B_GiveInvItems(other,self,itwr_xardasdocs_3,1);
	Npc_RemoveInvItems(self,itwr_xardasdocs_3,1);
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_10");	//И где же?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_11");	//У мага Огня по имени Тревиус. К сожалению, он мертв.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_12");	//Это ты его убил?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_New_01_13");	//Нет, конечно! Я нашел его в одной из пещер, а рядом с его телом находился настоящий демон.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_14");	//Теперь мне все ясно...(насмешливо) Вот что значит совать свой нос в чужие тайны!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_New_01_15");	//Но сейчас это уже не столь важно. Рукопись вернулась ко мне, и я могу продолжить свои исследования!
	B_GiveInvItems(self,hero,ItMi_Gold,1000);
	MIS_XARDASNDMTASKSONE = LOG_SUCCESS;
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSONE,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDASNDMTASKSONE,"Я принес Ксардасу настоящую половину рукописи.");
};

instance DIA_XARDAS_NDM_TASKS_ONE_TWO(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_two_condition;
	information = dia_xardas_ndm_tasks_one_two_info;
	permanent = TRUE;
	description = "Для меня еще будут поручения?";
};

func int dia_xardas_ndm_tasks_one_two_condition()
{
	if((MIS_XARDASNDMTASKSONE == LOG_SUCCESS) && (MIS_XARDASNDMTASKSTWO == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_two_info()
{
	var int daynow;

	daynow = Wld_GetDay();
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Two_01_00");	//Для меня еще будут поручения?

	if((XARDASTIMERBENDM <= (daynow - 1)) && !Npc_IsDead(vlk_6027_taliasan))
	{
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_01");	//Да, ты как раз вовремя! На днях я просмотрел записи, которые ты мне принес из монастыря.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_02");	//Они, конечно, помогли мне в моем исследовании, но вместе с этим возникло еще больше непонятных вопросов, на которые я не в силах дать ответы.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_03");	//Полагаю, чтобы отчасти разобраться с ними, мне понадобится еще одна вещь. Или несколько. Но я знаю точно, с чего стоит начать.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Two_01_04");	//С чего?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_05");	//Меня интересует довольно редкая книга, известная как 'Напрасный путь'.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_06");	//Если мне не изменяет память, когда-то ею владел один маг, имя которого я, к сожалению, уже забыл.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_07");	//Однако просто так он ее не отдаст - слишком уж дорожил этим сокровищем. В свое время я уже пытался заполучить у него этот фолиант.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Two_01_08");	//А где мне искать этого мага?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_09");	//Если бы я знал это, то не просил бы тебя о помощи!
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_10");	//А просто послал бы к нему пару своих слуг, которые убедили бы его отдать мне книгу.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Two_01_11");	//На тебя это похоже. Ну, а тебе еще что-нибудь о нем известно?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_12");	//Я как раз вспомнил, что некогда он служил городским магом в Хоринисе. Наверняка в городе кто-нибудь знает, где его можно найти.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_Two_01_13");	//Ладно, постараюсь найти этого мага и принести тебе книгу.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_14");	//Уж постарайся! (ехидно) Ты ведь не позволишь мне разочароваться в своем решении взять тебя в ученики?
		MIS_XARDASNDMTASKSTWO = LOG_Running;
		Log_CreateTopic(TOPIC_XARDASNDMTASKSTWO,LOG_MISSION);
		Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_Running);
		if(TALIASANTELLWHOMAGE == TRUE)
		{
			B_LogEntry(TOPIC_XARDASNDMTASKSTWO,"Теперь Ксардас хочет, чтобы я достал ему одну редкую книгу под названием 'Напрасный путь'. Если верить его словам, последним хозяином этой реликвии был один маг, который жил в Хоринисе. Если где и можно достать эту книгу, то только у него. Уж ни бывшего ли городского мага - Галлахада, Ксардас имел в виду?!");
		}
		else
		{
			B_LogEntry(TOPIC_XARDASNDMTASKSTWO,"Теперь Ксардас хочет, чтобы я достал ему одну редкую книгу под названием 'Напрасный путь'. Если верить его словам, последним хозяином этой реликвии был один маг, который жил в Хоринисе. Если где и можно достать эту книгу, то только у него. Правда Ксардас не смог мне сказать, где искать этого мага.");
		};
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_Two_01_28");	//(ворчливо) Пока нет. Может быть позже.
	};
};


instance DIA_XARDAS_NDM_TASKS_ONE_TWODONEKILL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_one_twodonekill_condition;
	information = dia_xardas_ndm_tasks_one_twodonekill_info;
	permanent = FALSE;
	description = "Я нашел того мага.";
};


func int dia_xardas_ndm_tasks_one_twodonekill_condition()
{
	if((MIS_XARDASNDMTASKSTWO == LOG_Running) && !Npc_IsDead(vlk_6027_taliasan) && (XARDASBRIGBOOKSPECIAL == FALSE) && ((XARDASMISSBOOKFOREVER == TRUE) || (XARDASMISSBOOK == TRUE)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_one_twodonekill_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_01");	//Я нашел того мага. Его зовут Галлахад.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_02");	//Ах да... теперь и я его вспомнил. И где же он сейчас?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_03");	//Он живет в городе.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_04");	//А что насчет книги, которую я просил принести?
	TELLABOUTGALLAHAD = TRUE;
	if(XARDASMISSBOOKFOREVER == TRUE)
	{
		B_GivePlayerXP(100);
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_05");	//У него ее нет.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_06");	//Как это нет?!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_07");	//Галлахад сказал, что давно ее продал одному странствующему торговцу и...
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_08");	//Что?! И ты поверил ему?
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_09");	//Ну...
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_10");	//Глупец! Он же обвел тебя вокруг пальца как сопливого мальчишку! Только идиот мог бы променять знания на деньги!
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_11");	//И к тому же, Галлахад - маг, хоть и никудышный! Для любого из нас тайны магии куда важнее, чем тусклый блеск презренного металла. Он бы никогда так не поступил!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_12");	//И что теперь делать?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_13");	//(ворчливо) Тебе - ничего. А я пошлю к этому червяку парочку своих демонов. Думаю, они смогут убедить его отдать мне эту книгу.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_14");	//Можешь пока заняться более насущными делами. Но будь готов, что мне еще понадобятся твои услуги.
		MIS_XARDASNDMTASKSTWO = LOG_FAILED;
		XARDASTIMERQUEST = Wld_GetDay();
		B_LogEntry_Failed(TOPIC_XARDASNDMTASKSTWO);
		B_KillNpc(vlk_6027_taliasan);
	}
	else if(XARDASMISSBOOK == TRUE)
	{
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_15");	//Она до сих пор у него, но Галлахад не захотел мне ее отдать.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_16");	//Для него же хуже! Посмотрим, как он заговорит, когда я пришлю к нему парочку своих демонов.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_17");	//Думаю, они смогут убедить его отдать мне эту книгу.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_18");	//Не слишком ли крутые меры?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_01_19");	//(гневно) Ты еще будешь меня учить, что делать?
		Info_ClearChoices(dia_xardas_ndm_tasks_one_twodonekill);
		Info_AddChoice(dia_xardas_ndm_tasks_one_twodonekill,"Нет, что ты! Поступай как знаешь.",dia_xardas_ndm_tasks_one_twodonekill_killgalah);
		Info_AddChoice(dia_xardas_ndm_tasks_one_twodonekill,"Думаю, я сам смогу уладить эту проблему.",dia_xardas_ndm_tasks_one_twodonekill_dontworry);
	};
};

func void dia_xardas_ndm_tasks_one_twodonekill_killgalah()
{
	B_GivePlayerXP(300);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_KillGalah_01_01");	//Нет, что ты! Поступай как знаешь.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_KillGalah_01_02");	//(ехидно) Вот именно.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_KillGalah_01_03");	//Можешь пока заняться более насущными делами. Но будь готов, что мне еще понадобятся твои услуги.
	B_KillNpc(vlk_6027_taliasan);
	MIS_XARDASNDMTASKSTWO = LOG_SUCCESS;
	XARDASTIMERQUEST = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDASNDMTASKSTWO,"Ксардас собирается послать к Галлахаду пару своих демонов, чтобы выбить из него книгу. Кажется, Галлахаду конец!");
	Info_ClearChoices(dia_xardas_ndm_tasks_one_twodonekill);
};

func void dia_xardas_ndm_tasks_one_twodonekill_dontworry()
{
	B_GivePlayerXP(150);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_01");	//Просто я думаю, что смогу сам уладить эту проблему.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_02");	//(недоверчиво) Ты в этом уверен?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_03");	//Абсолютно! Да и потом, я не думаю, что Галлахад заслужил такой участи.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_One_TwoDoneKill_DontWorry_01_04");	//Хорошо. Но смотри, без книги ко мне не возвращайся, иначе мои демоны займутся тобой!
	B_LogEntry(TOPIC_XARDASNDMTASKSTWO,"Я поведал Ксардасу о моем разговоре с Галлахадом. Выслушав меня, Ксардас уже хотел послать к магу пару своих демонов, чтобы выбить из него книгу. Но я сумел отговорить его от этой идеи. Теперь мне стоит подумать о том, как достать эту книгу.");
	Info_ClearChoices(dia_xardas_ndm_tasks_one_twodonekill);
};


instance DIA_XARDAS_NDM_TASKS_TWO_DONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_two_done_condition;
	information = dia_xardas_ndm_tasks_two_done_info;
	permanent = FALSE;
	description = "Книга у меня!";
};


func int dia_xardas_ndm_tasks_two_done_condition()
{
	if((MIS_XARDASNDMTASKSTWO == LOG_Running) && (Npc_HasItems(hero,itwr_umsonst_01) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_two_done_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_Done_01_01");	//Книга у меня!
	B_GiveInvItems(other,self,itwr_umsonst_01,1);
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_Done_01_02");	//(гневно) Я так и думал - нескольких страниц не хватает!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_Done_01_03");	//Но можешь не корить себя в этом - твоей вины здесь нет. Я сам должен был догадаться!
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_Done_01_04");	//И что теперь?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_Done_01_05");	//Надеюсь, эта неприятность не помешает мне продолжить свой эксперимент...(задумчиво) Хотя об этом говорить пока рано.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_Done_01_06");	//Мне нужно изучить все, что здесь написано. А ты пока можешь заняться более насущными делами.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_Done_01_07");	//Но будь готов, мне еще понадобятся твои услуги.
	MIS_XARDASNDMTASKSTWO = LOG_SUCCESS;
	XARDASTIMERQUEST = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDASNDMTASKSTWO,"Я принес Ксардасу книгу, которую он искал. Однако это его не очень обрадовало: в книге отсутствует несколько очень важных страниц.");
};


instance DIA_XARDAS_NDM_TASKS_TWO_DONEDEAD(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_two_donedead_condition;
	information = dia_xardas_ndm_tasks_two_donedead_info;
	permanent = FALSE;
	description = "Этот маг мертв!";
};


func int dia_xardas_ndm_tasks_two_donedead_condition()
{
	if((MIS_XARDASNDMTASKSTWO == LOG_Running) && (TALIASANISDEAD == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_two_donedead_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_01");	//Этот маг мертв!
	if(TELLABOUTGALLAHAD == TRUE)
	{
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_02");	//Ты имеешь в виду Галлахада?
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_03");	//Да. Кажется, беднягу кто-то ухлопал!
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_04");	//О чем это ты?
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_05");	//Я о том маге, у которого была нужная тебе книга. Его звали Галлахад.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_06");	//Он жил в портовом квартале Хориниса. Кажется, беднягу кто-то ухлопал.
	};
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_07");	//Ну, хорошо. А что с книгой?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_08");	//Ее у него при себе не было.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_09");	//Ты уверен в этом?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_10");	//Абсолютно.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_11");	//Ну, если так, то, возможно, он просто ее где-то хорошо спрятал.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_12");	//Я отправлю на поиски несколько своих слуг. Они найдут эту книгу!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Two_DoneDead_01_13");	//А ты пока можешь пока заняться более насущными делами. Но будь готов, мне еще понадобятся твои услуги.
	MIS_XARDASNDMTASKSTWO = LOG_SUCCESS;
	XARDASTIMERQUEST = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDASNDMTASKSTWO,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDASNDMTASKSTWO,"Я принес Ксардасу известие о смерти Галлахада и также сказал ему, что при себе у него книги не оказалось. Возможно, Галлахад просто хорошо ее спрятал от посторонних глаз. Ксардас отправит несколько своих слуг на ее поиски, ну а я могу заняться другими делами.");
};

instance DIA_XARDAS_NDM_TASKS_FOUR(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_four_condition;
	information = dia_xardas_ndm_tasks_four_info;
	permanent = FALSE;
	description = "Тебе еще нужна моя помощь?";
};


func int dia_xardas_ndm_tasks_four_condition()
{
	var int daynow;
	daynow = Wld_GetDay();

	if((MIS_XARDASNDMTASKSTWO == LOG_SUCCESS) && (XARDASTIMERQUEST <= (daynow - 2)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_four_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_00");	//Тебе еще нужна моя помощь?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_01");	//(мрачно) Да. Только в этот раз постарайся отнестись к моему поручению предельно серьезно! Оно куда сложнее тех, что я давал тебе ранее.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_02");	//Итак... На днях я еще раз просмотрел те записи, которые ты мне принес из монастыря.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_03");	//И после долгих раздумий пришел к выводу, что для завершения исследований мне понадобится еще одна вещь.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_04");	//Какая?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_05");	//Речь идет об одном из древнейших фолиантов, посвященных магии некромантов - Некрономиконе!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_06");	//Тебе когда-нибудь приходилось слышать про этот артефакт?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_07");	//Честно говоря, нет.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_08");	//Я так и думал...(улыбается) Немногие знают о его существовании. Но по мне - это даже к лучшему!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_09");	//Мне также не слишком много известно про этот артефакт. Но моих сведений вполне хватит, чтобы завладеть этим сокровищем.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_10");	//Выходит, ты знаешь, где его искать?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_11");	//Этого я не говорил! Но я знаю того, кто поможет нам в этом.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_12");	//Его имя Нергал! Он был одним из самых могущественных некромантов своего времени и последним хозяином Некрономикона.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_13");	//К сожалению, душа Нергала уже давно отошла в мир теней... и узнать, в чьих руках сейчас находится Некрономикон будет не так легко.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_14");	//И что ты планируешь делать?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_15");	//Все просто! Знания темных рун некроманта помогут мне вызвать дух Нергала в этот мир, однако мне понадобится и твоя помощь.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_16");	//Что я должен делать?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_17");	//(серьезно) Где-то в восточной части этой долины расположена старая башня этого некроманта. Твой путь лежит именно туда!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_18");	//Я не знаю, что именно тебя там ожидает, но, думаю, ты и сам все поймешь, когда окажешься там.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_19");	//Ну, думаю, с этим проблем не будет.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_Four_01_20");	//Возможно...(ехидно) Но насколько мне известно, вход в эту башню закрыт. Тебе придется самому поломать голову над тем, как туда попасть.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_Four_01_21");	//На другое я и не рассчитывал.
	MIS_XARDASTASKSFOUR = LOG_Running;
	Log_CreateTopic(TOPIC_XARDASTASKSFOUR,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDASTASKSFOUR,LOG_Running);
	B_LogEntry(TOPIC_XARDASTASKSFOUR,"Ксардас дал мне поручение: достать древнейший фолиант по искусству темной магии - Некрономикон! Им когда-то владел могущественный некромант Нергал, и по всей видимости, он единственный, кто знает, где сейчас находится этот артефакт.");
	Log_AddEntry(TOPIC_XARDASTASKSFOUR,"Для начала мне необходимо отправиться в старую башню Нергала. Что меня там ждет, я узнаю на месте. Но проблема в том, что вход в башню Нергала закрыт и попасть туда невозможно. Кто бы мне мог помочь?");
};


instance DIA_XARDAS_NDM_TASKS_FOURPROGRESS(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_fourprogress_condition;
	information = dia_xardas_ndm_tasks_fourprogress_info;
	permanent = FALSE;
	description = "Я побывал в башне Нергала.";
};


func int dia_xardas_ndm_tasks_fourprogress_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (Npc_HasItems(hero,itmi_nergalcorpse) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourprogress_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourProgress_01_00");	//Я побывал в башне Нергала.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgress_01_01");	//(восхищенно) Тебе это удалось? Видать, не зря я поручил тебе это дело.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgress_01_02");	//Скажи, что тебе удалось узнать?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourProgress_01_03");	//Ничего интересного. А вот кое-что найти мне все-таки удалось.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgress_01_04");	//И что же это?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourProgress_01_05");	//Думаю, будет лучше, если ты сам на это взглянешь.
	B_GiveInvItems(other,self,itmi_nergalcorpse,1);
	Npc_RemoveInvItems(self,itmi_nergalcorpse,1);
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgress_01_06");	//Все верно! Это как раз то, что мне было необходимо.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgress_01_07");	//Теперь мне ничто не помешает вызвать душу Нергала в этот мир. И я узнаю тайну Некрономикона!
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourProgress_01_08");	//А что делать мне?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgress_01_09");	//Пока ничего. Можешь заняться другими делами.
	B_LogEntry(TOPIC_XARDASTASKSFOUR,"Я принес Ксардасу мертвую плоть некогда могущественного мага. Теперь он сможет провести ритуал вызова души Нергала, для того чтобы узнать тайну Некрономикона.");
	RITUALNERGALTIMER = Wld_GetDay();
};


instance DIA_XARDAS_NDM_TASKS_FOURPROGRESSTWO(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_fourprogresstwo_condition;
	information = dia_xardas_ndm_tasks_fourprogresstwo_info;
	permanent = FALSE;
	description = "Когда ты сможешь провести этот ритуал?";
};


func int dia_xardas_ndm_tasks_fourprogresstwo_condition()
{
	var int daynow;
	daynow = Wld_GetDay();
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALTIMER > (daynow - 2)))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourprogresstwo_info()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_00");	//Когда ты сможешь провести этот ритуал?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_01");	//(задумался) Не могу тебе точно сказать. Вызов души - само по себе дело крайне сложное!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_02");	//А уж если речь идет о могущественном маге, каким был Нергал - то оно и вовсе смертельно опасное!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_03");	//Спешка здесь крайне нежелательна. Необходимо продумать каждую мелочь, иначе любая ошибка может стоить тебе жизни!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_04");	//Кстати...(ворчливо) А почему ты спросил об этом?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_05");	//Мне бы хотелось поучаствовать в этом ритуале. Ты не против?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_06");	//Хммм... Для проведения этого ритуала мне действительно понадобится несколько помощников.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourProgressTwo_01_07");	//Ну что ж, я не возражаю.
	RITUALNERGALPREPARE = TRUE;
	B_LogEntry(TOPIC_XARDASTASKSFOUR,"Ксардас не возражает против того, чтобы я принял участие в ритуале вызова души некроманта Нергала.");
};


instance DIA_XARDAS_NDM_TASKS_FOURRITUALREADY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ndm_tasks_fourritualready_condition;
	information = dia_xardas_ndm_tasks_fourritualready_info;
	permanent = TRUE;
	description = "Все готово к ритуалу?";
};


func int dia_xardas_ndm_tasks_fourritualready_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALPREPARE == TRUE) && (RITUALNERGALREADY == FALSE))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourritualready_info()
{
	var int daynow;
	daynow = Wld_GetDay();
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_00");	//Все готово к ритуалу?
	if(RITUALNERGALTIMER <= (daynow - 2))
	{
		B_GivePlayerXP(500);
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_01");	//Да, все готово. Мы можем начинать!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_02");	//И что мне нужно делать?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_03");	//Слушай внимательно и запоминай. Как ты уже наверно заметил, рядом с тобой на полу изображена магическая пентаграмма.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_04");	//Встань на окончание звезды, что будет слева от меня и не сходи с этого места до тех пор, пока я не скажу.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_05");	//Иначе говоря, не заходи в пределы самой пентаграммы. Это очень важно!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_06");	//Почему?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_07");	//Во время ритуала все, кто в нем принимает участие, образуют единый магический барьер.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_08");	//Когда душа Нергала придет в этот мир, этот барьер защитит нас от ее неистовства.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_09");	//Так что постарайся отнестись к этому очень серьезно.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_10");	//Я все понял.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_11");	//Тогда не будем терять времени - начнем ритуал!
		B_LogEntry(TOPIC_XARDASTASKSFOUR,"Все готово для того, чтобы Ксардас провел ритуал.");
		Info_ClearChoices(dia_xardas_ndm_tasks_fourritualready);
		Info_AddChoice(dia_xardas_ndm_tasks_fourritualready,"Я готов.",dia_xardas_ndm_tasks_fourritualready_ok);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_01_12");	//(ворчливо) Пока еще нет. Приходи позже!
	};
};

func void dia_xardas_ndm_tasks_fourritualready_ok()
{
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourRitualReady_Ok_01_01");	//Я готов.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourRitualReady_Ok_01_02");	//Отлично! Помни о том, что я тебе сказал, и все будет хорошо.
	RITUALNERGALREADY = TRUE;
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"WaitForPlayerRitual");
	PC_Psionic.aivar[AIV_EnemyOverride] = TRUE;

	if(LesterGoXar == TRUE)
	{
		B_StartOtherRoutine(PC_Psionic,"Nergal");
	};
};


instance DIA_XARDAS_RITUALPREPAREHURRY(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualpreparehurry_condition;
	information = dia_xardas_ritualpreparehurry_info;
	permanent = TRUE;
	important = TRUE;
};


func int dia_xardas_ritualpreparehurry_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALREADY == TRUE) && (XARDASFINISHRITUALBEGAN == FALSE) && Npc_IsInState(self,ZS_Talk) && (Npc_GetDistToWP(hero,"NW_XARDAS_RITUAL_04") >= 150))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualpreparehurry_info()
{
	AI_Output(self,other,"DIA_Xardas_RitualPrepareHurry_01_01");	//(ворчливо) Чего ты ждешь?! Встань на окончание пентаграммы, что слева от меня, и мы начнем ритуал.
	AI_Output(other,self,"DIA_Xardas_RitualPrepareHurry_01_02");	//Уже иду.
	AI_StopProcessInfos(self);
};


instance DIA_XARDAS_RITUALPREPARE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualprepare_condition;
	information = dia_xardas_ritualprepare_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_xardas_ritualprepare_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (RITUALNERGALREADY == TRUE) && (Npc_GetDistToWP(hero,"NW_XARDAS_RITUAL_04") < 100) && (Npc_GetDistToWP(self,"NW_XARDAS_RITUAL_00") < 100))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualprepare_info()
{
	AI_Output(self,other,"DIA_Xardas_RitualPrepare_01_01");	//Итак, приступим. И помни - не заходи в пределы пентаграммы!
	AI_Output(other,self,"DIA_Xardas_RitualPrepare_01_02");	//Я все понял! Давай уже начнем.
	AI_Output(self,other,"DIA_Xardas_RitualPrepare_01_03");	//Хорошо.
	AI_StopProcessInfos(self);
	XARDASFINISHRITUALBEGAN = TRUE;
	Npc_ExchangeRoutine(self,"XardasRitual");
	self.name[0] = "";
};


instance DIA_XARDAS_RITUALDONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualdone_condition;
	information = dia_xardas_ritualdone_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_xardas_ritualdone_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (XARDASFINISHRITUALOK == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualdone_info()
{
	self.name[0] = "Ксардас";
	B_GivePlayerXP(1000);
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_01");	//(могущественно) Все кончено - ритуал завершен!
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_02");	//И что тебе удалось узнать?
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_03");	//Достаточно для того, чтобы теперь заполучить Некрономикон в свои руки!
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_04");	//Хммм. А этот некромант оказался могущественнее, чем я думал. Мне с большим трудом удалось добиться от него правды!
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_05");	//Но теперь все позади! Осталось пойти и забрать этот артефакт там, где он сейчас находится.
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_06");	//И где же это место?
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_07");	//Совсем недалеко. На западном побережье острова стоит темная твердыня Ашерона!
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_08");	//Это огромная черная башня с высокими остроконечными шпилями. Возможно, ты уже видел ее раньше.
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_09");	//Что-то припоминаю...
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_10");	//Так вот. На самой вершине этого монолита Нергал и сокрыл Некрономикон!
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_11");	//И ты об этом не знал?
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_12");	//Я догадывался, но не мог проверить. Вход в башню охраняло бессмертное существо, которое породила сама Тьма!
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_13");	//И как с ним тогда справиться, я тоже не знал. Но теперь, после встречи с Нергалом все изменилось.
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_14");	//Тогда тебе стоит вновь наведаться туда!
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_15");	//(ворчливо) Не мне, а тебе! Я сейчас слишком занят другими неотложными делами.
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_16");	//Ну ладно. И как же мне победить это бессмертное существо?
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_17");	//Все очень просто. Его слабость - это его противоположность!
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_18");	//Поскольку это создание породила магия Тьмы, то магический свет должен его убить!
	AI_Output(other,self,"DIA_Xardas_RitualDone_01_19");	//Да, действительно просто.
	AI_Output(self,other,"DIA_Xardas_RitualDone_01_20");	//Тогда действуй. Ступай и принеси мне Некрономикон!
	XARDASTELLMEOSTA = TRUE;
	B_LogEntry(TOPIC_XARDASTASKSFOUR,"Ритуал вызова некроманта Нергала завершен, и теперь мы знаем, где искать Некрономикон. Он находится на вершине темной башни, расположенной на западном побережье острова. Вход в башню охраняет бессмертное существо, порожденное самой Тьмой. Справиться с ним теперь также не составит труда - это создание может убить простой свет.");
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"Xar");
	PC_Psionic.aivar[AIV_EnemyOverride] = FALSE;

	if(LesterGoXar == TRUE)
	{
		B_StartOtherRoutine(PC_Psionic,"Xardas");	
	};
};


instance DIA_XARDAS_RITUALFAIL(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_ritualfail_condition;
	information = dia_xardas_ritualfail_info;
	permanent = FALSE;
	important = TRUE;
};


func int dia_xardas_ritualfail_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (XARDASRITUALFAIL == TRUE) && (NERGALISDEAD == TRUE))
	{
		return TRUE;
	};
};

func void dia_xardas_ritualfail_info()
{
	self.name[0] = "Ксардас";
	B_GivePlayerXP(100);
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_01");	//(гневно) Глупец! Что ты наделал?!
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_02");	//Я ведь говорил, чтобы ты не смел заходить в пределы пентаграммы!
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_03");	//Теперь из-за твоей глупости нам никогда не узнать тайну Некрономикона!
	AI_Output(other,self,"DIA_Xardas_RitualFail_01_04");	//Не волнуйся! Я знаю, где нам его искать.
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_05");	//Что?! Что за бред ты несешь?
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_06");	//Душа Нергала мертва! А ведь только она могла бы нам поведать об этом...
	AI_Output(other,self,"DIA_Xardas_RitualFail_01_08");	//Перед тем как попытаться убить меня, Нергал открыл мне эту тайну и рассказал, как достать интересующий тебя артефакт.
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_09");	//Но этого не может быть! С какой стати Нергал стал бы это делать?
	AI_Output(other,self,"DIA_Xardas_RitualFail_01_10");	//Понятия не имею. А разве теперь это имеет значение?
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_11");	//Хммм... Ну, если ты действительно знаешь, как заполучить Некрономикон - ступай и принеси мне его!
	AI_Output(self,other,"DIA_Xardas_RitualFail_01_12");	//И надеюсь, что ты не лжешь. Я не люблю, когда из меня делают идиота!
	B_LogEntry(TOPIC_XARDASTASKSFOUR,"Ксардас не поверил, что мне удалось выведать у Нергала тайну Некрономикона. Надо бы принести ему этот артефакт, чтобы убедить в обратном.");
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"Xar");
	PC_Psionic.aivar[AIV_EnemyOverride] = FALSE;

	if(LesterGoXar == TRUE)
	{
		B_StartOtherRoutine(PC_Psionic,"Xardas");	
	};
};


instance DIA_XARDAS_NDM_TASKS_FOURDONE(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_ndm_tasks_fourdone_condition;
	information = dia_xardas_ndm_tasks_fourdone_info;
	permanent = FALSE;
	description = "У меня есть Некрономикон!";
};


func int dia_xardas_ndm_tasks_fourdone_condition()
{
	if((MIS_XARDASTASKSFOUR == LOG_Running) && (Npc_HasItems(hero,itwr_necronomicon) >= 1))
	{
		return TRUE;
	};
};

func void dia_xardas_ndm_tasks_fourdone_info()
{
	B_GivePlayerXP(2000);
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_01");	//У меня есть Некрономикон!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_04");	//Очень хорошо! Теперь дай мне взглянуть на это сокровище! Я уже сгораю от нетерпения, чтобы воочию увидеть его.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_06");	//Вот.
	B_GiveInvItems(other,self,itwr_necronomicon,1);
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_07");	//Наконец-то! Теперь эта книга у меня в руках! Ты не представляешь, что она значит для меня.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_08");	//И что же?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_09");	//Завладеть этим сокровищем мечтает любой темный маг, и теперь именно Я ЕГО ХОЗЯИН!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_10");	//Неудивительно, что Нергал был столь могущественным некромантом при жизни. Все это благодаря Некрономикону!
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_11");	//И даже после смерти ее обладатель ничуть не утратил своего могущества.
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_12");	//Понятно. И что теперь?
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_13");	//Ничего...(смеется) Или ты рассчитывал на какое-то представление возможностей этого артефакта?
	AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_14");	//Да нет, просто спросил.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_15");	//Запомни! Некрономикон не наделяет своего обладателя самим могуществом, он лишь несет в себе мудрость и знания, кои являются ключом к обладанию первым.
	AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_16");	//Кстати, хочу тебя спросить - ты сам уже пробовал читать его?
	if(((NECRONOMICONBONUS == TRUE) && (NECRONOMICONBONUSTRY == TRUE)) || ((NECRONOMICONBONUS == TRUE) && (NECRONOMICONBONUSTRY == FALSE)))
	{
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_17");	//Да, я его читал.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_18");	//Тогда ты уже должен был это понять...(могущественно) И наверняка этот опыт не прошел для тебя даром!
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_19");	//Ты прав.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_20");	//(лукаво) Я в этот не сомневаюсь. Но ладно, хватит уже об этом! У нас есть дела и поважнее.
	}
	else if((NECRONOMICONBONUS == FALSE) && (NECRONOMICONBONUSTRY == TRUE))
	{
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_22");	//Я пробовал, но у меня ничего не получилось. Книга не захотела открыть свои тайны!
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_23");	//(лукаво) Это и понятно. Ведь она подвластна только воле темных магов, а ты таковым не являешься. Но теперь это уже не имеет значения!
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_24");	//Так что хватит уже об этом! У нас есть дела и поважнее.
	}
	else if((NECRONOMICONBONUS == FALSE) && (NECRONOMICONBONUSTRY == FALSE))
	{
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_26");	//Нет, не пробовал. А надо было?
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_27");	//(удивленно) Не пробовал? Ты немного удивляешь меня.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_28");	//Заполучить такое сокровище в свои руки и не попытаться узнать ее тайну? Этого я не понимаю.
		AI_Output(other,self,"DIA_Xardas_NDM_Tasks_FourDone_01_29");	//Так уж получилось. Просто было как-то не до этого.
		AI_Output(self,other,"DIA_Xardas_NDM_Tasks_FourDone_01_30");	//Ну что же, это твое личное дело. А теперь хватит об этом! У нас есть дела и поважнее.
	};
	MIS_XARDASTASKSFOUR = LOG_SUCCESS;
	Log_SetTopicStatus(TOPIC_XARDASTASKSFOUR,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDASTASKSFOUR,"Я принес Ксардасу Некрономикон.");
};


instance DIA_XARDAS_BRINGNECRONOMICONNOQUEST(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = dia_xardas_bringnecronomiconnoquest_condition;
	information = dia_xardas_bringnecronomiconnoquest_info;
	permanent = FALSE;
	description = "У меня есть для тебя одна очень интересная вещь.";
};


func int dia_xardas_bringnecronomiconnoquest_condition()
{
	if((MIS_XARDASTASKSFOUR == FALSE) && (Npc_HasItems(hero,itwr_necronomicon) >= 1) && (hero.guild != GIL_KDM) && (hero.guild != GIL_NDM))
	{
		return TRUE;
	};
};

func void dia_xardas_bringnecronomiconnoquest_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_00");	//У меня есть для тебя одна очень интересная вещь.
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_01");	//Да? О чем ты говоришь?
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_02");	//Вот, взгляни сам.
	B_GiveInvItems(other,self,itwr_necronomicon,1);
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_03");	//(удивленно) Невероятно! Где ты нашел эту книгу?
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_04");	//В одной старой башне. На вид довольно ценная вещица!
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_05");	//(возмущенно) Ценная вещица?! Да ты хотя бы имеешь малейшее представление о том, что это такое?
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_06");	//А что это?
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_07");	//(с упреком) Эта ВЕЩЬ, как ты выразился, есть не что иное, как Некрономикон - древнейший фолиант, посвященный магии некромантов!
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_08");	//Завладеть этим сокровищем мечтает любой темный маг. Не говоря уже о том, что до последнего времени никто даже и не знал, где именно был сокрыт этот артефакт!
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_09");	//Выходит, мне очень повезло.
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_10");	//И не только тебе...(лукаво) Мне тоже!
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_11");	//Ты ведь не будешь против, если я оставлю эту книгу себе? Для тебя она в любом случае бесполезна.
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_13");	//Это почему же?
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_14");	//Ее тайны подвластны только воле темных магов. Для остальных же она не представляет абсолютно никакой ценности.
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_15");	//Ну, если она тебе так нужна - можешь ее забрать.
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_16");	//Спасибо. Честно говоря, на другое я и не рассчитывал.
	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_17");	//А я в свою очередь дам нечто более полезное для тебя, чем эта книга.

	if((other.guild == GIL_KDF) || (other.guild == GIL_KDW) || (other.guild == GIL_GUR) || (other.guild == GIL_KDM) || (other.guild == GIL_NOV) || (other.guild == GIL_NDM) || (other.guild == GIL_NDW))
	{
		AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_22");	//Вот, возьми этот эликсир духа!
		B_GiveInvItems(self,other,ItPo_Perm_Mana,1);
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_20");	//Вот, возьми этот эликсир жизни!
		B_GiveInvItems(self,other,ItPo_Perm_Health,1);
	};

	AI_Output(self,other,"DIA_Xardas_BringNecronomiconNoQuest_01_24");	//Тебя это устроит?
	AI_Output(other,self,"DIA_Xardas_BringNecronomiconNoQuest_01_25");	//Вполне.
};

instance DIA_XARDAS_PYROKINEZ(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = dia_xardas_pyrokinez_condition;
	information = dia_xardas_pyrokinez_info;
	permanent = FALSE;
	description = "Что это за руна у тебя на столе?";
};

func int dia_xardas_pyrokinez_condition()
{
	if((Kapitel >= 2) && ((hero.guild == GIL_KDM) || (hero.guild == GIL_NDM)))
	{
		return TRUE;
	};
};

func void dia_xardas_pyrokinez_info()
{
	AI_Output(other,self,"DIA_Xardas_HarmUndead_01_00");	//Что это за руна у тебя на столе?
	AI_Output(self,other,"DIA_Xardas_HarmUndead_01_01");	//А, эта? (оглядываясь) Она содержит заклинание уничтожения нежити. Довольно редкая, кстати.
	AI_Output(self,other,"DIA_Xardas_HarmUndead_01_02");	//А для тех, кто имеет дело с созданиями Белиара - она еще и воистину бесценная!
	AI_Output(other,self,"DIA_Xardas_HarmUndead_01_03");	//Впечатляет. А я могу каким-то образом получить такую же?
	AI_Output(self,other,"DIA_Xardas_HarmUndead_01_04");	//Понимаю твой интерес. Что же, я могу отдать ее тебе.
	AI_Output(self,other,"DIA_Xardas_HarmUndead_01_05");	//Однако прежде ты должен будешь оказать мне небольшую услугу.
	AI_Output(self,other,"DIA_Xardas_HarmUndead_01_07");	//Принеси мне пять сгустков эктоплазмы. Она послужит мне для создания новой, более могущественной руны.
	MIS_Pyrokinez = LOG_Running;
	Log_CreateTopic(TOPIC_XARDAS_PYROKINEZ,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDAS_PYROKINEZ,LOG_Running);
	B_LogEntry(TOPIC_XARDAS_PYROKINEZ,"Ксардас пообещал подарить мне руну уничтожения нежити, если я принесу ему пять сгустков эктоплазмы.");
};


instance DIA_Xardas_Pyrokinez_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pyrokinez_Done_condition;
	information = DIA_Xardas_Pyrokinez_Done_info;
	permanent = FALSE;
	description = "Я принес тебе эктоплазму.";
};

func int DIA_Xardas_Pyrokinez_Done_condition()
{
	if((Npc_HasItems(hero,ITMI_PLAZMA) >= 5) && (MIS_Pyrokinez == LOG_Running))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pyrokinez_Done_info()
{
	B_GivePlayerXP(500);
	AI_Output(other,self,"DIA_Xardas_HarmUndead_Done_01_01");	//Я принес тебе эктоплазму.
	B_GiveInvItems(other,self,ITMI_PLAZMA,5);
	Npc_RemoveInvItems(self,ITMI_PLAZMA,5);
	AI_Output(self,other,"DIA_Xardas_HarmUndead_Done_01_02");	//(довольно) Неплохо, очень неплохо!
	AI_Output(self,other,"DIA_Xardas_HarmUndead_Done_01_03");	//А вот и твоя руна. Уверен, что она тебе понравится!
 	B_GiveInvItems(self,other,ItRu_HarmUndead,1);
 	AI_Output(self,other,"DIA_Xardas_HarmUndead_Done_01_04");	//Используй ее против самой могущественной нежити.
	MIS_Pyrokinez = LOG_SUCCESS;
	Log_SetTopicStatus(TOPIC_XARDAS_PYROKINEZ,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDAS_PYROKINEZ,"Я принес Ксардасу эктоплазму. Руна у меня!");
};


instance DIA_Xardas_RobaUp(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_condition;
	information = DIA_Xardas_RobaUp_info;
	permanent = FALSE;
	description = "А могу я улучшить свою робу?";
};

func int DIA_Xardas_RobaUp_condition()
{
	if((KNOWSHOWDEALSOULS == TRUE) && (NEKR_H_ROBA == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_info()
{
	AI_Output(other,self,"DIA_Xardas_RobaUp_01_00");	//А могу я улучшить свою робу? Мне кажется, что она недостаточно хорошо меня защищает.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_01");	//Ну, если сам Белиар будет благосклонен к тебе, то, возможно, у тебя получится освятить твою робу. 
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_02");	//И учти, что освятить можно только робу высшего темного мага!
	AI_Output(other,self,"DIA_Xardas_RobaUp_01_03");	//Освятить?! Разве темная магия способна на такое?
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_04");	//С давних пор известно одно средство, с помощью которого слуги Белиара освящают различные предметы - в основном, свои одеяния.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_05");	//Этот эликсир называется 'Дыхание смерти', и просто так его нигде не найти.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_06");	//К сожалению, рецепт этого эликсира давно утерян. Могу лишь предположить, что он был разделен на две или три части.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_07");	//Так что тебе придется в этом разобраться самостоятельно, тут я тебе не помощник.
	AI_Output(other,self,"DIA_Xardas_RobaUp_01_08");	//А если мне все-таки удастся достать этот эликсир - что мне с ним делать?
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_09");	//Если сумеешь достать его, то для ритуала освящения тебе также понадобятся камни душ. Думаю, не меньше сотни.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_10");	//А после тебе необходимо будет обратиться к самому Белиару с определенной молитвой.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_11");	//Запоминай: ШАТАР АТН БОЛМАР КРАТ ИСАК МОТАЛ!
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_12");	//И если Белиар посчитает, что ты достоин его внимания, то освятит твою робу.
	AI_Output(other,self,"DIA_Xardas_RobaUp_01_13");	//Иначе никак?
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_14");	//Никак! Я уже предупреждал тебя, что путь темного мага труден и опасен.
	AI_Output(self,other,"DIA_Xardas_RobaUp_01_15");	//Не стоит теперь строить из себя заблудшую овцу! Иди и постарайся найти этого рецепт.
	Log_CreateTopic(TOPIC_XARDAS_ROBA,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_XARDAS_ROBA,LOG_Running);
	B_LogEntry(TOPIC_XARDAS_ROBA,"Я расспросил Ксардаса насчет своей робы. Он рассказал мне, что улучшить ее можно, но очень трудно. Для того, чтобы иметь шанс на успех, необходимо достать как можно больше камней душ. Также мне потребуется особый эликсир, но как его готовить, почти никому не известно. Наставник намекнул, что на острове может быть не более двух-трех отдельных частей рецепта, необходимых мне. Что ж, надо бы пройтись по всем темным уголкам и потрясти местную нежить.");
	MIS_ROBA_XARDAS = LOG_Running;
};

instance DIA_Xardas_RobaUp_Find(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_Find_condition;
	information = DIA_Xardas_RobaUp_Find_info;
	permanent = FALSE;
	description = "Я нашел рецепт 'Дыхание смерти'.";
};

func int DIA_Xardas_RobaUp_Find_condition()
{
	if((MIS_ROBA_XARDAS == LOG_Running) && (Npc_HasItems(other,itwr_death1) >= 1) && (Npc_HasItems(other,itwr_death2) >= 1) && (knows_breath_of_death1 == TRUE) && (knows_breath_of_death2 == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_Find_info()
{
	B_GivePlayerXP(1500);
	AI_Output(other,self,"DIA_Xardas_RobaUp_Find_00_01");	//Я нашел рецепт 'Дыхание смерти'.
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_02");	//(уважительно) А ты не перестаешь меня удивлять! Скажи, тебе удалось найти обе части рецепта?
	AI_Output(other,self,"DIA_Xardas_RobaUp_Find_00_03");	//Конечно.
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_04");	//И я надеюсь, что ты уже ознакомился с формулой изготовления этого зелья?
	AI_Output(other,self,"DIA_Xardas_RobaUp_Find_00_05");	//Само собой.
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_06");	//Отлично! Тогда, полагаю, ты не станешь возражать, если я заберу их у тебя?
	AI_Output(other,self,"DIA_Xardas_RobaUp_Find_00_07");	//Ну, если тебе они так нужны - забирай.
	B_GiveInvItemsManyThings(other,self);
	Npc_RemoveInvItems(hero,itwr_death1,2);
	Npc_RemoveInvItems(hero,itwr_death2,1);
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_08");	//Наконец-то! Ты себе и представить не можешь, как долго я хотел заполучить эти древние записи.
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_09");	//А чтобы ты не решил, что уйдешь от меня за это с пустыми руками...
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_10");	//...я лично приготовлю для тебя этот эликсир!
	AI_Output(other,self,"DIA_Xardas_RobaUp_Find_00_11");	//На подобную помощь я даже не рассчитывал.
	AI_Output(self,other,"DIA_Xardas_RobaUp_Find_00_12");	//Не стоит благодарностей. Возвращайся через три дня - полагаю, к этому времени эликсир будет готов.
	MIS_ROBA_XARDAS = LOG_SUCCESS;
	XARDASTIMERBENDM = Wld_GetDay();
	Log_SetTopicStatus(TOPIC_XARDAS_ROBA,LOG_SUCCESS);
	B_LogEntry(TOPIC_XARDAS_ROBA,"Я отдал Ксардасу две части рецепта. За это темный маг обещал лично сварить для меня эликсир 'Дыхание смерти'. По его словам, напиток будет готов через три дня.");
};

instance DIA_Xardas_RobaUp_Potion_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_Potion_Done_condition;
	information = DIA_Xardas_RobaUp_Potion_Done_info;
	important = FALSE;
	description = "Как поживает мой эликсир?";
};

func int DIA_Xardas_RobaUp_Potion_Done_condition()
{
	var int daynow;

	daynow = Wld_GetDay();

	if((MIS_ROBA_XARDAS == LOG_SUCCESS) && (XARDASTIMERBENDM > 0) && (XARDASTIMERBENDM < (daynow - 3)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_Potion_Done_info()
{
	AI_Output(other,self,"DIA_Xardas_RobaUp_Potion_Done_01_00");	//Как поживает мой эликсир?
	AI_Output(self,other,"DIA_Xardas_RobaUp_Potion_Done_01_01");	//Он готов. Вот, можешь его забрать.
	B_GiveInvItems(self,other,ITPO_BREATH_OF_DEATH,1);
	AI_Output(other,self,"DIA_Xardas_RobaUp_Potion_Done_01_02");	//Спасибо.
};

instance DIA_Xardas_RobaUp_NoRitual(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_RobaUp_NoRitual_condition;
	information = DIA_Xardas_RobaUp_NoRitual_info;
	permanent = FALSE;
	description = "У меня небольшая проблема.";
};

func int DIA_Xardas_RobaUp_NoRitual_condition()
{
	if((BeliarFailRobe == TRUE) && (BeliarDoneRobe == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_RobaUp_NoRitual_info()
{
	AI_Output(other,self,"DIA_Xardas_RobaUp_NoRitual_00_01");	//У меня небольшая проблема.
	AI_Output(self,other,"DIA_Xardas_RobaUp_NoRitual_00_02");	//(с любопытством) Что еще такое?
	AI_Output(other,self,"DIA_Xardas_RobaUp_NoRitual_00_03");	//Белиар не захотел освящать мою робу. Что мне делать?
	AI_Output(self,other,"DIA_Xardas_RobaUp_NoRitual_00_04");	//Ничего удивительного! Значит, своими деяниями ты еще не заслужил его благосклонность.
	AI_Output(self,other,"DIA_Xardas_RobaUp_NoRitual_00_05");	//Ты сможешь воспользоваться его дарами, только если Темный бог будет полностью уверен в тебе как в верном слуге.
	AI_Output(self,other,"DIA_Xardas_RobaUp_NoRitual_00_06");	//Да, и вот еще что: если ты принесешь камень с душой особенного существа, эффект будет куда интереснее.
};

instance DIA_Xardas_Mechi(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Mechi_condition;
	information = DIA_Xardas_Mechi_info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Xardas_Mechi_condition()
{
	if(hero.guild != GIL_NONE)
	{
		return TRUE;
	};
};

func void DIA_Xardas_Mechi_info()
{
	AI_Output(self,other,"DIA_Xardas_Mechi_00_01");	//Постой, у меня к тебе есть одна просьба.
	AI_Output(self,other,"DIA_Xardas_Mechi_00_02");	//Тебе ведь уже приходилось сталкиваться с проклятым оружием? 
	AI_Output(other,self,"DIA_Xardas_Mechi_00_03");	//Возможно, я точно не помню.
	AI_Output(self,other,"DIA_Xardas_Mechi_00_04");	//Хочу тебя сразу предупредить - это оружие очень опасно для людей! Так что даже не думай им воспользоваться.
	AI_Output(other,self,"DIA_Xardas_Mechi_00_05");	//Но почему?
	AI_Output(self,other,"DIA_Xardas_Mechi_00_06");	//Его носит только могущественная нежить, а их магия порою способна свести с ума любого человека.
	AI_Output(self,other,"DIA_Xardas_Mechi_00_07");	//Даже такого сильного, как ты!
	AI_Output(self,other,"DIA_Xardas_Mechi_00_08");	//(властно) Поэтому я хочу тебя попросить, чтобы ты приносил мне все проклятое оружие, которые только отыщешь.
	AI_Output(self,other,"DIA_Xardas_Mechi_00_09");	//В моей башне, под охраной моих слуг оно уже не причинит вреда простым обывателям сего мира.
	AI_Output(self,other,"DIA_Xardas_Mechi_00_10");	//Ну, а твои хлопоты будут хорошо оплачены. Договорились?
	AI_Output(other,self,"DIA_Xardas_Mechi_00_11");	//Хорошо, я буду иметь это в виду.
	B_LogEntry(Topic_OutTrader,"Ксардас купит у меня все проклятое оружие, которое я принесу ему.");
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_BuyWeapons(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 600;
	condition = DIA_Xardas_BuyWeapons_condition;
	information = DIA_Xardas_BuyWeapons_info;
	permanent = TRUE;
	description = "У меня есть для тебя проклятое оружие.";
};

func int DIA_Xardas_BuyWeapons_condition()
{
	if(Npc_KnowsInfo(hero,DIA_Xardas_Mechi))
	{
		if((Npc_HasItems(hero,ItMw_1H_ChelDrak_Left) > 0) || (Npc_HasItems(hero,ItMw_1H_ChelDrak_Right) > 0) || (Npc_HasItems(hero,ItMw_2H_ShadowBlade_Xert) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elair) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST_Ober) > 0) || (Npc_HasItems(hero,ItMw_PlagueStaff) > 0) || (Npc_HasItems(hero,ItMw_SoulKeeperStaff) > 0) || (Npc_HasItems(hero,ITMW_1H_DoomSpeer_Elite) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMAXE) > 0) || (Npc_HasItems(hero,ITMW_2H_HAOSHAND) > 0) || (Npc_HasItems(hero,ITMW_2H_RAVENELITE) > 0) || (Npc_HasItems(hero,ITMW_1H_GHOSTSWORD) > 0) || (Npc_HasItems(hero,ItMw_Doom_OldPiratensaebel) > 0) || (Npc_HasItems(hero,ItAr_Shield_01_Damn) > 0) || (Npc_HasItems(hero,ItAr_Shield_02_Damn) > 0) || (Npc_HasItems(hero,ItAr_Shield_03_Damn) > 0) || (Npc_HasItems(hero,ITMW_1H_DOOMSPEER) > 0) || (Npc_HasItems(hero,ITMW_1H_DOOMSWORD) > 0) || (Npc_HasItems(hero,ITMW_2H_DRACONSWORD_DEAD) > 0) || (Npc_HasItems(hero,ITMW_1H_DOOMSWORD_Elite) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMSWORD) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMSWORD_PreElite) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elite) > 0) || (Npc_HasItems(hero,ITMW_SHADOWPRIEST) > 0) || (Npc_HasItems(hero,ItRw_Crossbow_Undead) > 0) || (Npc_HasItems(hero,ItRw_Undead) > 0) || (Npc_HasItems(hero,ITMW_2H_DOOMSWORD_Elite) > 0))
		{
			return TRUE;
		};
	};
};

func void DIA_Xardas_BuyWeapons_info()
{
	var int countexp;
	var int goldplus;
	var int goldplus_all;

	goldplus = FALSE;
	goldplus_all = FALSE;

	AI_Output(other,self,"DIA_Xardas_BuyWeapons_01_00");	//У меня есть для тебя проклятое оружие.
	AI_Output(self,other,"DIA_Xardas_BuyWeapons_01_01");	//Превосходно! Давай его сюда.

	if(Npc_HasItems(hero,ItMw_1H_ChelDrak_Left) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_1H_ChelDrak_Left);
		Npc_RemoveInvItems(hero,ItMw_1H_ChelDrak_Left,Npc_HasItems(hero,ItMw_1H_ChelDrak_Left));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_1H_ChelDrak_Right) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_1H_ChelDrak_Right);
		Npc_RemoveInvItems(hero,ItMw_1H_ChelDrak_Right,Npc_HasItems(hero,ItMw_1H_ChelDrak_Right));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_2H_ShadowBlade_Xert) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_2H_ShadowBlade_Xert);
		Npc_RemoveInvItems(hero,ItMw_2H_ShadowBlade_Xert,Npc_HasItems(hero,ItMw_2H_ShadowBlade_Xert));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elair) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST_Elair);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST_Elair,Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elair));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST_Ober) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST_Ober);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST_Ober,Npc_HasItems(hero,ITMW_SHADOWPRIEST_Ober));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_PlagueStaff) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_PlagueStaff);
		Npc_RemoveInvItems(hero,ItMw_PlagueStaff,Npc_HasItems(hero,ItMw_PlagueStaff));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ItMw_SoulKeeperStaff) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_SoulKeeperStaff);
		Npc_RemoveInvItems(hero,ItMw_SoulKeeperStaff,Npc_HasItems(hero,ItMw_SoulKeeperStaff));
		goldplus_all = goldplus_all + (goldplus * 100);
	};
	if(Npc_HasItems(hero,ITMW_1H_DoomSpeer_Elite) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DoomSpeer_Elite);
		Npc_RemoveInvItems(hero,ITMW_1H_DoomSpeer_Elite,Npc_HasItems(hero,ITMW_1H_DoomSpeer_Elite));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMAXE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMAXE);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMAXE,Npc_HasItems(hero,ITMW_2H_DOOMAXE));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_HAOSHAND) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_HAOSHAND);
		Npc_RemoveInvItems(hero,ITMW_2H_HAOSHAND,Npc_HasItems(hero,ITMW_2H_HAOSHAND));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_RAVENELITE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_RAVENELITE);
		Npc_RemoveInvItems(hero,ITMW_2H_RAVENELITE,Npc_HasItems(hero,ITMW_2H_RAVENELITE));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_2H_DRACONSWORD_DEAD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DRACONSWORD_DEAD);
		Npc_RemoveInvItems(hero,ITMW_2H_DRACONSWORD_DEAD,Npc_HasItems(hero,ITMW_2H_DRACONSWORD_DEAD));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ItMw_Doom_OldPiratensaebel) > 0)
	{
		goldplus = Npc_HasItems(other,ItMw_Doom_OldPiratensaebel);
		Npc_RemoveInvItems(hero,ItMw_Doom_OldPiratensaebel,Npc_HasItems(hero,ItMw_Doom_OldPiratensaebel));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST,Npc_HasItems(hero,ITMW_SHADOWPRIEST));
		goldplus_all = goldplus_all + (goldplus * 40);
	};
	if(Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elite) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_SHADOWPRIEST_Elite);
		Npc_RemoveInvItems(hero,ITMW_SHADOWPRIEST_Elite,Npc_HasItems(hero,ITMW_SHADOWPRIEST_Elite));
		goldplus_all = goldplus_all + (goldplus * 40);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMSWORD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMSWORD);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMSWORD,Npc_HasItems(hero,ITMW_2H_DOOMSWORD));
		goldplus_all = goldplus_all + (goldplus * 20);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMSWORD_PREELITE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMSWORD_PREELITE);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMSWORD_PREELITE,Npc_HasItems(hero,ITMW_2H_DOOMSWORD_PREELITE));
		goldplus_all = goldplus_all + (goldplus * 20);
	};
	if(Npc_HasItems(hero,ITMW_2H_DOOMSWORD_ELITE) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_2H_DOOMSWORD_ELITE);
		Npc_RemoveInvItems(hero,ITMW_2H_DOOMSWORD_ELITE,Npc_HasItems(hero,ITMW_2H_DOOMSWORD_ELITE));
		goldplus_all = goldplus_all + (goldplus * 20);
	};
	if(Npc_HasItems(hero,ITMW_1H_DOOMSWORD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DOOMSWORD);
		Npc_RemoveInvItems(hero,ITMW_1H_DOOMSWORD,Npc_HasItems(hero,ITMW_1H_DOOMSWORD));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_1H_GHOSTSWORD) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_GHOSTSWORD);
		Npc_RemoveInvItems(hero,ITMW_1H_GHOSTSWORD,Npc_HasItems(hero,ITMW_1H_GHOSTSWORD));
		goldplus_all = goldplus_all + (goldplus * 30);
	};
	if(Npc_HasItems(hero,ITMW_1H_DOOMSPEER) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DOOMSPEER);
		Npc_RemoveInvItems(hero,ITMW_1H_DOOMSPEER,Npc_HasItems(hero,ITMW_1H_DOOMSPEER));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ITMW_1H_DOOMSWORD_Elite) > 0)
	{
		goldplus = Npc_HasItems(other,ITMW_1H_DOOMSWORD_Elite);
		Npc_RemoveInvItems(hero,ITMW_1H_DOOMSWORD_Elite,Npc_HasItems(hero,ITMW_1H_DOOMSWORD_Elite));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ItRw_Undead) > 0)
	{
		goldplus = Npc_HasItems(other,ItRw_Undead);
		Npc_RemoveInvItems(hero,ItRw_Undead,Npc_HasItems(hero,ItRw_Undead));
		goldplus_all = goldplus_all + (goldplus * 10);
	};
	if(Npc_HasItems(hero,ItRw_Crossbow_Undead) > 0)
	{
		goldplus = Npc_HasItems(other,ItRw_Crossbow_Undead);
		Npc_RemoveInvItems(hero,ItRw_Crossbow_Undead,Npc_HasItems(hero,ItRw_Crossbow_Undead));
		goldplus_all = goldplus_all + (goldplus * 15);
	};
	if(Npc_HasItems(hero,ItAr_Shield_01_Damn) > 0)
	{
		goldplus = Npc_HasItems(other,ItAr_Shield_01_Damn);
		Npc_RemoveInvItems(hero,ItAr_Shield_01_Damn,Npc_HasItems(hero,ItAr_Shield_01_Damn));
		goldplus_all = goldplus_all + (goldplus * 15);
	};
	if(Npc_HasItems(hero,ItAr_Shield_02_Damn) > 0)
	{
		goldplus = Npc_HasItems(other,ItAr_Shield_02_Damn);
		Npc_RemoveInvItems(hero,ItAr_Shield_02_Damn,Npc_HasItems(hero,ItAr_Shield_02_Damn));
		goldplus_all = goldplus_all + (goldplus * 15);
	};
	if(Npc_HasItems(hero,ItAr_Shield_03_Damn) > 0)
	{
		goldplus = Npc_HasItems(other,ItAr_Shield_03_Damn);
		Npc_RemoveInvItems(hero,ItAr_Shield_03_Damn,Npc_HasItems(hero,ItAr_Shield_03_Damn));
		goldplus_all = goldplus_all + (goldplus * 15);
	};

	AI_Output(self,other,"DIA_Xardas_BuyWeapons_01_02");	//Хорошо! Держи свое золото.
	B_GiveInvItems(self,other,ItMi_Gold,goldplus_all);
};

instance DIA_Xardas_SleeperMask(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SleeperMask_condition;
	information = DIA_Xardas_SleeperMask_info;
	permanent = FALSE;
	description = "У меня с собой есть маска Спящего.";
};

func int DIA_Xardas_SleeperMask_condition()
{
	if(Npc_HasItems(hero,ITMI_HELMSLEEPER_MIS) > 0)
	{
		return TRUE;
	};
};

func void DIA_Xardas_SleeperMask_info()
{
	AI_Output(other,self,"DIA_Xardas_SleeperMask_00_01");	//У меня с собой есть маска Спящего.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_02");	//Интересно! Откуда она у тебя?
	AI_Output(other,self,"DIA_Xardas_SleeperMask_00_03");	//Досталась от одного некроманта из храма орков.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_04");	//Ну-ка, дай мне взглянуть на нее!
	AI_Output(other,self,"DIA_Xardas_SleeperMask_00_05");	//Вот, смотри.
	B_GiveInvItems(other,self,ITMI_HELMSLEEPER_MIS,1);
	Npc_RemoveInvItems(self,ITMI_HELMSLEEPER_MIS,1);
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_06");	//Хммм...(оценивающе) В ней ощущается присутствие темной магии! Очень злой и могущественный предмет.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_07");	//Уверен, что ее предыдущий хозяин расстался с ним не по доброй воле.
	AI_Output(other,self,"DIA_Xardas_SleeperMask_00_08");	//Само собой! Но меня интересует другой вопрос - могу ли я сам использовать ее?
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_10");	//Ну...(задумчиво) Подчинить своей воле этот магический артефакт представляется мне вполне возможным.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_11");	//Правда, при этом часть его магической силы уйдет, и он уже будет не так эффективен, как сейчас.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_00_12");	//Однако даже тогда тебе понадобится обладать немалым могуществом, чтобы носить ее!

	if((hero.guild != GIL_KDF) || (hero.guild != GIL_KDW) || (hero.guild != GIL_KDM) || (hero.guild != GIL_GUR))
	{
		AI_Output(self,other,"DIA_Xardas_SleeperMask_00_04");	//А поскольку ты не маг, то я с трудом могу представить, как ты сможешь использовать этот артефакт.
	};

	Info_ClearChoices(DIA_Xardas_SleeperMask);
	Info_AddChoice(DIA_Xardas_SleeperMask,"Неважно! Просто сделай это.",DIA_Xardas_SleeperMask_DoIt);
	Info_AddChoice(DIA_Xardas_SleeperMask,"Тогда лучше оставь ее себе.",DIA_Xardas_SleeperMask_Leave);
};

func void DIA_Xardas_SleeperMask_DoIt()
{
	AI_Output(other,self,"DIA_Xardas_SleeperMask_DoIt_00_01");	//Неважно! Просто сделай это.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_DoIt_00_02");	//Как скажешь! Подожди минутку...
	AI_PlayAni(self,"T_PRACTICEMAGIC4");
	AI_Output(self,other,"DIA_Xardas_SleeperMask_DoIt_00_03");	//Все, теперь ты сможешь ее использовать. 
	B_GiveInvItems(self,other,ITMI_HELMSLEEPER,1);
	AI_Output(other,self,"DIA_Xardas_SleeperMask_DoIt_00_04");	//Благодарю тебя.
	Info_ClearChoices(DIA_Xardas_SleeperMask);
};

func void DIA_Xardas_SleeperMask_Leave()
{
	B_GivePlayerXP(2000);
	AI_Output(other,self,"DIA_Xardas_SleeperMask_Leave_00_01");	//Тогда лучше оставь ее себе.
	AI_Output(self,other,"DIA_Xardas_SleeperMask_Leave_00_02");	//Мудрое решение...(довольно) Уж я точно найду ей применение!
	DestroyMask = TRUE;
	Info_ClearChoices(DIA_Xardas_SleeperMask);
};

var int XardasDoMagicRoot;
var int XardasDoMagicRootYes;
var int XardasDoMagicRootDay;

instance DIA_Xardas_Druid(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Druid_condition;
	information = DIA_Xardas_Druid_info;
	permanent = FALSE;
	description = "Ты что-нибудь знаешь о магии друидов?";
};

func int DIA_Xardas_Druid_condition()
{
	if((XarDruid == TRUE) && (RootIsUp == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Druid_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_Druid_00_01");	//Ты что-нибудь знаешь о магии друидов?
	AI_Output(self,other,"DIA_Xardas_Druid_00_02");	//Может и знаю. А с чего это вдруг она тебя заинтересовала?
	AI_Output(other,self,"DIA_Xardas_Druid_00_03");	//У меня есть одна проблема. Сатурас сказал, что магия друидов поможет мне ее решить.
	AI_Output(self,other,"DIA_Xardas_Druid_00_04");	//В чем суть дела?
	AI_Output(other,self,"DIA_Xardas_Druid_00_05");	//Мне необходимо вернуть одно мертвое дерево к жизни. Только не спрашивай какое и почему!
	AI_Output(self,other,"DIA_Xardas_Druid_00_06");	//Это меня мало волнует. Но твой вопрос действительно заинтересовал меня.
	AI_Output(self,other,"DIA_Xardas_Druid_00_07");	//Минуточку... так, где мои записи...
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_Druid_00_08");	//Ага, нашел. Да, такое действительно возможно.
	AI_Output(self,other,"DIA_Xardas_Druid_00_09");	//Посвященному друиду не составит труда это сделать, но тем, кто не знаком с их магией...
	AI_Output(self,other,"DIA_Xardas_Druid_00_10");	//...в общем, это будет непросто. Но я могу тебе помочь в этом деле.
	AI_Output(other,self,"DIA_Xardas_Druid_00_11");	//Что от меня потребуется?
	AI_Output(self,other,"DIA_Xardas_Druid_00_12");	//(строго) Для начала, твое внимание. В моих записях сказано, что нужным тебе эффектом обладает некое растение, которое друиды называют Корнем Жизни!
	AI_Output(other,self,"DIA_Xardas_Druid_00_13");	//Корень Жизни? И где мне его искать?
	AI_Output(self,other,"DIA_Xardas_Druid_00_14");	//Можешь не утруждать себя поисками. Его невозможно где-либо найти или вырастить в саду, его можно получить только опытному друиду!
	AI_Output(other,self,"DIA_Xardas_Druid_00_15");	//Объяснишь мне, как это сделать?
	AI_Output(self,other,"DIA_Xardas_Druid_00_16");	//И не подумаю. Чтобы овладеть секретами магии друидов, у меня ушли годы. Я не готов тратить их вновь, чтобы обучить тебя им.
	AI_Output(self,other,"DIA_Xardas_Druid_00_17");	//Принеси мне все необходимое, и я сам приготовлю его для тебя.
	AI_Output(other,self,"DIA_Xardas_Druid_00_18");	//Ну, можно и так. И что тебе нужно?
	AI_Output(self,other,"DIA_Xardas_Druid_00_19");	//Хммм...(задумчиво) Минуточку!
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_Druid_00_20");	//Запоминай: мне нужен царский щавель, огненный корень, который послужит нам основой рецепта...
	AI_Output(self,other,"DIA_Xardas_Druid_00_21");	//...три листа целебной травы, вишня тролля как реагент и...
	AI_Output(self,other,"DIA_Xardas_Druid_00_22");	//(задумчиво) Это будет самое сложное... еще мне нужен цветок кактуса!
	AI_Output(other,self,"DIA_Xardas_Druid_00_23");	//Цветок кактуса?
	AI_Output(self,other,"DIA_Xardas_Druid_00_24");	//Да! Это растение в избытке растет только в очень жарких условиях. Отыскать на этом острове схожий экземпляр будет крайне тяжело.


	if(Npc_HasItems(hero,ItPl_CactusFlower) > 0)
	{
		AI_Output(other,self,"DIA_Xardas_Druid_00_25");	//Не волнуйся! У меня уже есть один такой.
		AI_Output(self,other,"DIA_Xardas_Druid_00_26");	//(удивленно) Ну, если так, тогда принеси мне все остальные ингредиенты и я сделаю для тебя Корень Жизни!
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_Druid_00_27");	//Но в любом случае без него я ничего не смогу сделать.
	};

	AI_Output(other,self,"DIA_Xardas_Druid_00_37");	//Понимаю.
	B_LogEntry(TOPIC_AdanosCrone,"Похоже, на свете нет такой вещи, о которой не знал бы Ксардас. Он приготовит для меня магическое растение - Корень Жизни, способное вернуть жизненную силу мертвому древу. Для его создания необходимы: царский щавель, огненный корень, вишня тролля, три листа целебной травы и цветок кактуса. Последний будет найти непросто, поскольку он произрастает только в очень жарких местах. Что-то мне подсказывает, что это растение я мог бы отыскать на плато...");
	XardasDoMagicRoot = TRUE;
	RootIsUp = TRUE;
};

instance DIA_Xardas_MagicRoot(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_MagicRoot_condition;
	information = DIA_Xardas_MagicRoot_info;
	permanent = TRUE;
	description = "Я принес все необходимые ингредиенты.";
};

func int DIA_Xardas_MagicRoot_condition()
{
	if((XardasDoMagicRoot == TRUE) && (XardasDoMagicRootYes == FALSE) && (Npc_HasItems(hero,ItPl_CactusFlower) > 0) && (Npc_HasItems(hero,ItPl_Mana_Herb_03) > 0) && (Npc_HasItems(hero,ItPl_Health_Herb_01) >= 3) && (Npc_HasItems(hero,ITPL_SUPER_HERB) > 0) && (Npc_HasItems(hero,ItPl_Perm_Herb) > 0))
	{
		return TRUE;
	};
};

func void DIA_Xardas_MagicRoot_info()
{
	AI_Output(other,self,"DIA_Xardas_MagicRoot_00_01");	//Я принес все необходимые ингредиенты.

	if((Xardas_GoesToRitualInnosEye == FALSE) || ((MIS_RitualInnosEyeRepair == LOG_SUCCESS) && (Xardas_GoesToRitualInnosEye == TRUE)))
	{
		B_GivePlayerXP(500);
		AI_Output(self,other,"DIA_Xardas_MagicRoot_00_02");	//Отлично! Давай их мне.
		AI_Output(other,self,"DIA_Xardas_MagicRoot_00_03");	//Вот они.
		b_giveinvitemsmanythings(other,self);
		Npc_RemoveInvItems(hero,ItPl_CactusFlower,1);
		Npc_RemoveInvItems(hero,ItPl_Mana_Herb_03,1);
		Npc_RemoveInvItems(hero,ItPl_Health_Herb_01,3);
		Npc_RemoveInvItems(hero,ITPL_SUPER_HERB,1);
		Npc_RemoveInvItems(hero,ItPl_Perm_Herb,1);
		AI_Output(self,other,"DIA_Xardas_MagicRoot_00_04");	//Теперь запасись терпением. Ровно через день твое растение будет готово.
		XardasDoMagicRootDay = Wld_GetDay();
		XardasDoMagicRootYes = TRUE;
		AI_StopProcessInfos(self);
		Npc_ExchangeRoutine(self,"Alchemy");
	}
	else
	{
		AI_Output(self,other,"DIA_Xardas_MagicRoot_00_05");	//Поговорим об этом позже.
		AI_StopProcessInfos(self);
	};
};

instance DIA_Xardas_MagicRoot_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_MagicRoot_Done_condition;
	information = DIA_Xardas_MagicRoot_Done_info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Xardas_MagicRoot_Done_condition()
{
	var int daynow;

	daynow = Wld_GetDay();

	if((XardasDoMagicRootYes == TRUE) && (XardasDoMagicRootDay < daynow))
	{
		return TRUE;
	};
};

func void DIA_Xardas_MagicRoot_Done_info()
{
	AI_Output(self,other,"DIA_Xardas_MagicRoot_Done_00_01");	//Корень Жизни готов! Вот, можешь забрать его.
	B_GiveInvItems(self,other,ItPl_MagicRoot,1);
	AI_Output(other,self,"DIA_Xardas_MagicRoot_Done_00_02");	//Спасибо.
	B_LogEntry(TOPIC_AdanosCrone,"Ксардас сделал для меня Корень Жизни! Пора возвращаться на плато.");
	AI_StopProcessInfos(self);
	Npc_ExchangeRoutine(self,"Xar");
};

var int XarCanDoSoulPot;
var int XarCanDoSoulPotDay;

instance DIA_Xardas_SeekerSoul(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SeekerSoul_condition;
	information = DIA_Xardas_SeekerSoul_info;
	permanent = FALSE;
	description = "У меня тут кое-что с собой есть.";
};

func int DIA_Xardas_SeekerSoul_condition()
{
	if(Npc_HasItems(hero,ITMI_SeekerSoul) > 0)
	{
		return TRUE;
	};
};

func void DIA_Xardas_SeekerSoul_info()
{
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_01");	//У меня тут кое-что с собой есть.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_02");	//(ворчливо) Говори точнее! Что у тебя там?
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_03");	//Вот.
	B_GiveInvItems(other,self,ITMI_SeekerSoul,1);
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_04");	//(задумчиво) Похоже, это темный кристалл душ. Откуда он у тебя?
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_05");	//Достался от одной злобной твари. А что это за штуковина?
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_06");	//Ну, если говорить простыми словами, это просто обычное сердце.
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_07");	//На сердце это как-то не очень похоже.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_08");	//Есть существа из плоти и крови, и их сердца тебе приходилось видеть не один раз.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_09");	//А есть те, которые порождены магией. Их не часто можно встретить в этом мире, и все они крайне опасны.
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_10");	//В этом я с тобой соглашусь. А это... сердце можно для чего-нибудь использовать?
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_11");	//Хороший вопрос! Дай мне подумать...
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_12");	//У меня были записи, в которых упоминался один редкий магический эликсир. Для его приготовления как раз нужны были эти кристаллы.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_13");	//Подожди минутку...
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_14");	//Ага, вот они!
	B_UseFakeScroll();
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_15");	//Тут написано, что для приготовления этого эликсира необходимо десять темных кристаллов душ.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_16");	//Однако кроме этого сказано, что действие этого зелья крайне непредсказуемо.
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_00_17");	//И что это означает?
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_18");	//Как я понимаю, он может повысить твою силу, а может придать тебе ловкости. На всех он действует по-разному.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_00_19");	//В общем, если принесешь мне кристаллы, я сварю тебе этот эликсир...
	B_GiveInvItems(self,other,ITMI_SeekerSoul,1);
	MIS_SeekerSoul = LOG_Running;
	Log_CreateTopic(TOPIC_SeekerSoul,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_SeekerSoul,LOG_Running);
	B_LogEntry(TOPIC_SeekerSoul,"Ксардас рассказал мне, что из темных кристаллов душ можно приготовить магический эликсир. Однако для этого ему понадобится не менее десятка таких кристаллов.");
};

instance DIA_Xardas_SeekerSoul_Start(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SeekerSoul_Start_condition;
	information = DIA_Xardas_SeekerSoul_Start_info;
	permanent = FALSE;
	description = "Я принес темные кристаллы душ.";
};

func int DIA_Xardas_SeekerSoul_Start_condition()
{
	if((MIS_SeekerSoul == LOG_Running) && (Npc_HasItems(hero,ITMI_SeekerSoul) >= 10))
	{
		return TRUE;
	};
};

func void DIA_Xardas_SeekerSoul_Start_info()
{
	B_GivePlayerXP(300);
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_Start_00_01");	//Я принес темные кристаллы душ.
	B_GiveInvItems(other,self,ITMI_SeekerSoul,10);
	Npc_RemoveInvItems(self,ITMI_SeekerSoul,10);
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_Start_00_06");	//Хорошо! Мне понадобится время, чтобы сварить его.
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_Start_00_07");	//Приходи через пару дней. Думаю, к тому времени он уже будет готов.
	B_LogEntry(TOPIC_SeekerSoul,"Я принес Ксардасу темные кристаллы душ. Я могу заглянуть к нему за эликсиром через пару дней.");
	XarCanDoSoulPot = TRUE;
	XarCanDoSoulPotDay = Wld_GetDay();
};

instance DIA_Xardas_SeekerSoul_End(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_SeekerSoul_End_condition;
	information = DIA_Xardas_SeekerSoul_End_info;
	permanent = FALSE;
	description = "Как поживает мой эликсир?";
};

func int DIA_Xardas_SeekerSoul_End_condition()
{
	var int DayNow;

	DayNow = Wld_GetDay();

	if((MIS_SeekerSoul == LOG_Running) && (XarCanDoSoulPot == TRUE) && (XarCanDoSoulPotDay <= (DayNow - 2)))
	{
		return TRUE;
	};
};

func void DIA_Xardas_SeekerSoul_End_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_SeekerSoul_End_00_01");	//Как поживает мой эликсир?
	AI_Output(self,other,"DIA_Xardas_SeekerSoul_End_00_02");	//Он готов. Держи.
	B_GiveInvItems(self,other,ITPO_SOULPOTION,1);
	MIS_SeekerSoul = LOG_Success;
	Log_SetTopicStatus(TOPIC_SeekerSoul,LOG_Success);
	B_LogEntry(TOPIC_SeekerSoul,"Зелье из кристаллов у меня.");
};

instance DIA_Xardas_Pirate_Start(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pirate_Start_condition;
	information = DIA_Xardas_Pirate_Start_info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Xardas_Pirate_Start_condition()
{
	if((Kapitel >= 2) && (GregIsBack == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pirate_Start_info()
{
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_01");	//Хорошо, что ты тут! У меня появилось к тебе небольшое дельце.
	AI_Output(other,self,"DIA_Xardas_Pirate_Start_00_02");	//Я внимательно слушаю.
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_03");	//Мне стало известно, что перед своим прибытием в Хоринис паладины потопили пиратское судно.
	AI_Output(other,self,"DIA_Xardas_Pirate_Start_00_04");	//С каких это пор у тебя интерес к пиратам?
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_05");	//(ворчливо) Сначала дослушай, а уже потом задавай вопрос! Так вот...
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_06");	//В свое время, перед тем как уничтожить один из храмов Белиара, паладины вывезли оттуда множество ценных предметов.
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_07");	//Среди них было одно кольцо. На вид неприглядное, но обладающее огромной силой в руках сведущего человека!
	AI_Output(other,self,"DIA_Xardas_Pirate_Start_00_08");	//А причем тут пираты?
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_09");	//Слушай дальше...(ворчливо) До сих пор мне не было ничего известно о судьбе кольца.
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_10");	//Но недавно я узнал, что это кольцо видели у одного человека в городе!
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_11");	//Если верить слухам, то он совсем недавно появился в городе, и по описанию смахивает на пирата.
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_12");	//У него есть отличительная черта - повязка на глазу! Так что его будет трудно спутать с кем-либо другим.
	AI_Output(self,other,"DIA_Xardas_Pirate_Start_00_13");	//Я хочу, чтобы ты нашел этого человека и узнал о кольце!
	AI_Output(other,self,"DIA_Xardas_Pirate_Start_00_14");	//Хорошо, постараюсь.
	MIS_PirateRing = LOG_Running;
	Log_CreateTopic(TOPIC_PirateRing,LOG_MISSION);
	Log_SetTopicStatus(TOPIC_PirateRing,LOG_Running);
	B_LogEntry(TOPIC_PirateRing,"Ксардас ищет редкое кольцо, которое в свое время паладины вывезли из разрушеного ими храма Белиара. Недавно старик узнал, что это кольцо видели у одного человека, по описанию походящего на пирата. Его отличительная черта - повязка на глазу. Ксардас попросил меня найти этого человека и разузнать у него про кольцо.");
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_Pirate_Curse(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pirate_Curse_condition;
	information = DIA_Xardas_Pirate_Curse_info;
	permanent = FALSE;
	description = "С твоим кольцом вышла небольшая проблема.";
};

func int DIA_Xardas_Pirate_Curse_condition()
{
	if((MIS_PirateRing == LOG_Running) && (GregCurse == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pirate_Curse_info()
{
	B_GivePlayerXP(500);
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_01");	//С твоим кольцом вышла небольшая проблема.
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_02");	//Судя по всему, оно таит в себе проклятие огромной силы! 
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_03");	//А капитан пиратов, который носит это кольцо, потерял из-за него добрую часть своей команды.
	AI_Output(self,other,"DIA_Xardas_Pirate_Curse_00_04");	//Это не проблема. Пусть снимет его, и проклятье сразу же исчезнет!
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_05");	//В том-то и дело, что он не может этого сделать! Как только он попытался снять кольцо, оно чуть не отправило его на тот свет.
	AI_Output(self,other,"DIA_Xardas_Pirate_Curse_00_06");	//Хммм...(задумчиво) А этого я никак не мог предположить.
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_07");	//Он предлагает тебе сделку: ты избавляешь его от проклятия, и он отдаст тебе кольцо.
	AI_Output(self,other,"DIA_Xardas_Pirate_Curse_00_08");	//Хорошо. Я постараюсь ему помочь, но для этого мне надо точно знать, с чего все началось.
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_09");	//Дело было так...(рассказывает историю Грэга)...
	AI_Output(self,other,"DIA_Xardas_Pirate_Curse_00_10");	//Тогда мне все ясно! Его проклятие висит не только на нем, но и на тех, кто остался в той пещере.
	AI_Output(self,other,"DIA_Xardas_Pirate_Curse_00_11");	//Если успокоить их проклятые души, то сила проклятия немного ослабнет, что позволит ему снять кольцо.
	AI_Output(other,self,"DIA_Xardas_Pirate_Curse_00_12");	//Вряд ли он еще раз туда сунется. Слишком свежи его воспоминания!
	AI_Output(self,other,"DIA_Xardas_Pirate_Curse_00_13");	//Тогда ТЫ сделай это за него! Убей тех проклятых пиратов и верни мне это кольцо.
	XarCurseClear = TRUE;
	B_LogEntry(TOPIC_PirateRing,"Ксардас выслушал историю Грэга и сказал, что упокоив души тех проклятых пиратов, можно ослабить силу проклятия кольца, после чего его можно будет снять. Вряд ли Грэгу хватит духу отправиться в ту пещеру. Придется мне это сделать.");
};

instance DIA_Xardas_Pirate_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_Xardas_Pirate_Done_condition;
	information = DIA_Xardas_Pirate_Done_info;
	permanent = FALSE;
	description = "Держи свое кольцо.";
};

func int DIA_Xardas_Pirate_Done_condition()
{
	if((MIS_PirateRing == LOG_Running) && (Npc_HasItems(hero,ItRi_DarkCurse) >= 1))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Pirate_Done_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_Pirate_Done_00_01");	//Держи свое кольцо.
	B_GiveInvItems(other,self,ItRi_DarkCurse,1);
	Npc_RemoveInvItems(self,ItRi_DarkCurse,1);
	AI_Output(self,other,"DIA_Xardas_Pirate_Done_00_02");	//(довольно) Наконец-то оно мое. Ты не представляешь, как я ждал этого момента!
	AI_Output(other,self,"DIA_Xardas_Pirate_Done_00_03");	//А как насчет моей награды?
	AI_Output(self,other,"DIA_Xardas_Pirate_Done_00_04");	//Не волнуйся! Я приготовил для тебя особый подарок.
	B_GiveInvItems(self,other,ItPo_ElixirSHadow,1);
	AI_Output(other,self,"DIA_Xardas_Pirate_Done_00_05");	//Какой-то эликсир?
	AI_Output(self,other,"DIA_Xardas_Pirate_Done_00_06");	//Не какой-то, а редчайший образец! Так что используй его с умом. 
	AI_Output(other,self,"DIA_Xardas_Pirate_Done_00_07");	//Ну ладно, спасибо.
	MIS_PirateRing = LOG_Success;
	Log_SetTopicStatus(TOPIC_PirateRing,LOG_Success);
	B_LogEntry(TOPIC_PirateRing,"Я отдал Ксардасу кольцо и получил заслуженную награду.");
};

instance DIA_NONE_100_Xardas_WhyHere(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_NONE_100_Xardas_WhyHere_condition;
	information = DIA_NONE_100_Xardas_WhyHere_info;
	permanent = FALSE;
	description = "Я должен поговорить с тобой.";
};

func int DIA_NONE_100_Xardas_WhyHere_condition()
{
	if((Kapitel < 4) && (MIS_TrueDragonMasters == LOG_Running))
	{
		return TRUE;
	};
};

func void DIA_NONE_100_Xardas_WhyHere_info()
{
	B_GivePlayerXP(1000);
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_00");	//Я должен поговорить с тобой.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_01");	//А что случилось?
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_02");	//От одного орка-шамана я слышал, что драконы служат вовсе не Белиару! Это так?
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_03");	//(спокойно) Позволь я кое-что тебе объясню.
 	AI_Output(self,other,"DIA_Xardas_WhyHere_01_04");	//Последние события четко дали мне понять, что угроза исходит вовсе не оттуда, откуда мы предполагали.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_05");	//Только глупые людишки склонны винить исключительно орков во всех своих бедах! На самом деле все обстоит несколько иначе.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_06");	//Ты ведь уже встречался с Хранителями, не так ли?
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_07");	//Встречался. Как раз в твоей башне.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_08");	//Тогда тебе должны быть известны причины, побудившие их появиться здесь.
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_09");	//Конечно. Хранитель Дагот рассказал мне о них.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_10");	//И тебя совершенно не смущает, что древние мироздатели обратились именно к тебе?
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_11");	//А что тут такого? Я же все-таки убил Спящего. Или ты забыл?
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_12");	//Да, это так...(задумчиво) Но не слишком ли много чести?
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_13");	//Спящий был сильным демоном, не отрицаю. Но и до тебя многие герои не раз отправляли в царство Белиара тварей пострашнее!
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_14");	//Что ты хочешь этим сказать?
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_15");	//Мне кажется, тем самым они пытаются отвлечь тебя от твоего главного предназначения.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_16");	//Чтобы ты не помешал им, или же наоборот, чтобы помог в осуществлении их замыслов.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_17");	//Я долго над этим размышлял, но разобраться до конца мне помогли именно орки!
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_18");	//Тогда что же замышляют Хранители?
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_19");	//Мне кажется, они хотят уничтожить этот мир!
	AI_Output(other,self,"DIA_Xardas_WhyHere_01_20");	//Ого! Интересно, а им-то это зачем?
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_21");	//Я не могу ответить на этот вопрос, ибо их планы для меня пока загадка.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_22");	//Но одно я знаю точно: тебе во всем этом отведена далеко не последняя роль.
	AI_Output(self,other,"DIA_Xardas_WhyHere_01_23");	//И нам надо действовать решительно! Времени у нас осталось совсем мало.
	B_LogEntry(TOPIC_TrueDragonMasters,"Ксардас полагает, что Хранители ведут двойную игру, и именно от них, а не от орков, исходит основная опасность этому миру.");
};

instance DIA_NONE_100_Xardas_WhatDo(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_NONE_100_Xardas_WhatDo_condition;
	information = DIA_NONE_100_Xardas_WhatDo_info;
	permanent = FALSE;
	description = "И что же нам тогда делать?";
};

func int DIA_NONE_100_Xardas_WhatDo_condition()
{
	if((MIS_TrueDragonMasters == LOG_Running) && (Npc_KnowsInfo(hero,DIA_NONE_100_Xardas_WhyHere) == TRUE))
	{
		return TRUE;
	};
};

func void DIA_NONE_100_Xardas_WhatDo_info()
{
	AI_Output(other,self,"DIA_Xardas_WhatDo_01_00");	//И что же нам тогда делать?
	AI_Output(self,other,"DIA_Xardas_WhatDo_01_01");	//Для начала нам надо разобраться с драконами! В самый решающий момент они могут помешать нам.
	AI_Output(other,self,"DIA_Xardas_WhatDo_01_02");	//А разве драконы не заодно с орками?
	AI_Output(self,other,"DIA_Xardas_WhatDo_01_03");	//Эти древние создания порождены могущественной магией стихий. А зов Спящего лишь пробудил их ото сна!
	AI_Output(self,other,"DIA_Xardas_WhatDo_01_04");	//Скорее всего они станут повиноваться воле Хранителей, нежели кому-либо другому.
	AI_Output(other,self,"DIA_Xardas_WhatDo_01_05");	//Но мне всегда казалось, что драконы служат именно Белиару!
	AI_Output(self,other,"DIA_Xardas_WhatDo_01_06");	//(серьезно) Нет, это не так. Драконы никому не служат! 
	AI_Output(self,other,"DIA_Xardas_WhatDo_01_07");	//Они слишком могущественны, чтобы быть простыми пешками в этой бесконечной войне богов.
	AI_Output(self,other,"DIA_Xardas_WhatDo_01_08");	//И только сила их творцов, возможно, способна управлять ими. А их творцы - Хранители!
	MIS_TrueDragonMasters = LOG_Success;
	Log_SetTopicStatus(TOPIC_TrueDragonMasters,LOG_Success);
	B_LogEntry(TOPIC_TrueDragonMasters,"Ксардас сказал, чтобы я действовал дальше согласно нашему плану. Мне надо убить драконов в Долине Рудников!");
};

instance DIA_NONE_100_Xardas_Scare(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 1;
	condition = DIA_NONE_100_Xardas_Scare_condition;
	information = DIA_NONE_100_Xardas_Scare_info;
	permanent = FALSE;
	description = "А ты не боишься, что Хранители услышат твои слова?!";
};

func int DIA_NONE_100_Xardas_Scare_condition()
{
	if((MIS_TrueDragonMasters == LOG_Success) && (Npc_GetDistToWP(self,"NW_TROLLAREA_RITUAL_01") > 2000))
	{
		return TRUE;
	};
};

func void DIA_NONE_100_Xardas_Scare_info()
{
	AI_Output(other,self,"DIA_Xardas_Scare_01_00");	//А ты не боишься, что Хранители услышат твои слова?
	AI_Output(self,other,"DIA_Xardas_Scare_01_01");	//(спокойно) Ты забываешь одну вещь. Это все-таки моя башня.
	AI_Output(self,other,"DIA_Xardas_Scare_01_02");	//И, естественно, я позаботился о том, чтобы чувствовать себя здесь в полной безопасности.
	AI_Output(self,other,"DIA_Xardas_Scare_01_03");	//Так что не волнуйся! О нашем разговоре никто и никогда не узнает.
};

instance DIA_Xardas_DarkMageBuySwords(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_DarkMageBuySwords_condition;
	information = DIA_Xardas_DarkMageBuySwords_info;
	permanent = FALSE;
	description = "Тебя могло бы заинтересовать это оружие?";
};

func int DIA_Xardas_DarkMageBuySwords_condition()
{
	if((Npc_HasItems(hero,ITMW_FAKESWORD_01) >= 1) && (DarkMageBuySwords == TRUE) && (KreolBuyMasiafSwrods == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_DarkMageBuySwords_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_DarkMageBuySwords_01_00");	//Тебя могло бы заинтересовать это оружие?
	B_GiveInvItems(other,self,ITMW_FAKESWORD_01,1);
	AI_Output(self,other,"DIA_Xardas_DarkMageBuySwords_01_03");	//Так, так... Да, интересная вещица! Но мне она не нужна.
	AI_Output(self,other,"DIA_Xardas_DarkMageBuySwords_01_04");	//Так что лучше поищи кого-нибудь другого, кто бы заинтересовался ей.
	B_GiveInvItems(self,other,ITMW_FAKESWORD_01,1);
};

instance DIA_Xardas_OldTeleports(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_OldTeleports_condition;
	information = DIA_Xardas_OldTeleports_info;
	permanent = FALSE;
	description = "Что ты знаешь о больших рунических камнях?";
};

func int DIA_Xardas_OldTeleports_condition()
{
	if(MIS_OldTeleports == LOG_Running)
	{
		return TRUE;
	};
};

func void DIA_Xardas_OldTeleports_info()
{
	B_GivePlayerXP(100);
	AI_Output(other,self,"DIA_Xardas_OldTeleports_01_00");	//Что ты знаешь о больших рунических камнях?
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_01");	//Насколько мне известно, их использовали друиды, когда-то жившие на этом острове.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_02");	//Эти камни служили им как средство быстрого перемещения по острову, вроде тех платформ телепортации, что были в Долине Рудников.
	AI_Output(other,self,"DIA_Xardas_OldTeleports_01_03");	//А ты сам не пытался воспользоваться ими?
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_04");	//Пробовал, но пока безуспешно...
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_05");	//Полагаю, для их использования требуются некие артефакты самих друидов. 
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_06");	//Но вот какие именно, мне пока неизвестно.
	AI_Output(other,self,"DIA_Xardas_OldTeleports_01_07");	//Выходит, что для нас они абсолютно бесполезны?
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_08");	//Не совсем... Мне удалось разобраться с самим процессом перемещения.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_09");	//Для этого я создал магическую руну телепортации, которая будет использовать силу этих рунических камней.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_10");	//Однако вопрос в том - каким образом активировать сами камни!
	AI_Output(other,self,"DIA_Xardas_OldTeleports_01_11");	//Если хочешь, я могу поискать для тебя эти артефакты.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_12");	//Хммм... Почему бы и нет? В конце концов, мне самому сейчас некогда этим заниматься.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_01_13");	//Поэтому я дам тебе свою руну, а ты поищи способ оживить эти камни.
	B_GiveInvItems(self,other,ItRu_GlobalTeleport,1);
	AI_Output(other,self,"DIA_Xardas_OldTeleports_01_14");	//Ладно, попробую.
	B_LogEntry(TOPIC_OldTeleports,"По словам Ксардаса, эти рунические камни использовались друидами для перемещения по острову. Он не знает способ активировать сами камни, однако смог создать руну телепортации, которая впоследствии сможет использовать их магическую силу. Теперь мне нужно отыскать артефакты друидов, с помощью которых можно будет заставить работать эти камни.");
	XarSeekDruidArt = TRUE;
};

instance DIA_Xardas_OldTeleports_Done(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_OldTeleports_Done_condition;
	information = DIA_Xardas_OldTeleports_Done_info;
	permanent = FALSE;
	description = "Я нашел способ активировать рунические камни.";
};

func int DIA_Xardas_OldTeleports_Done_condition()
{
	if((MIS_OldTeleports == LOG_Running) && (ActivateDruidStone == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_OldTeleports_Done_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_OldTeleports_Done_01_00");	//Я нашел способ активировать рунические камни.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_Done_01_01");	//Отлично! Теперь с их помощью ты сможешь перемещаться по острову так, как это делали когда-то сами друиды.
	AI_Output(self,other,"DIA_Xardas_OldTeleports_Done_01_02");	//А руну, что я дал, оставь себе. Она еще пригодится тебе.
	MIS_OldTeleports = LOG_Success;
	Log_SetTopicStatus(TOPIC_OldTeleports,LOG_Success);
	B_LogEntry(TOPIC_OldTeleports,"Я сообщил Ксардасу, что мне удалось активировать рунические камни. Он посоветовал мне пользоваться ими в дальнейшем для перемещения по острову, как это делали когда-то сами друиды.");
};

instance DIA_Xardas_Fregarah(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 3;
	condition = DIA_Xardas_Fregarah_condition;
	information = DIA_Xardas_Fregarah_info;
	permanent = FALSE;
	description = "Расскажи мне о каменном гиганте.";
};

func int DIA_Xardas_Fregarah_condition()
{
	if((MIS_XRANFREG == LOG_Running) && (XRANFREGXAR == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Fregarah_info()
{
	B_GivePlayerXP(200);
	AI_Output(other,self,"DIA_Xardas_Fregarah_01_00");	//Расскажи мне о каменном гиганте.
	AI_Output(self,other,"DIA_Xardas_Fregarah_01_01");	//Что?! О чем это ты?
	AI_Output(other,self,"DIA_Xardas_Fregarah_01_02");	//О том создании, которое преградило вам путь в храм во время экспедиции магов Огня в горы Хориниса.
	AI_Output(self,other,"DIA_Xardas_Fregarah_01_03");	//Аааа... Вот оно что! Ты каким-то образом узнал эту историю. От кого?
	AI_Output(other,self,"DIA_Xardas_Fregarah_01_04");	//Я прочел ее в одной из книг в библиотеке монастыря.
	AI_Output(other,self,"DIA_Xardas_Fregarah_01_05");	//Пирокар также подтвердил существование это голема!
	AI_Output(self,other,"DIA_Xardas_Fregarah_01_06");	//Еще бы...(посмеиваясь) Он тогда был напуган не меньше, чем если бы сейчас перед его носом появился настоящий дракон!
	AI_Output(other,self,"DIA_Xardas_Fregarah_01_07");	//Что ты знаешь о нем?
	AI_Output(self,other,"DIA_Xardas_Fregarah_01_08");	//То же, что и ты. Не больше и не меньше!
	AI_Output(self,other,"DIA_Xardas_Fregarah_01_09");	//И вообще, я сейчас слишком занят, чтобы забивать себе голову каким-то каменным големом-переростком.
	AI_Output(self,other,"DIA_Xardas_Fregarah_01_10");	//Поэтому если хочешь узнать больше, поищи сам мои записи касательно этого создания. Здесь, в башне.
	AI_StopProcessInfos(self);
	Wld_InsertItem(ItWr_Fregarah,"FP_ITEM_XARDAS_07");
};

instance DIA_Xardas_StonnosHronics(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_StonnosHronics_condition;
	information = DIA_Xardas_StonnosHronics_info;
	permanent = FALSE;
	description = "Я прочитал твои записи.";
};

func int DIA_Xardas_StonnosHronics_condition()
{
	if((MIS_XRANFREG == LOG_Running) && (FregarahSekret == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_StonnosHronics_info()
{
	AI_Output(other,self,"DIA_Xardas_StonnosHronics_01_01");	//Я прочитал твои записи.
	AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_02");	//Какие еще записи?
	AI_Output(other,self,"DIA_Xardas_StonnosHronics_01_03");	//Ну, насчет того каменного голема.
	AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_04");	//(ворчливо) А, ты все об этом. И что?
	AI_Output(other,self,"DIA_Xardas_StonnosHronics_01_05");	//Теперь мне нужен твой совет.
	AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_06");	//(посмеиваясь) Ты просто так от меня не отстанешь, да?
	AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_07");	//Ну, ладно. Если тебя это так заинтересовало, я помогу тебе.
	AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_08");	//Насколько мне помнится, одна из книг, описывающих те события, хранилась в моей старой затопленной башне. Поищи ее там.
	AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_09");	//Скорее всего, она лежит в моем старом сундуке. Вот ключ от него.
	B_GiveInvItems(self,other,itke_xardasowt,1);
	AI_Output(other,self,"DIA_Xardas_StonnosHronics_01_10");	//Спасибо.

     if(Npc_HasItems(hero,ItWr_Fregarah) >= 1)
	{
		AI_Output(self,other,"DIA_Xardas_StonnosHronics_01_11");	//(ворчливо) А мои записи верни мне обратно! Они мне еще и самому понадобятся.
	     B_GiveInvItems(other,self,ItWr_Fregarah,1);
		Npc_RemoveInvItems(self,ItWr_Fregarah,1);
	};

	XarGiveFirstTome = TRUE;
};

instance DIA_Xardas_HauntedLighthouse(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_HauntedLighthouse_condition;
	information = DIA_Xardas_HauntedLighthouse_info;
	permanent = FALSE;
	description = "Ты разбираешься в магическх знаках?";
};

func int DIA_Xardas_HauntedLighthouse_condition()
{
	if((MIS_HauntedLighthouse == LOG_Running) && (FindDamnSigh == TRUE) && (XardasGiveScroll == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_HauntedLighthouse_info()
{
	B_GivePlayerXP(250);
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_01_01");	//Ты разбираешься в магических знаках?
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_01_02");	//Что за вопросы? Я - маг. Естественно, я разбираюсь в них.
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_01_03");	//Тогда помоги мне понять, что означает один из них.
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_01_04");	//Расскажи мне, как он выглядел.
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_01_05");	//Ну, такая... как бы пентаграмма внутри пятиугольной фигуры.
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_01_06");	//Это знак проклятия! Причем довольно древний... Где ты обнаружил его?
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_01_07");	//На старом маяке возле Хориниса.
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_01_08");	//Ясно. Но чтобы понять, откуда он там появился, мне надо знать, что там на самом деле произошло.
	B_LogEntry(TOPIC_HauntedLighthouse,"Я рассказал Ксардасу о том магическом знаке, что обнаружил на маяке. По его словам, это знак проклятия. Но чтобы узнать причину появления знака, мы должны понять, что там конкретно произошло.");

	if((MIS_HauntedLighthouse == LOG_Running) && (FindOldSkeleton == TRUE) && (FindOldRing == TRUE) && (KnowStefan == TRUE))
	{
		Info_ClearChoices(DIA_Xardas_HauntedLighthouse);
		Info_AddChoice(DIA_Xardas_HauntedLighthouse,"Я знаю, что произошло на маяке.",DIA_Xardas_HauntedLighthouse_FindSkel);
	}
	else
	{
		XarKnowHLH = TRUE;
		AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_01_09");	//Я постараюсь это выяснить.
	};
};

instance DIA_Xardas_HauntedLighthouse_Again(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_HauntedLighthouse_Again_condition;
	information = DIA_Xardas_HauntedLighthouse_Again_info;
	permanent = TRUE;
	description = "По поводу того знака...";
};

func int DIA_Xardas_HauntedLighthouse_Again_condition()
{
	if((MIS_HauntedLighthouse == LOG_Running) && (FindDamnSigh == TRUE) && (XarKnowHLH == TRUE) && (XardasGiveScroll == FALSE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_HauntedLighthouse_Again_info()
{
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_Again_01_01");	//По поводу того знака...
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_Again_01_02");	//Да? Тебе что-нибудь удалось выяснить?

	if((MIS_HauntedLighthouse == LOG_Running) && (FindOldSkeleton == TRUE) && (FindOldRing == TRUE) && (KnowStefan == TRUE))
	{
		Info_ClearChoices(DIA_Xardas_HauntedLighthouse_Again);
		Info_AddChoice(DIA_Xardas_HauntedLighthouse_Again,"Я знаю, что произошло на маяке.",DIA_Xardas_HauntedLighthouse_FindSkel);
	}
	else
	{
		AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_Again_01_03");	//Пока нет.
	};
};

func void DIA_Xardas_HauntedLighthouse_FindSkel()
{
	B_GivePlayerXP(150);
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_FindSkel_01_01");	//Я знаю, что произошло на маяке. Несколько лет назад там произошло убийство.
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_FindSkel_01_02");	//Ханна, хозяйка гостиницы, рассказала мне, что...
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_FindSkel_01_03");	//Меня не интересуют подробности! Твоих слов достаточно.
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_FindSkel_01_04");	//И что ты об этом думаешь?
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_FindSkel_01_05");	//Подобный инцидент вполне мог вызвать порчу или проклятие. Тогда появление призраков на маяке вполне объяснимо.
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_FindSkel_01_06");	//Как снять это проклятие?
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_FindSkel_01_07");	//(задумчиво) Это будет непросто. Прежде всего, необходимо понять причину убийства. А в этом тебе сможет помочь разве что дух того убитого бедолаги.
	AI_Output(other,self,"DIA_Xardas_HauntedLighthouse_FindSkel_01_08");	//Сможешь призвать его?
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_FindSkel_01_09");	//Ты и сам справишься, а у меня дел и без тебя хватает.
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_FindSkel_01_10");	//Вот тебе свиток. Его сила позволит тебе призвать дух убиенного на месте его гибели.
	B_GiveInvItems(self,other,ItMi_XardasMagicScroll,1);
	AI_Output(self,other,"DIA_Xardas_HauntedLighthouse_FindSkel_01_11");	//Только будь осторожен. Духи не любят живых. Если он с тобой заговорит, это уже можно будет считать большой удачей!
	XardasGiveScroll = TRUE;
	B_LogEntry(TOPIC_HauntedLighthouse,"Я поведал Ксардасу о том, что случилось на маяке. Теперь необходимо поговорить с духом убитого, чтобы понять, за что его убили. Ксардас дал мне магический свиток, который нужно прочитать на маяке рядом с местом убийства.");
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_DealStoryDLH(C_Info)
{
	npc = NONE_100_Xardas;
	nr = 2;
	condition = DIA_Xardas_DealStoryDLH_condition;
	information = DIA_Xardas_DealStoryDLH_info;
	permanent = FALSE;
	description = "Насчет маяка...";
};

func int DIA_Xardas_DealStoryDLH_condition()
{
	if((MIS_HauntedLighthouse == LOG_Running) && (DealStoryDLH == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Xardas_DealStoryDLH_info()
{
	B_GivePlayerXP(250);
	AI_Output(other,self,"DIA_Xardas_DealStoryDLH_01_01");	//Я использовал твой свиток и призвал дух убитого.
	AI_Output(other,self,"DIA_Xardas_DealStoryDLH_01_02");	//Он рассказал мне все, что знал. И теперь у меня только один вопрос - как снять само проклятие?
	AI_Output(self,other,"DIA_Xardas_DealStoryDLH_01_03");	//Сдается мне, только покаяние самого убийцы перед лицом своей жертвы поможет снять его.
	AI_Output(self,other,"DIA_Xardas_DealStoryDLH_01_04");	//Ты должен найти убийцу и привести его на маяк, где он должен будет испросить прощения у вызванного тобой духа.
	AI_Output(self,other,"DIA_Xardas_DealStoryDLH_01_05");	//Если тот простит его, то проклятие потеряет свою силу. 
	AI_Output(other,self,"DIA_Xardas_DealStoryDLH_01_06");	//А если нет?
	AI_Output(self,other,"DIA_Xardas_DealStoryDLH_01_07");	//Тогда, скорее всего, он умрет.
	CanGoLH = TRUE;
	B_LogEntry(TOPIC_HauntedLighthouse,"По словам Ксардаса, только покаяние убийцы перед лицом призрака снимет проклятие с маяка. Мне придется найти того, кто убил Стефана, и отвести его на маяк, чтобы тот испросил прощение у убитого. И где теперь его искать, спустя столько лет? Попробую поспрашивать в порту.");
};

//-------------------------------Слуги Ксара----------------------------------------


instance DIA_Xardas_Skeleton_Servant_01_EXIT(C_Info)
{
	npc = Xardas_Skeleton_Servant_01;
	nr = 999;
	condition = DIA_Xardas_Skeleton_Servant_01_EXIT_Condition;
	information = DIA_Xardas_Skeleton_Servant_01_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_Skeleton_Servant_01_EXIT_Condition()
{
	return TRUE;
};

func void DIA_Xardas_Skeleton_Servant_01_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_Skeleton_Servant_01_NO_TALK(C_Info)
{
	npc = Xardas_Skeleton_Servant_01;
	nr = 1;
	condition = DIA_Xardas_Skeleton_Servant_01_NO_TALK_condition;
	information = DIA_Xardas_Skeleton_Servant_01_NO_TALK_info;
	permanent = TRUE;
	important = TRUE;
};


func int DIA_Xardas_Skeleton_Servant_01_NO_TALK_condition()
{
	if(Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Skeleton_Servant_01_NO_TALK_info()
{
	Snd_Play3d(self,"GHOSTCURSE");
	AI_StopProcessInfos(self);
};

instance DIA_Xardas_Skeleton_Servant_02_EXIT(C_Info)
{
	npc = Xardas_Skeleton_Servant_02;
	nr = 999;
	condition = DIA_Xardas_Skeleton_Servant_02_EXIT_Condition;
	information = DIA_Xardas_Skeleton_Servant_02_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Xardas_Skeleton_Servant_02_EXIT_Condition()
{
	return TRUE;
};

func void DIA_Xardas_Skeleton_Servant_02_EXIT_Info()
{
	AI_StopProcessInfos(self);
};


instance DIA_Xardas_Skeleton_Servant_02_NO_TALK(C_Info)
{
	npc = Xardas_Skeleton_Servant_02;
	nr = 1;
	condition = DIA_Xardas_Skeleton_Servant_02_NO_TALK_condition;
	information = DIA_Xardas_Skeleton_Servant_02_NO_TALK_info;
	permanent = TRUE;
	important = TRUE;
};


func int DIA_Xardas_Skeleton_Servant_02_NO_TALK_condition()
{
	if(Npc_IsInState(self,ZS_Talk))
	{
		return TRUE;
	};
};

func void DIA_Xardas_Skeleton_Servant_02_NO_TALK_info()
{
	Snd_Play3d(self,"GHOSTCURSE");
	AI_StopProcessInfos(self);
};

//-----------------------друид---------------------------------------------

instance DIA_Fregeal_EXIT(C_Info)
{
	npc = NONE_1192_Fregeal;
	nr = 999;
	condition = DIA_Fregeal_EXIT_Condition;
	information = DIA_Fregeal_EXIT_Info;
	permanent = TRUE;
	description = Dialog_Ende;
};

func int DIA_Fregeal_EXIT_Condition()
{
	return TRUE;
};

func void DIA_Fregeal_EXIT_Info()
{
	AI_StopProcessInfos(self);
};

instance DIA_Fregeal_Hello(C_Info)
{
	npc = NONE_1192_Fregeal;
	condition = DIA_Fregeal_Hello_Condition;
	information = DIA_Fregeal_Hello_Info;
	permanent = FALSE;
	important = TRUE;
};

func int DIA_Fregeal_Hello_Condition()
{
	return TRUE;
};

func void DIA_Fregeal_Hello_Info()
{
	AI_Output(self,other,"DIA_Fregeal_Hello_01_00");	//Приветствую тебя, путник. Ты что-то тут ищешь, или просто заблудился?
	AI_Output(other,self,"DIA_Fregeal_Hello_01_01");	//Я просто прогуливаюсь. А что ты тут делаешь? 
	AI_Output(self,other,"DIA_Fregeal_Hello_01_02");	//Я тут живу.
	AI_Output(other,self,"DIA_Fregeal_Hello_01_03");	//Живешь?! Один, в лесу?
	AI_Output(self,other,"DIA_Fregeal_Hello_01_04");	//А чем тебе так плох этот лес?
	AI_Output(other,self,"DIA_Fregeal_Hello_01_05");	//Здесь же водится целая куча опасных тварей. Не говоря уже об орках...
	AI_Output(self,other,"DIA_Fregeal_Hello_01_06");	//Меня они не тронут. Для них я не представляю никакой угрозы. Как и они для меня.
	AI_Output(other,self,"DIA_Fregeal_Hello_01_07");	//Хочешь сказать, что звери тебя не трогают?
	AI_Output(self,other,"DIA_Fregeal_Hello_01_08");	//Ты схватываешь все на лету.
	AI_Output(other,self,"DIA_Fregeal_Hello_01_09");	//А что насчет орков?
	AI_Output(self,other,"DIA_Fregeal_Hello_01_10");	//Их я пока что здесь не видел. Но я сомневаюсь, что они решаться напасть на меня.
	AI_Output(other,self,"DIA_Fregeal_Hello_01_11");	//Орк - довольно сильный противник.
	AI_Output(self,other,"DIA_Fregeal_Hello_01_12");	//Да. Но мои лесные братья защитят меня в случае необходимости.
	AI_Output(self,other,"DIA_Fregeal_Hello_01_13");	//Так что можешь за меня не волноваться.
};

instance DIA_Fregeal_WhatName(C_Info)
{
	npc = NONE_1192_Fregeal;
	condition = DIA_Fregeal_WhatName_Condition;
	information = DIA_Fregeal_WhatName_Info;
	permanent = FALSE;
	description = "Как тебя зовут?";
};

func int DIA_Fregeal_WhatName_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Fregeal_Hello) == TRUE)
	{
		return TRUE;
	};
};

func void DIA_Fregeal_WhatName_Info()
{
	AI_Output(other,self,"DIA_Fregeal_WhatName_01_00");	//Как тебя зовут?
	AI_Output(self,other,"DIA_Fregeal_WhatName_01_01");	//Меня зовут Фрегьял. 
	AI_Output(other,self,"DIA_Fregeal_WhatName_01_02");	//Хммм... Довольно необычное имя для простого травника.
	AI_Output(self,other,"DIA_Fregeal_WhatName_01_03");	//Знаешь, имена не выбирают. Мое имя досталось мне от моего деда.
	AI_Output(self,other,"DIA_Fregeal_WhatName_01_04");	//Полагаю, что у него были причины назвать меня именно так.
	AI_Output(self,other,"DIA_Fregeal_WhatName_01_05");	//Но сейчас это уже не важно. Я к нему привык и менять не собираюсь.
};

var int FregealCanTrade;

instance DIA_Fregeal_WhatDo(C_Info)
{
	npc = NONE_1192_Fregeal;
	condition = DIA_Fregeal_WhatDo_Condition;
	information = DIA_Fregeal_WhatDo_Info;
	permanent = FALSE;
	description = "А чем ты тут занимаешься?";
};

func int DIA_Fregeal_WhatDo_Condition()
{
	if(Npc_KnowsInfo(other,DIA_Fregeal_Hello) == TRUE)
	{
		return TRUE;
	};
};

func void DIA_Fregeal_WhatDo_Info()
{
	AI_Output(other,self,"DIA_Fregeal_WhatDo_01_00");	//А чем ты тут занимаешься?
	AI_Output(self,other,"DIA_Fregeal_WhatDo_01_01");	//Я обычный травник. Собираю растения, а потом готовлю из них различные снадобья и отвары.
	AI_Output(other,self,"DIA_Fregeal_WhatDo_01_02");	//Какие, например?
	AI_Output(self,other,"DIA_Fregeal_WhatDo_01_03");	//В основном целебные, излечивающие от различных недугов.
	AI_Output(self,other,"DIA_Fregeal_WhatDo_01_04");	//Если ты вдруг болен, я могу продать тебе некоторые из них.
	AI_Output(self,other,"DIA_Fregeal_WhatDo_01_05");	//Увидишь, как они быстро поставят тебя на ноги.
	AI_Output(other,self,"DIA_Fregeal_WhatDo_01_06");	//Звучит заманчиво.
	FregealCanTrade = TRUE;
	Log_CreateTopic(Topic_OutTrader,LOG_NOTE);
	B_LogEntry(Topic_OutTrader,"Травник Фрегьял сможет продать мне различные растения и снадобья.");
};

instance DIA_Fregeal_Trade(C_Info)
{
	npc = NONE_1192_Fregeal;
	nr = 80;
	condition = DIA_Fregeal_Trade_Condition;
	information = DIA_Fregeal_Trade_Info;
	trade = TRUE;
	permanent = TRUE;
	description = "Что ты можешь предложить?";
};

func int DIA_Fregeal_Trade_Condition()
{
	if((FregealCanTrade == TRUE) && (Wld_IsTime(8,0,23,0) == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Fregeal_Trade_Info()
{
	AI_Output(other,self,"DIA_Addon_Martin_Trade_15_00");	//Что ты можешь предложить?
	B_GiveTradeInv(self);
};

instance DIA_Fregeal_SwampSecret(C_Info)
{
	npc = NONE_1192_Fregeal;
	nr = 1;
	condition = DIA_Fregeal_SwampSecret_condition;
	information = DIA_Fregeal_SwampSecret_info;
	permanent = FALSE;
	description = "Что ты знаешь о растении, которое называют болотной травой?";
};

func int DIA_Fregeal_SwampSecret_condition()
{
	if((MIS_SwampSecret == LOG_Running) && (Npc_KnowsInfo(other,DIA_Fregeal_Hello) == TRUE))
	{
		return TRUE;
	};
};

func void DIA_Fregeal_SwampSecret_info()
{
	B_GivePlayerXP(300);
	AI_Output(other,self,"DIA_Fregeal_SwampSecret_01_00");	//Что ты знаешь о растении, которое называют болотной травой?
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_01");	//(задумчиво) Не очень много. А почему ты интересуешься этим?
	AI_Output(other,self,"DIA_Fregeal_SwampSecret_01_02");	//Мне кажется, что эффект ее воздействия на сознание крайне необычен для простого растения.
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_03");	//Ааа... Так ты хочешь знать, почему курение болотной травы так сильно влияет на магическую силу и сознание человека?
	AI_Output(other,self,"DIA_Fregeal_SwampSecret_01_04");	//Именно так.
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_05");	//Увы, я не смогу ответить тебе на этот вопрос. Однако, у меня есть одна догадка. 
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_06");	//Мне кажется, что это растение порождено магией стихий.
	AI_Output(other,self,"DIA_Fregeal_SwampSecret_01_07");	//Магией стихий? Что ты имеешь в виду?
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_08");	//Обычно дар магии передается человеку от одного из богов. Магам Огня его дарует Иннос, магам Воды - Аданос, а темным магам - Белиар.
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_09");	//Но в мире есть и куда более могущественные силы, чем те, к которым относятся сами боги.
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_10");	//Возможно, болотная трава обладает частичкой именно такой силы. И когда человек выкуривает ее, он наполняет себя такой ма-а-аленькой толикой этой силы.
	AI_Output(other,self,"DIA_Fregeal_SwampSecret_01_11");	//Хочешь сказать, любой портовый пьяница, обкурившись этой травы, рано или поздно станет могущественным магом?
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_12");	//Разумеется, нет! Для начала, этот человек должен обладать большой силой духа и посвящать себя долгим медитациям. Простому невежде это не под силу.
	AI_Output(self,other,"DIA_Fregeal_SwampSecret_01_13");	//Но все это лишь мое предположение. Только узнав больше о стихии, которая питает магией эту траву, можно будет понять, так ли это на самом деле.
	B_LogEntry(TOPIC_SwampSecret,"Травник Фрегьял считает, что болотная трава несет в себе частичку магической силы самой стихии, которая породила этот мир. Мне в это как-то слабо верится, но Фрегьял не производит впечатление накурившегося безумца. Если он прав, то единственный способ узнать тайну болотной травы - это выяснить, какая стихия дарует ей частицу своей магии и как это происходит. Вот только где искать ответ на этот вопрос? Ведь стихии существовали еще до этого мира и вряд ли кто-то из простых людей писал о них монографии. Может быть, какой-то древний артефакт, впитавший в себя силу стихии, сможет пролить свет на эту тайну.");
};